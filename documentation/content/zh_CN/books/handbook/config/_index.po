# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR The FreeBSD Project
# This file is distributed under the same license as the FreeBSD Documentation package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
msgid ""
msgstr ""
"Project-Id-Version: FreeBSD Documentation VERSION\n"
"POT-Creation-Date: 2021-02-27 11:44-0300\n"
"PO-Revision-Date: 2021-04-11 12:24+0000\n"
"Last-Translator: Anonymous <noreply@weblate.org>\n"
"Language-Team: Chinese (Simplified) <https://translate-dev.freebsd.org/"
"projects/documentation/bookshandbookconfig_index/zh_CN/>\n"
"Language: zh_CN\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"
"X-Generator: Weblate 4.5.2\n"

#. type: YAML Front Matter: part
#: documentation/content/en/books/handbook/config/_index.adoc:1
#, no-wrap
msgid "Part III. System Administration"
msgstr ""

#. type: YAML Front Matter: title
#: documentation/content/en/books/handbook/config/_index.adoc:1
#, no-wrap
msgid "Chapter 12. Configuration and Tuning"
msgstr ""

#. type: Title =
#: documentation/content/en/books/handbook/config/_index.adoc:9
#, no-wrap
msgid "Configuration and Tuning"
msgstr "设定与调校"

#. type: Title ==
#: documentation/content/en/books/handbook/config/_index.adoc:45
#, no-wrap
msgid "Synopsis"
msgstr "简介"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:48
msgid ""
"One of the important aspects of FreeBSD is proper system configuration. This "
"chapter explains much of the FreeBSD configuration process, including some "
"of the parameters which can be set to tune a FreeBSD system."
msgstr ""
"在FreeBSD使用过程中，相当重要的环节之一就是如何正确设定系统。本章着重于介绍FreeBSD的设定流程，包括一些可以调整FreeBSD性能的参数设定。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:50
msgid "After reading this chapter, you will know:"
msgstr "读完本章节，你将会知道："

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:52
msgid ""
"The basics of [.filename]#rc.conf# configuration and "
"[.filename]#/usr/local/etc/rc.d# startup scripts."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:53
msgid "How to configure and test a network card."
msgstr "如何设定并测试网络卡。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:54
msgid "How to configure virtual hosts on network devices."
msgstr "如何在网络装置上设定虚拟主机。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:55
msgid "How to use the various configuration files in [.filename]#/etc#."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:56
msgid "How to tune FreeBSD using man:sysctl[8] variables."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:57
msgid "How to tune disk performance and modify kernel limitations."
msgstr "如何调校磁盘性能及修改核心限制。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:59
msgid "Before reading this chapter, you should:"
msgstr "在阅读这个章节之前，您应当："

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:61
msgid ""
"Understand UNIX(R) and FreeBSD basics (crossref:basics[basics,FreeBSD "
"Basics])."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:62
msgid ""
"Be familiar with the basics of kernel configuration and compilation "
"(crossref:kernelconfig[kernelconfig,Configuring the FreeBSD Kernel])."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/config/_index.adoc:64
#, no-wrap
msgid "Starting Services"
msgstr "启动服务"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:67
#, fuzzy
msgid ""
"Many users install third party software on FreeBSD from the Ports Collection "
"and require the installed services to be started upon system "
"initialization. Services, such as package:mail/postfix[] or "
"package:www/apache22[] are just two of the many software packages which may "
"be started during system initialization. This section explains the "
"procedures available for starting third party software."
msgstr ""
"许多使用者会使用Port套件集安装第三方软件到FreeBSD且需要安装服务在系统初始化时可启动该软件。服务，例如<package>mail/"
"postfix</package>或<package>www/"
"apache22</package>仅只是在众多需要在系统初始化时启动的软件之中的两个。本章节将说明可用来启动第三方软件的程序。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:69
msgid ""
"In FreeBSD, most included services, such as man:cron[8], are started through "
"the system startup scripts."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:70
#, no-wrap
msgid "Extended Application Configuration"
msgstr "延伸应用程序设定"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:73
msgid ""
"Now that FreeBSD includes [.filename]#rc.d#, configuration of application "
"startup is easier and provides more features. Using the key words discussed "
"in <<configtuning-rcd>>, applications can be set to start after certain "
"other services and extra flags can be passed through "
"[.filename]#/etc/rc.conf# in place of hard coded flags in the startup "
"script. A basic script may look similar to the following:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:81
#, no-wrap
msgid ""
"#!/bin/sh\n"
"#\n"
"# PROVIDE: utility\n"
"# REQUIRE: DAEMON\n"
"# KEYWORD: shutdown\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:83
#, no-wrap
msgid ". /etc/rc.subr\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:86
#, no-wrap
msgid ""
"name=utility\n"
"rcvar=utility_enable\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:88
#, no-wrap
msgid "command=\"/usr/local/sbin/utility\"\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:90
#, no-wrap
msgid "load_rc_config $name\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:97
#, no-wrap
msgid ""
"#\n"
"# DO NOT CHANGE THESE DEFAULT VALUES HERE\n"
"# SET THEM IN THE /etc/rc.conf FILE\n"
"#\n"
"utility_enable=${utility_enable-\"NO\"}\n"
"pidfile=${utility_pidfile-\"/var/run/utility.pid\"}\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:99
#, no-wrap
msgid "run_rc_command \"$1\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:102
msgid ""
"This script will ensure that the provided `utility` will be started after "
"the `DAEMON` pseudo-service. It also provides a method for setting and "
"tracking the process ID (PID)."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:104
#, fuzzy
msgid ""
"This application could then have the following line placed in "
"[.filename]#/etc/rc.conf#:"
msgstr "接着此应用程序便可将下行放到<filename>/etc/rc.conf</filename>中："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:108
#, fuzzy, no-wrap
msgid "utility_enable=\"YES\"\n"
msgstr "utility_enable=\"YES\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:111
msgid ""
"This method allows for easier manipulation of command line arguments, "
"inclusion of the default functions provided in [.filename]#/etc/rc.subr#, "
"compatibility with man:rcorder[8], and provides for easier configuration via "
"[.filename]#rc.conf#."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:112
#, no-wrap
msgid "Using Services to Start Services"
msgstr "使用服务来启动其他服务"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:115
msgid ""
"Other services can be started using man:inetd[8]. Working with man:inetd[8] "
"and its configuration is described in depth in "
"crossref:network-servers[network-inetd,“The inetd Super-Server”]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:117
msgid ""
"In some cases, it may make more sense to use man:cron[8] to start system "
"services. This approach has a number of advantages as man:cron[8] runs these "
"processes as the owner of the man:crontab[5]. This allows regular users to "
"start and maintain their own applications."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:119
msgid ""
"The `@reboot` feature of man:cron[8], may be used in place of the time "
"specification. This causes the job to run when man:cron[8] is started, "
"normally during system initialization."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/config/_index.adoc:121
#, no-wrap
msgid "Configuring man:cron[8]"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:124
msgid ""
"One of the most useful utilities in FreeBSD is cron. This utility runs in "
"the background and regularly checks [.filename]#/etc/crontab# for tasks to "
"execute and searches [.filename]#/var/cron/tabs# for custom crontab "
"files. These files are used to schedule tasks which cron runs at the "
"specified times. Each entry in a crontab defines a task to run and is known "
"as a _cron job_."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:126
msgid ""
"Two different types of configuration files are used: the system crontab, "
"which should not be modified, and user crontabs, which can be created and "
"edited as needed. The format used by these files is documented in "
"man:crontab[5]. The format of the system crontab, [.filename]#/etc/crontab# "
"includes a `who` column which does not exist in user crontabs. In the system "
"crontab, cron runs the command as the user specified in this column. In a "
"user crontab, all commands run as the user who created the crontab."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:128
msgid ""
"User crontabs allow individual users to schedule their own tasks. The `root` "
"user can also have a user [.filename]#crontab# which can be used to schedule "
"tasks that do not exist in the system [.filename]#crontab#."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:130
#, fuzzy
msgid "Here is a sample entry from the system crontab, [.filename]#/etc/crontab#:"
msgstr "以下为系统crontab <filename>/etc/crontab</filename>的示例项目："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:143
#, no-wrap
msgid ""
"# /etc/crontab - root's crontab for FreeBSD\n"
"#\n"
"# $FreeBSD$\n"
"# <.>\n"
"SHELL=/bin/sh\n"
"PATH=/etc:/bin:/sbin:/usr/bin:/usr/sbin <.>\n"
"#\n"
"#minute\thour\tmday\tmonth\twday\twho\tcommand <.>\n"
"#\n"
"*/5\t*\t*\t*\t*\troot\t/usr/libexec/atrun <.>\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:146
msgid ""
"<.> Lines that begin with the `#` character are comments. A comment can be "
"placed in the file as a reminder of what and why a desired action is "
"performed. Comments cannot be on the same line as a command or else they "
"will be interpreted as part of the command; they must be on a new "
"line. Blank lines are ignored."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:148
msgid ""
"<.> The equals (`=`) character is used to define any environment "
"settings. In this example, it is used to define the `SHELL` and `PATH`. If "
"the `SHELL` is omitted, cron will use the default Bourne shell. If the "
"`PATH` is omitted, the full path must be given to the command or script to "
"run."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:150
msgid ""
"<.> This line defines the seven fields used in a system crontab: `minute`, "
"`hour`, `mday`, `month`, `wday`, `who`, and `command`. The `minute` field is "
"the time in minutes when the specified command will be run, the `hour` is "
"the hour when the specified command will be run, the `mday` is the day of "
"the month, `month` is the month, and `wday` is the day of the week. These "
"fields must be numeric values, representing the twenty-four hour clock, or a "
"`*`, representing all values for that field. The `who` field only exists in "
"the system crontab and specifies which user the command should be run "
"as. The last field is the command to be executed."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:152
msgid ""
"<.> This entry defines the values for this cron job. The `\\*/5`, followed "
"by several more `*` characters, specifies that `/usr/libexec/atrun` is "
"invoked by `root` every five minutes of every hour, of every day and day of "
"the week, of every month.Commands can include any number of "
"switches. However, commands which extend to multiple lines need to be broken "
"with the backslash \"\\\" continuation character."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:154
#, no-wrap
msgid "Creating a User Crontab"
msgstr "建立使用者的Crontab"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:157
msgid "To create a user crontab, invoke `crontab` in editor mode:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:161
#, no-wrap
msgid "% crontab -e\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:164
msgid ""
"This will open the user's crontab using the default text editor. The first "
"time a user runs this command, it will open an empty file. Once a user "
"creates a crontab, this command will open that file for editing."
msgstr ""
"这样会使用预设的文字编辑器来开启使用者的crontab，使用者第一次执行这个指令会开启一个空的文件，使用者建立crontab之后这个指令则会开启已建立的c"
"rontab供编辑。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:166
msgid ""
"It is useful to add these lines to the top of the crontab file in order to "
"set the environment variables and to remember the meanings of the fields in "
"the crontab:"
msgstr "加入这些行到crontab档的最上方来设定环境变数以及备忘在crontab中字段的意思非常有用："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:173
#, fuzzy, no-wrap
msgid ""
"SHELL=/bin/sh\n"
"PATH=/etc:/bin:/sbin:/usr/bin:/usr/sbin\n"
"# Order of crontab fields\n"
"# minute\thour\tmday\tmonth\twday\tcommand\n"
msgstr ""
"SHELL=/bin/sh\n"
"PATH=/etc:/bin:/sbin:/usr/bin:/usr/sbin\n"
"# Order of crontab fields\n"
"# minute\thour\tmday\tmonth\twday\tcommand\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:176
#, fuzzy
msgid ""
"Then add a line for each command or script to run, specifying the time to "
"run the command. This example runs the specified custom Bourne shell script "
"every day at two in the afternoon. Since the path to the script is not "
"specified in `PATH`, the full path to the script is given:"
msgstr ""
"然后每一个要执行的指令或Script加入一行，指定要执行指令的时间。这个例子会每天在下午2点执行指定的自定义Bourne shell "
"script，由于没有在<literal>PATH</literal>指定Script的路径，所以必须给予完整的Script路径："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:180
#, fuzzy, no-wrap
msgid "0\t14\t*\t*\t*\t/usr/home/dru/bin/mycustomscript.sh\n"
msgstr "0\t14\t*\t*\t*\t/usr/home/dru/bin/mycustomscript.sh\n"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:186
msgid ""
"Before using a custom script, make sure it is executable and test it with "
"the limited set of environment variables set by cron. To replicate the "
"environment that would be used to run the above cron entry, use:"
msgstr ""
"在使用自定义的Script之前，请先确定该Script可以执行并且使用cron在有限的环境变数下测试。要复制一个用来执行上述cron项目的环境可以使用："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:190
#, no-wrap
msgid ""
"env -i SHELL=/bin/sh PATH=/etc:/bin:/sbin:/usr/bin:/usr/sbin HOME=/home/dru "
"LOGNAME=dru /usr/home/dru/bin/mycustomscript.sh\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:193
msgid ""
"The environment set by cron is discussed in man:crontab[5]. Checking that "
"scripts operate correctly in a cron environment is especially important if "
"they include any commands that delete files using wildcards."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:196
msgid ""
"When finished editing the crontab, save the file. It will automatically be "
"installed and cron will read the crontab and run its cron jobs at their "
"specified times. To list the cron jobs in a crontab, use this command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:201
#, no-wrap
msgid ""
"% crontab -l\n"
"0\t14\t*\t*\t*\t/usr/home/dru/bin/mycustomscript.sh\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:204
msgid "To remove all of the cron jobs in a user crontab:"
msgstr "要移除使用在使用者crontab中的cron job可："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:209
#, no-wrap
msgid ""
"% crontab -r\n"
"remove crontab for dru? y\n"
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/config/_index.adoc:212
#, no-wrap
msgid "Managing Services in FreeBSD"
msgstr "管理FreeBSD中的服务"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:215
msgid ""
"FreeBSD uses the man:rc[8] system of startup scripts during system "
"initialization and for managing services. The scripts listed in "
"[.filename]#/etc/rc.d# provide basic services which can be controlled with "
"the `start`, `stop`, and `restart` options to man:service[8]. For instance, "
"man:sshd[8] can be restarted with the following command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:219
#, no-wrap
msgid "# service sshd restart\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:222
msgid ""
"This procedure can be used to start services on a running system. Services "
"will be started automatically at boot time as specified in "
"man:rc.conf[5]. For example, to enable man:natd[8] at system startup, add "
"the following line to [.filename]#/etc/rc.conf#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:226
#, fuzzy, no-wrap
msgid "natd_enable=\"YES\"\n"
msgstr "natd_enable=\"YES\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:229
msgid ""
"If a `natd_enable=\"NO\"` line is already present, change the `NO` to "
"`YES`. The man:rc[8] scripts will automatically load any dependent services "
"during the next boot, as described below."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:231
msgid ""
"Since the man:rc[8] system is primarily intended to start and stop services "
"at system startup and shutdown time, the `start`, `stop` and `restart` "
"options will only perform their action if the appropriate "
"[.filename]#/etc/rc.conf# variable is set. For instance, `sshd restart` will "
"only work if `sshd_enable` is set to `YES` in [.filename]#/etc/rc.conf#. To "
"`start`, `stop` or `restart` a service regardless of the settings in "
"[.filename]#/etc/rc.conf#, these commands should be prefixed with "
"\"one\". For instance, to restart man:sshd[8] regardless of the current "
"[.filename]#/etc/rc.conf# setting, execute the following command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:235
#, no-wrap
msgid "# service sshd onerestart\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:238
msgid ""
"To check if a service is enabled in [.filename]#/etc/rc.conf#, run the "
"appropriate man:rc[8] script with `rcvar`. This example checks to see if "
"man:sshd[8] is enabled in [.filename]#/etc/rc.conf#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:246
#, no-wrap
msgid ""
"# service sshd rcvar\n"
"# sshd\n"
"#\n"
"sshd_enable=\"YES\"\n"
"#   (default: \"\")\n"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:251
msgid "The `# sshd` line is output from the above command, not a `root` console."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:254
msgid ""
"To determine whether or not a service is running, use `status`. For "
"instance, to verify that man:sshd[8] is running:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:259
#, no-wrap
msgid ""
"# service sshd status\n"
"sshd is running as pid 433.\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:262
msgid ""
"In some cases, it is also possible to `reload` a service. This attempts to "
"send a signal to an individual service, forcing the service to reload its "
"configuration files. In most cases, this means sending the service a "
"`SIGHUP` signal. Support for this feature is not included for every service."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:264
msgid ""
"The man:rc[8] system is used for network services and it also contributes to "
"most of the system initialization. For instance, when the "
"[.filename]#/etc/rc.d/bgfsck# script is executed, it prints out the "
"following message:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:268
#, fuzzy, no-wrap
msgid "Starting background file system checks in 60 seconds.\n"
msgstr "在 60 秒内启动后台文件系统检查。\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:271
msgid ""
"This script is used for background file system checks, which occur only "
"during system initialization."
msgstr "这个Script用来在背景做文件系统检查，只有在系统初始化时要执行。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:273
msgid ""
"Many system services depend on other services to function properly. For "
"example, man:yp[8] and other RPC-based services may fail to start until "
"after the man:rpcbind[8] service has started. To resolve this issue, "
"information about dependencies and other meta-data is included in the "
"comments at the top of each startup script. The man:rcorder[8] program is "
"used to parse these comments during system initialization to determine the "
"order in which system services should be invoked to satisfy the "
"dependencies."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:275
msgid ""
"The following key word must be included in all startup scripts as it is "
"required by man:rc.subr[8] to \"enable\" the startup script:"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:277
msgid "`PROVIDE`: Specifies the services this file provides."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:279
msgid ""
"The following key words may be included at the top of each startup "
"script. They are not strictly necessary, but are useful as hints to "
"man:rcorder[8]:"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:281
msgid ""
"`REQUIRE`: Lists services which are required for this service. The script "
"containing this key word will run _after_ the specified services."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:282
msgid ""
"`BEFORE`: Lists services which depend on this service. The script containing "
"this key word will run _before_ the specified services."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:284
msgid ""
"By carefully setting these keywords for each startup script, an "
"administrator has a fine-grained level of control of the startup order of "
"the scripts, without the need for \"runlevels\" used by some UNIX(R) "
"operating systems."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:286
msgid ""
"Additional information can be found in man:rc[8] and man:rc.subr[8]. Refer "
"to link:{rc-scripting}[this article] for instructions on how to create "
"custom man:rc[8] scripts."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:288
#, no-wrap
msgid "Managing System-Specific Configuration"
msgstr "管理系统特定的设定"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:291
#, fuzzy
msgid ""
"The principal location for system configuration information is "
"[.filename]#/etc/rc.conf#. This file contains a wide range of configuration "
"information and it is read at system startup to configure the system. It "
"provides the configuration information for the [.filename]#rc*# files."
msgstr ""
"系统设定信息的主要位于<filename>/etc/rc.conf</filename>，这个文件的设定信息范围非常广且会在系统启动时读取来设定系统，它也"
"提供设定信息给<filename>rc*</filename>文件使用。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:293
msgid ""
"The entries in [.filename]#/etc/rc.conf# override the default settings in "
"[.filename]#/etc/defaults/rc.conf#. The file containing the default settings "
"should not be edited. Instead, all system-specific changes should be made to "
"[.filename]#/etc/rc.conf#."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:295
#, fuzzy
msgid ""
"A number of strategies may be applied in clustered applications to separate "
"site-wide configuration from system-specific configuration in order to "
"reduce administration overhead. The recommended approach is to place "
"system-specific configuration into [.filename]#/etc/rc.conf.local#. For "
"example, these entries in [.filename]#/etc/rc.conf# apply to all systems:"
msgstr ""
"在丛集应用时要将系统特定的设定与各站特定的设定分开，借此减少管理成本有好几种方法，建议的方法是将系统特定的设定放置在<filename>/etc/rc."
"conf.local</filename>，例如以下将要套用到所有系统的设定项目放在<filename>/etc/rc.conf</filename>："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:301
#, fuzzy, no-wrap
msgid ""
"sshd_enable=\"YES\"\n"
"keyrate=\"fast\"\n"
"defaultrouter=\"10.1.1.254\"\n"
msgstr ""
"sshd_enable=\"YES\"\n"
"keyrate=\"fast\"\n"
"defaultrouter=\"10.1.1.254\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:304
#, fuzzy
msgid ""
"Whereas these entries in [.filename]#/etc/rc.conf.local# apply to this "
"system only:"
msgstr "而只套用到此系统的设定放在<filename>/etc/rc.conf.local</filename>："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:309
#, fuzzy, no-wrap
msgid ""
"hostname=\"node1.example.org\"\n"
"ifconfig_fxp0=\"inet 10.1.1.1/8\"\n"
msgstr ""
"hostname=\"node1.example.org\"\n"
"ifconfig_fxp0=\"inet 10.1.1.1/8\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:312
msgid ""
"Distribute [.filename]#/etc/rc.conf# to every system using an application "
"such as rsync or puppet, while [.filename]#/etc/rc.conf.local# remains "
"unique."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:314
#, fuzzy
msgid ""
"Upgrading the system will not overwrite [.filename]#/etc/rc.conf#, so system "
"configuration information will not be lost."
msgstr "升级系统并不会复写<filename>/etc/rc.conf</filename>，所以系统设定信息不会因此遗失。"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:319
msgid ""
"Both [.filename]#/etc/rc.conf# and [.filename]#/etc/rc.conf.local# are "
"parsed by man:sh[1]. This allows system operators to create complex "
"configuration scenarios. Refer to man:rc.conf[5] for further information on "
"this topic."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/config/_index.adoc:322
#, no-wrap
msgid "Setting Up Network Interface Cards"
msgstr "设定网络界面卡"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:325
msgid ""
"Adding and configuring a network interface card (NIC) is a common task for "
"any FreeBSD administrator."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:326
#, no-wrap
msgid "Locating the Correct Driver"
msgstr "找到正确的驱动程序"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:329
msgid ""
"First, determine the model of the NIC and the chip it uses. FreeBSD supports "
"a wide variety of NICs. Check the Hardware Compatibility List for the "
"FreeBSD release to see if the NIC is supported."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:331
msgid ""
"If the NIC is supported, determine the name of the FreeBSD driver for the "
"NIC. Refer to [.filename]#/usr/src/sys/conf/NOTES# and "
"[.filename]#/usr/src/sys/arch/conf/NOTES# for the list of NIC drivers with "
"some information about the supported chipsets. When in doubt, read the "
"manual page of the driver as it will provide more information about the "
"supported hardware and any known limitations of the driver."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:333
msgid ""
"The drivers for common NICs are already present in the [.filename]#GENERIC# "
"kernel, meaning the NIC should be probed during boot. The system's boot "
"messages can be viewed by typing `more /var/run/dmesg.boot` and using the "
"spacebar to scroll through the text. In this example, two Ethernet NICs "
"using the man:dc[4] driver are present on the system:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:350
#, fuzzy, no-wrap
msgid ""
"dc0: <82c169 PNIC 10/100BaseTX> port 0xa000-0xa0ff mem 0xd3800000-0xd38\n"
"000ff irq 15 at device 11.0 on pci0\n"
"miibus0: <MII bus> on dc0\n"
"bmtphy0: <BCM5201 10/100baseTX PHY> PHY 1 on miibus0\n"
"bmtphy0:  10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto\n"
"dc0: Ethernet address: 00:a0:cc:da:da:da\n"
"dc0: [ITHREAD]\n"
"dc1: <82c169 PNIC 10/100BaseTX> port 0x9800-0x98ff mem 0xd3000000-0xd30\n"
"000ff irq 11 at device 12.0 on pci0\n"
"miibus1: <MII bus> on dc1\n"
"bmtphy1: <BCM5201 10/100baseTX PHY> PHY 1 on miibus1\n"
"bmtphy1:  10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto\n"
"dc1: Ethernet address: 00:a0:cc:da:da:db\n"
"dc1: [ITHREAD]\n"
msgstr ""
"dc0: &lt;82c169 PNIC 10/100BaseTX&gt; port 0xa000-0xa0ff mem 0xd3800000-"
"0xd38\n"
"000ff irq 15 at device 11.0 on pci0\n"
"miibus0: &lt;MII bus&gt; on dc0\n"
"bmtphy0: &lt;BCM5201 10/100baseTX PHY&gt; PHY 1 on miibus0\n"
"bmtphy0:  10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto\n"
"dc0: Ethernet address: 00:a0:cc:da:da:da\n"
"dc0: [ITHREAD]\n"
"dc1: &lt;82c169 PNIC 10/100BaseTX&gt; port 0x9800-0x98ff mem 0xd3000000-"
"0xd30\n"
"000ff irq 11 at device 12.0 on pci0\n"
"miibus1: &lt;MII bus&gt; on dc1\n"
"bmtphy1: &lt;BCM5201 10/100baseTX PHY&gt; PHY 1 on miibus1\n"
"bmtphy1:  10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto\n"
"dc1: Ethernet address: 00:a0:cc:da:da:db\n"
"dc1: [ITHREAD]\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:353
msgid ""
"If the driver for the NIC is not present in [.filename]#GENERIC#, but a "
"driver is available, the driver will need to be loaded before the NIC can be "
"configured and used. This may be accomplished in one of two ways:"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:355
msgid ""
"The easiest way is to load a kernel module for the NIC using "
"man:kldload[8]. To also automatically load the driver at boot time, add the "
"appropriate line to [.filename]#/boot/loader.conf#. Not all NIC drivers are "
"available as modules."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:356
msgid ""
"Alternatively, statically compile support for the NIC into a custom "
"kernel. Refer to [.filename]#/usr/src/sys/conf/NOTES#, "
"[.filename]#/usr/src/sys/arch/conf/NOTES# and the manual page of the driver "
"to determine which line to add to the custom kernel configuration file. For "
"more information about recompiling the kernel, refer to "
"crossref:kernelconfig[kernelconfig,Configuring the FreeBSD Kernel]. If the "
"NIC was detected at boot, the kernel does not need to be recompiled."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:358
#, no-wrap
msgid "Using Windows(R) NDIS Drivers"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:361
#, fuzzy
msgid ""
"Unfortunately, there are still many vendors that do not provide schematics "
"for their drivers to the open source community because they regard such "
"information as trade secrets. Consequently, the developers of FreeBSD and "
"other operating systems are left with two choices: develop the drivers by a "
"long and pain-staking process of reverse engineering or using the existing "
"driver binaries available for Microsoft(R) Windows(R) platforms."
msgstr ""
"很不幸的，仍有很多供应商并没有提供它们驱动程序的技术文件给开源社群，因为这些文件涉及商业机密。因此，FreeBSD及其他操作系统的开发人员只剩下两种方案可"
"以选择：通过长期艰苦的做逆向工程来开发驱动程序或是使用现有供<trademark class=\"registered\">Microsoft</"
"trademark> <trademark class=\"registered\">Windows</trademark>平台用的二进制驱动程序。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:363
msgid ""
"FreeBSD provides \"native\" support for the Network Driver Interface "
"Specification (NDIS). It includes man:ndisgen[8] which can be used to "
"convert a Windows(R) XP driver into a format that can be used on FreeBSD. As "
"the man:ndis[4] driver uses a Windows(R) XP binary, it only runs on i386(TM) "
"and amd64 systems. PCI, CardBus, PCMCIA, and USB devices are supported."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:365
msgid "To use man:ndisgen[8], three things are needed:"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:367
msgid "FreeBSD kernel sources."
msgstr "FreeBSD核心源码。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:368
msgid "A Windows(R) XP driver binary with a [.filename]#.SYS# extension."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:369
msgid ""
"A Windows(R) XP driver configuration file with a [.filename]#.INF# "
"extension."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:371
msgid ""
"Download the [.filename]#.SYS# and [.filename]#.INF# files for the specific "
"NIC. Generally, these can be found on the driver CD or at the vendor's "
"website. The following examples use [.filename]#W32DRIVER.SYS# and "
"[.filename]#W32DRIVER.INF#."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:373
msgid ""
"The driver bit width must match the version of FreeBSD. For FreeBSD/i386, "
"use a Windows(R) 32-bit driver. For FreeBSD/amd64, a Windows(R) 64-bit "
"driver is needed."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:375
msgid ""
"The next step is to compile the driver binary into a loadable kernel "
"module. As `root`, use man:ndisgen[8]:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:379
#, no-wrap
msgid "# ndisgen /path/to/W32DRIVER.INF /path/to/W32DRIVER.SYS\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:382
msgid ""
"This command is interactive and prompts for any extra information it "
"requires. A new kernel module will be generated in the current "
"directory. Use man:kldload[8] to load the new module:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:386
#, no-wrap
msgid "# kldload ./W32DRIVER_SYS.ko\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:389
msgid ""
"In addition to the generated kernel module, the [.filename]#ndis.ko# and "
"[.filename]#if_ndis.ko# modules must be loaded. This should happen "
"automatically when any module that depends on man:ndis[4] is loaded. If not, "
"load them manually, using the following commands:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:394
#, no-wrap
msgid ""
"# kldload ndis\n"
"# kldload if_ndis\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:397
msgid ""
"The first command loads the man:ndis[4] miniport driver wrapper and the "
"second loads the generated NIC driver."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:399
msgid ""
"Check man:dmesg[8] to see if there were any load errors. If all went well, "
"the output should be similar to the following:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:407
#, fuzzy, no-wrap
msgid ""
"ndis0: <Wireless-G PCI Adapter> mem 0xf4100000-0xf4101fff irq 3 at device "
"8.0 on pci1\n"
"ndis0: NDIS API version: 5.0\n"
"ndis0: Ethernet address: 0a:b1:2c:d3:4e:f5\n"
"ndis0: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps\n"
"ndis0: 11g rates: 6Mbps 9Mbps 12Mbps 18Mbps 36Mbps 48Mbps 54Mbps\n"
msgstr ""
"ndis0: &lt;Wireless-G PCI Adapter&gt; mem 0xf4100000-0xf4101fff irq 3 at "
"device 8.0 on pci1\n"
"ndis0: NDIS API version: 5.0\n"
"ndis0: Ethernet address: 0a:b1:2c:d3:4e:f5\n"
"ndis0: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps\n"
"ndis0: 11g rates: 6Mbps 9Mbps 12Mbps 18Mbps 36Mbps 48Mbps 54Mbps\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:410
msgid "From here, [.filename]#ndis0# can be configured like any other NIC."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:412
msgid ""
"To configure the system to load the man:ndis[4] modules at boot time, copy "
"the generated module, [.filename]#W32DRIVER_SYS.ko#, to "
"[.filename]#/boot/modules#. Then, add the following line to "
"[.filename]#/boot/loader.conf#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:416
#, fuzzy, no-wrap
msgid "W32DRIVER_SYS_load=\"YES\"\n"
msgstr "W32DRIVER_SYS_load=\"YES\"\n"

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:418
#, no-wrap
msgid "Configuring the Network Card"
msgstr "设定网络卡"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:421
msgid ""
"Once the right driver is loaded for the NIC, the card needs to be "
"configured. It may have been configured at installation time by "
"man:bsdinstall[8]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:423
msgid "To display the NIC configuration, enter the following command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:445
#, no-wrap
msgid ""
"% ifconfig\n"
"dc0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> metric 0 mtu 1500\n"
"        options=80008<VLAN_MTU,LINKSTATE>\n"
"        ether 00:a0:cc:da:da:da\n"
"        inet 192.168.1.3 netmask 0xffffff00 broadcast 192.168.1.255\n"
"        media: Ethernet autoselect (100baseTX <full-duplex>)\n"
"        status: active\n"
"dc1: flags=8802<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> metric 0 mtu 1500\n"
"        options=80008<VLAN_MTU,LINKSTATE>\n"
"        ether 00:a0:cc:da:da:db\n"
"        inet 10.0.0.1 netmask 0xffffff00 broadcast 10.0.0.255\n"
"        media: Ethernet 10baseT/UTP\n"
"        status: no carrier\n"
"lo0: flags=8049<UP,LOOPBACK,RUNNING,MULTICAST> metric 0 mtu 16384\n"
"        options=3<RXCSUM,TXCSUM>\n"
"        inet6 fe80::1%lo0 prefixlen 64 scopeid 0x4\n"
"        inet6 ::1 prefixlen 128\n"
"        inet 127.0.0.1 netmask 0xff000000\n"
"        nd6 options=3<PERFORMNUD,ACCEPT_RTADV>\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:448
msgid "In this example, the following devices were displayed:"
msgstr "在这个例子中列出了以下装置："

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:450
msgid "[.filename]#dc0#: The first Ethernet interface."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:451
msgid "[.filename]#dc1#: The second Ethernet interface."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:452
msgid "[.filename]#lo0#: The loopback device."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:454
msgid ""
"FreeBSD uses the driver name followed by the order in which the card is "
"detected at boot to name the NIC. For example, [.filename]#sis2# is the "
"third NIC on the system using the man:sis[4] driver."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:456
#, fuzzy
msgid "In this example, [.filename]#dc0# is up and running. The key indicators are:"
msgstr "在此例中，<filename>dc0</filename>已经上线并且执行中。主要的依据有："

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:458
msgid "`UP` means that the card is configured and ready."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:459
msgid "The card has an Internet (`inet`) address, `192.168.1.3`."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:460
msgid ""
"It has a valid subnet mask (`netmask`), where `0xffffff00` is the same as "
"`255.255.255.0`."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:461
msgid "It has a valid broadcast address, `192.168.1.255`."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:462
msgid "The MAC address of the card (`ether`) is `00:a0:cc:da:da:da`."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:463
msgid ""
"The physical media selection is on autoselection mode (`media: Ethernet "
"autoselect (100baseTX <full-duplex>)`). In this example, [.filename]#dc1# is "
"configured to run with `10baseT/UTP` media. For more information on "
"available media types for a driver, refer to its manual page."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:464
msgid ""
"The status of the link (`status`) is `active`, indicating that the carrier "
"signal is detected. For [.filename]#dc1#, the `status: no carrier` status is "
"normal when an Ethernet cable is not plugged into the card."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:466
msgid "If the man:ifconfig[8] output had shown something similar to:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:474
#, fuzzy, no-wrap
msgid ""
"dc0: flags=8843<BROADCAST,SIMPLEX,MULTICAST> metric 0 mtu 1500\n"
"\toptions=80008<VLAN_MTU,LINKSTATE>\n"
"\tether 00:a0:cc:da:da:da\n"
"\tmedia: Ethernet autoselect (100baseTX <full-duplex>)\n"
"\tstatus: active\n"
msgstr ""
"dc0: flags=8843&lt;BROADCAST,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500\n"
"\toptions=80008&lt;VLAN_MTU,LINKSTATE&gt;\n"
"\tether 00:a0:cc:da:da:da\n"
"\tmedia: Ethernet autoselect (100baseTX &lt;full-duplex&gt;)\n"
"\tstatus: active\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:477
msgid "it would indicate the card has not been configured."
msgstr "则代表尚未设定界面卡。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:479
msgid ""
"The card must be configured as `root`. The NIC configuration can be "
"performed from the command line with man:ifconfig[8] but will not persist "
"after a reboot unless the configuration is also added to "
"[.filename]#/etc/rc.conf#. If a DHCP server is present on the LAN, just add "
"this line:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:483
#, fuzzy, no-wrap
msgid "ifconfig_dc0=\"DHCP\"\n"
msgstr "ifconfig_dc0=\"DHCP\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:486
msgid "Replace _dc0_ with the correct value for the system."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:488
msgid ""
"The line added, then, follow the instructions given in "
"<<config-network-testing>>."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:492
msgid ""
"If the network was configured during installation, some entries for the "
"NIC(s) may be already present. Double check [.filename]#/etc/rc.conf# before "
"adding any lines."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:495
msgid ""
"If there is no DHCP server, the NIC(s) must be configured manually. Add a "
"line for each NIC present on the system, as seen in this example:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:500
#, fuzzy, no-wrap
msgid ""
"ifconfig_dc0=\"inet 192.168.1.3 netmask 255.255.255.0\"\n"
"ifconfig_dc1=\"inet 10.0.0.1 netmask 255.255.255.0 media 10baseT/UTP\"\n"
msgstr ""
"ifconfig_dc0=\"inet 192.168.1.3 netmask 255.255.255.0\"\n"
"ifconfig_dc1=\"inet 10.0.0.1 netmask 255.255.255.0 media 10baseT/UTP\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:503
msgid ""
"Replace [.filename]#dc0# and [.filename]#dc1# and the IP address information "
"with the correct values for the system. Refer to the man page for the "
"driver, man:ifconfig[8], and man:rc.conf[5] for more details about the "
"allowed options and the syntax of [.filename]#/etc/rc.conf#."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:505
msgid ""
"If the network is not using DNS, edit [.filename]#/etc/hosts# to add the "
"names and IP addresses of the hosts on the LAN, if they are not already "
"there. For more information, refer to man:hosts[5] and to "
"[.filename]#/usr/share/examples/etc/hosts#."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:509
msgid ""
"If there is no DHCP server and access to the Internet is needed, manually "
"configure the default gateway and the nameserver:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:514
#, no-wrap
msgid ""
"# echo 'defaultrouter=\"your_default_router\"' >> /etc/rc.conf\n"
"# echo 'nameserver your_DNS_server' >> /etc/resolv.conf\n"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:519
#, no-wrap
msgid "Testing and Troubleshooting"
msgstr "测试和故障排除"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:522
#, fuzzy
msgid ""
"Once the necessary changes to [.filename]#/etc/rc.conf# are saved, a reboot "
"can be used to test the network configuration and to verify that the system "
"restarts without any configuration errors. Alternatively, apply the settings "
"to the networking system with this command:"
msgstr ""
"必要的变更储存到<filename>/etc/rc."
"conf</filename>之后，需要重新启动系统来测试网络设定并检查系统重新启动是否没有任何设定错误。或者使用这个指令将设定套用到网络系统："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:526
#, no-wrap
msgid "# service netif restart\n"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:531
#, fuzzy
msgid ""
"If a default gateway has been set in [.filename]#/etc/rc.conf#, also issue "
"this command:"
msgstr "若预设的通信闸已设定于<filename>/etc/rc.conf</filename>也同样要下这个指令："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:535
#, no-wrap
msgid "# service routing restart\n"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:540
msgid "Once the networking system has been relaunched, test the NICs."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:541
#, no-wrap
msgid "Testing the Ethernet Card"
msgstr "测试以太网卡"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:544
msgid ""
"To verify that an Ethernet card is configured correctly, man:ping[8] the "
"interface itself, and then man:ping[8] another machine on the LAN:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:554
#, no-wrap
msgid ""
"% ping -c5 192.168.1.3\n"
"PING 192.168.1.3 (192.168.1.3): 56 data bytes\n"
"64 bytes from 192.168.1.3: icmp_seq=0 ttl=64 time=0.082 ms\n"
"64 bytes from 192.168.1.3: icmp_seq=1 ttl=64 time=0.074 ms\n"
"64 bytes from 192.168.1.3: icmp_seq=2 ttl=64 time=0.076 ms\n"
"64 bytes from 192.168.1.3: icmp_seq=3 ttl=64 time=0.108 ms\n"
"64 bytes from 192.168.1.3: icmp_seq=4 ttl=64 time=0.076 ms\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:558
#, no-wrap
msgid ""
"--- 192.168.1.3 ping statistics ---\n"
"5 packets transmitted, 5 packets received, 0% packet loss\n"
"round-trip min/avg/max/stddev = 0.074/0.083/0.108/0.013 ms\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:569
#, no-wrap
msgid ""
"% ping -c5 192.168.1.2\n"
"PING 192.168.1.2 (192.168.1.2): 56 data bytes\n"
"64 bytes from 192.168.1.2: icmp_seq=0 ttl=64 time=0.726 ms\n"
"64 bytes from 192.168.1.2: icmp_seq=1 ttl=64 time=0.766 ms\n"
"64 bytes from 192.168.1.2: icmp_seq=2 ttl=64 time=0.700 ms\n"
"64 bytes from 192.168.1.2: icmp_seq=3 ttl=64 time=0.747 ms\n"
"64 bytes from 192.168.1.2: icmp_seq=4 ttl=64 time=0.704 ms\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:573
#, no-wrap
msgid ""
"--- 192.168.1.2 ping statistics ---\n"
"5 packets transmitted, 5 packets received, 0% packet loss\n"
"round-trip min/avg/max/stddev = 0.700/0.729/0.766/0.025 ms\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:576
msgid ""
"To test network resolution, use the host name instead of the IP address. If "
"there is no DNS server on the network, [.filename]#/etc/hosts# must first be "
"configured. To this purpose, edit [.filename]#/etc/hosts# to add the names "
"and IP addresses of the hosts on the LAN, if they are not already there. For "
"more information, refer to man:hosts[5] and to "
"[.filename]#/usr/share/examples/etc/hosts#."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:577
#, no-wrap
msgid "Troubleshooting"
msgstr "故障排除"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:580
#, fuzzy
msgid ""
"When troubleshooting hardware and software configurations, check the simple "
"things first. Is the network cable plugged in? Are the network services "
"properly configured? Is the firewall configured correctly? Is the NIC "
"supported by FreeBSD? Before sending a bug report, always check the Hardware "
"Notes, update the version of FreeBSD to the latest STABLE version, check the "
"mailing list archives, and search the Internet."
msgstr ""
"在排除硬件及软件设定问题时，要先检查几件简单的事。网路线插上了没？网络的服务都正确设定了吗？防火墙设定是否正确？FreeBSD是否支持该<acronym>"
"NIC</acronym>？在回报问题之前，永远要先检查Hardware "
"Notes、更新FreeBSD到最新的STABLE版本、检查邮递论坛封存记录以及上网查询。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:582
msgid ""
"If the card works, yet performance is poor, read through "
"man:tuning[7]. Also, check the network configuration as incorrect network "
"settings can cause slow connections."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:584
#, fuzzy
msgid ""
"Some users experience one or two `device timeout` messages, which is normal "
"for some cards. If they continue, or are bothersome, determine if the device "
"is conflicting with another device. Double check the cable "
"connections. Consider trying another card."
msgstr ""
"部份使用者会遇到一次或两次<errorname>device timeout</errorname>的信息，在对某些界面卡是正常的。若信息持续发生或很烦的"
"，请确认是否有与其他的装置冲突，再次检查网路线，或考虑使用其他介面卡。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:586
msgid ""
"To resolve `watchdog timeout` errors, first check the network cable. Many "
"cards require a PCI slot which supports bus mastering. On some old "
"motherboards, only one PCI slot allows it, usually slot 0. Check the NIC and "
"the motherboard documentation to determine if that may be the problem."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:588
msgid ""
"`No route to host` messages occur if the system is unable to route a packet "
"to the destination host. This can happen if no default route is specified or "
"if a cable is unplugged. Check the output of `netstat -rn` and make sure "
"there is a valid route to the host. If there is not, read "
"crossref:advanced-networking[network-routing,“Gateways and Routes”]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:590
msgid ""
"`ping: sendto: Permission denied` error messages are often caused by a "
"misconfigured firewall. If a firewall is enabled on FreeBSD but no rules "
"have been defined, the default policy is to deny all traffic, even "
"man:ping[8]. Refer to crossref:firewalls[firewalls,Firewalls] for more "
"information."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:592
msgid ""
"Sometimes performance of the card is poor or below average. In these cases, "
"try setting the media selection mode from `autoselect` to the correct media "
"selection. While this works for most hardware, it may or may not resolve the "
"issue. Again, check all the network settings, and refer to man:tuning[7]."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/config/_index.adoc:594
#, no-wrap
msgid "Virtual Hosts"
msgstr "虚拟主机"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:597
msgid ""
"A common use of FreeBSD is virtual site hosting, where one server appears to "
"the network as many servers. This is achieved by assigning multiple network "
"addresses to a single interface."
msgstr "FreeBSD最常见的用途之一就是虚拟网站代管，即以一台服务器在网路上扮演多台服务器，这可以透过指定多个网络位置到一个网络界面来做到。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:599
msgid ""
"A given network interface has one \"real\" address, and may have any number "
"of \"alias\" addresses. These aliases are normally added by placing alias "
"entries in [.filename]#/etc/rc.conf#, as seen in this example:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:603
#, fuzzy, no-wrap
msgid "ifconfig_fxp0_alias0=\"inet xxx.xxx.xxx.xxx netmask xxx.xxx.xxx.xxx\"\n"
msgstr "ifconfig_fxp0_alias0=\"inet xxx.xxx.xxx.xxx netmask xxx.xxx.xxx.xxx\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:606
msgid ""
"Alias entries must start with `alias__0__` using a sequential number such as "
"`alias0`, `alias1`, and so on. The configuration process will stop at the "
"first missing number."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:608
msgid ""
"The calculation of alias netmasks is important. For a given interface, there "
"must be one address which correctly represents the network's netmask. Any "
"other addresses which fall within this network must have a netmask of all "
"``1``s, expressed as either `255.255.255.255` or `0xffffffff`."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:610
msgid ""
"For example, consider the case where the [.filename]#fxp0# interface is "
"connected to two networks: `10.1.1.0` with a netmask of `255.255.255.0` and "
"`202.0.75.16` with a netmask of `255.255.255.240`. The system is to be "
"configured to appear in the ranges `10.1.1.1` through `10.1.1.5` and "
"`202.0.75.17` through `202.0.75.20`. Only the first address in a given "
"network range should have a real netmask. All the rest (`10.1.1.2` through "
"`10.1.1.5` and `202.0.75.18` through `202.0.75.20`) must be configured with "
"a netmask of `255.255.255.255`."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:612
#, fuzzy
msgid ""
"The following [.filename]#/etc/rc.conf# entries configure the adapter "
"correctly for this scenario:"
msgstr "在此情境下正确设定网络界面的方式如下<filename>/etc/rc.conf</filename>中的项目："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:624
#, fuzzy, no-wrap
msgid ""
"ifconfig_fxp0=\"inet 10.1.1.1 netmask 255.255.255.0\"\n"
"ifconfig_fxp0_alias0=\"inet 10.1.1.2 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias1=\"inet 10.1.1.3 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias2=\"inet 10.1.1.4 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias3=\"inet 10.1.1.5 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias4=\"inet 202.0.75.17 netmask 255.255.255.240\"\n"
"ifconfig_fxp0_alias5=\"inet 202.0.75.18 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias6=\"inet 202.0.75.19 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias7=\"inet 202.0.75.20 netmask 255.255.255.255\"\n"
msgstr ""
"ifconfig_fxp0=\"inet 10.1.1.1 netmask 255.255.255.0\"\n"
"ifconfig_fxp0_alias0=\"inet 10.1.1.2 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias1=\"inet 10.1.1.3 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias2=\"inet 10.1.1.4 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias3=\"inet 10.1.1.5 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias4=\"inet 202.0.75.17 netmask 255.255.255.240\"\n"
"ifconfig_fxp0_alias5=\"inet 202.0.75.18 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias6=\"inet 202.0.75.19 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias7=\"inet 202.0.75.20 netmask 255.255.255.255\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:627
msgid ""
"A simpler way to express this is with a space-separated list of IP address "
"ranges. The first address will be given the indicated subnet mask and the "
"additional addresses will have a subnet mask of `255.255.255.255`."
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:631
#, fuzzy, no-wrap
msgid "ifconfig_fxp0_aliases=\"inet 10.1.1.1-5/24 inet 202.0.75.17-20/28\"\n"
msgstr "ifconfig_fxp0_aliases=\"inet 10.1.1.1-5/24 inet 202.0.75.17-20/28\"\n"

#. type: Title ==
#: documentation/content/en/books/handbook/config/_index.adoc:634
#, no-wrap
msgid "Configuring System Logging"
msgstr "设定系统日志"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:637
msgid ""
"Generating and reading system logs is an important aspect of system "
"administration. The information in system logs can be used to detect "
"hardware and software issues as well as application and system configuration "
"errors. This information also plays an important role in security auditing "
"and incident response. Most system daemons and applications will generate "
"log entries."
msgstr ""
"产生与读取系统日志对系统管理来说是一件非常重要的事，在系统日志中的信息可以用来侦测硬件与软件的问题，同样也可以侦测应用程序与系统设定的错误。这些信息在安全"
"性稽查与事件响应也同样扮演了重要的角色，大多数系统Daemon与应用程序都会产生日志项目。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:639
msgid ""
"FreeBSD provides a system logger, syslogd, to manage logging. By default, "
"syslogd is started when the system boots. This is controlled by the variable "
"`syslogd_enable` in [.filename]#/etc/rc.conf#. There are numerous "
"application arguments that can be set using `syslogd_flags` in "
"[.filename]#/etc/rc.conf#. Refer to man:syslogd[8] for more information on "
"the available arguments."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:641
msgid ""
"This section describes how to configure the FreeBSD system logger for both "
"local and remote logging and how to perform log rotation and log management."
msgstr "此章节会介绍如何设定FreeBSD系统日志程序来做本地与远端日志并且介绍如何执行日志翻转（Log rotation）与日志管理。"

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:642
#, no-wrap
msgid "Configuring Local Logging"
msgstr "设定本地日志"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:645
msgid ""
"The configuration file, [.filename]#/etc/syslog.conf#, controls what syslogd "
"does with log entries as they are received. There are several parameters to "
"control the handling of incoming events. The _facility_ describes which "
"subsystem generated the message, such as the kernel or a daemon, and the "
"_level_ describes the severity of the event that occurred. This makes it "
"possible to configure if and where a log message is logged, depending on the "
"facility and level. It is also possible to take action depending on the "
"application that sent the message, and in the case of remote logging, the "
"hostname of the machine generating the logging event."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:647
#, fuzzy
msgid ""
"This configuration file contains one line per action, where the syntax for "
"each line is a selector field followed by an action field. The syntax of the "
"selector field is _facility.level_ which will match log messages from "
"_facility_ at level _level_ or higher. It is also possible to add an "
"optional comparison flag before the level to specify more precisely what is "
"logged. Multiple selector fields can be used for the same action, and are "
"separated with a semicolon (`;`). Using `*` will match everything. The "
"action field denotes where to send the log message, such as to a file or "
"remote log host. As an example, here is the default [.filename]#syslog.conf# "
"from FreeBSD:"
msgstr ""
"此配置文件中一行代表一个动作，每一行的格式皆为一个选择器字段（Selector field）接着一个动作字段（Action "
"field）。选择器字段的格式为<replaceable>facility.level</replaceable>可以用来比对来自<replaceable"
">facility</replaceable>于层级<replaceable>level</replaceable>或更高层的日志信息，也可以在层级前加入"
"选择性的比对旗标来更确切的指定记录的内容。同样一个动作可以使用多个选择器字段并使用分号（<literal>；</literal>）来分隔。用<litera"
"l>*</literal>可以比对任何东西。动作字段可用来指定传送日志信息的目标，如一个文件或远端日志主机。示例为以下为FreeBSD预设的<filena"
"me>syslog.conf</filename>："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:685
#, fuzzy, no-wrap
msgid ""
"# $FreeBSD$\n"
"#\n"
"#       Spaces ARE valid field separators in this file. However,\n"
"#       other *nix-like systems still insist on using tabs as field\n"
"#       separators. If you are sharing this file between systems, you\n"
"#       may want to use only tabs as field separators here.\n"
"#       Consult the syslog.conf(5) manpage.\n"
"*.err;kern.warning;auth.notice;mail.crit                /dev/console\n"
"*.notice;authpriv.none;kern.debug;lpr.info;mail.crit;news.err   "
"/var/log/messages\n"
"security.*                                      /var/log/security\n"
"auth.info;authpriv.info                         /var/log/auth.log\n"
"mail.info                                       /var/log/maillog\n"
"lpr.info                                        /var/log/lpd-errs\n"
"ftp.info                                        /var/log/xferlog\n"
"cron.*                                          /var/log/cron\n"
"!-devd\n"
"*.=debug                                        /var/log/debug.log\n"
"*.emerg                                         *\n"
"# uncomment this to log all writes to /dev/console to /var/log/console.log\n"
"#console.info                                   /var/log/console.log\n"
"# uncomment this to enable logging of all log messages to /var/log/all.log\n"
"# touch /var/log/all.log and chmod it to mode 600 before it will work\n"
"#*.*                                            /var/log/all.log\n"
"# uncomment this to enable logging to a remote loghost named loghost\n"
"#*.*                                            @loghost\n"
"# uncomment these if you're running inn\n"
"# news.crit                                     /var/log/news/news.crit\n"
"# news.err                                      /var/log/news/news.err\n"
"# news.notice                                   /var/log/news/news.notice\n"
"# Uncomment this if you wish to see messages produced by devd\n"
"# !devd\n"
"# *.>=info\n"
"!ppp\n"
"*.*                                             /var/log/ppp.log\n"
"!*\n"
msgstr ""
"# <_:phrase-1/>\n"
"#\n"
"#       Spaces ARE valid field separators in this file. However,\n"
"#       other *nix-like systems still insist on using tabs as field\n"
"#       separators. If you are sharing this file between systems, you\n"
"#       may want to use only tabs as field separators here.\n"
"#       Consult the syslog.conf(5) manpage.\n"
"*.err;kern.warning;auth.notice;mail.crit                /dev/console\n"
"*.notice;authpriv.none;kern.debug;lpr.info;mail.crit;news.err   /var/log/"
"messages\n"
"security.*                                      /var/log/security\n"
"auth.info;authpriv.info                         /var/log/auth.log\n"
"mail.info                                       /var/log/maillog\n"
"lpr.info                                        /var/log/lpd-errs\n"
"ftp.info                                        /var/log/xferlog\n"
"cron.*                                          /var/log/cron\n"
"!-devd\n"
"*.=debug                                        /var/log/debug.log\n"
"*.emerg                                         *\n"
"# uncomment this to log all writes to /dev/console to /var/log/console.log\n"
"#console.info                                   /var/log/console.log\n"
"# uncomment this to enable logging of all log messages to /var/log/all.log\n"
"# touch /var/log/all.log and chmod it to mode 600 before it will work\n"
"#*.*                                            /var/log/all.log\n"
"# uncomment this to enable logging to a remote loghost named loghost\n"
"#*.*                                            @loghost\n"
"# uncomment these if you're running inn\n"
"# news.crit                                     /var/log/news/news.crit\n"
"# news.err                                      /var/log/news/news.err\n"
"# news.notice                                   /var/log/news/news.notice\n"
"# Uncomment this if you wish to see messages produced by devd\n"
"# !devd\n"
"# *.&gt;=info\n"
"!ppp\n"
"*.*                                             /var/log/ppp.log\n"
"!*\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:688
msgid "In this example:"
msgstr "在这个示例中："

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:690
msgid ""
"Line 8 matches all messages with a level of `err` or higher, as well as "
"`kern.warning`, `auth.notice` and `mail.crit`, and sends these log messages "
"to the console ([.filename]#/dev/console#)."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:691
msgid ""
"Line 12 matches all messages from the `mail` facility at level `info` or "
"above and logs the messages to [.filename]#/var/log/maillog#."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:692
msgid ""
"Line 17 uses a comparison flag (`=`) to only match messages at level `debug` "
"and logs them to [.filename]#/var/log/debug.log#."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:693
msgid ""
"Line 33 is an example usage of a program specification. This makes the rules "
"following it only valid for the specified program. In this case, only the "
"messages generated by ppp are logged to [.filename]#/var/log/ppp.log#."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:695
msgid ""
"The available levels, in order from most to least critical are `emerg`, "
"`alert`, `crit`, `err`, `warning`, `notice`, `info`, and `debug`."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:697
msgid ""
"The facilities, in no particular order, are `auth`, `authpriv`, `console`, "
"`cron`, `daemon`, `ftp`, `kern`, `lpr`, `mail`, `mark`, `news`, `security`, "
"`syslog`, `user`, `uucp`, and `local0` through `local7`. Be aware that other "
"operating systems might have different facilities."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:699
msgid ""
"To log everything of level `notice` and higher to "
"[.filename]#/var/log/daemon.log#, add the following entry:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:703
#, fuzzy, no-wrap
msgid "daemon.notice                                        /var/log/daemon.log\n"
msgstr ""
"daemon.notice                                        /var/log/daemon.log\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:706
msgid ""
"For more information about the different levels and facilities, refer to "
"man:syslog[3] and man:syslogd[8]. For more information about "
"[.filename]#/etc/syslog.conf#, its syntax, and more advanced usage examples, "
"see man:syslog.conf[5]."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:707
#, no-wrap
msgid "Log Management and Rotation"
msgstr "日志管理与翻转"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:710
msgid ""
"Log files can grow quickly, taking up disk space and making it more "
"difficult to locate useful information. Log management attempts to mitigate "
"this. In FreeBSD, newsyslog is used to manage log files. This built-in "
"program periodically rotates and compresses log files, and optionally "
"creates missing log files and signals programs when log files are moved. The "
"log files may be generated by syslogd or by any other program which "
"generates log files. While newsyslog is normally run from man:cron[8], it is "
"not a system daemon. In the default configuration, it runs every hour."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:712
msgid ""
"To know which actions to take, newsyslog reads its configuration file, "
"[.filename]#/etc/newsyslog.conf#. This file contains one line for each log "
"file that newsyslog manages. Each line states the file owner, permissions, "
"when to rotate that file, optional flags that affect log rotation, such as "
"compression, and programs to signal when the log is rotated. Here is the "
"default configuration in FreeBSD:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:754
#, fuzzy, no-wrap
msgid ""
"# configuration file for newsyslog\n"
"# $FreeBSD$\n"
"#\n"
"# Entries which do not specify the '/pid_file' field will cause the\n"
"# syslogd process to be signalled when that log file is rotated.  This\n"
"# action is only appropriate for log files which are written to by the\n"
"# syslogd process (ie, files listed in /etc/syslog.conf).  If there\n"
"# is no process which needs to be signalled when a given log file is\n"
"# rotated, then the entry for that file should include the 'N' flag.\n"
"#\n"
"# The 'flags' field is one or more of the letters: BCDGJNUXZ or a '-'.\n"
"#\n"
"# Note: some sites will want to select more restrictive protections than "
"the\n"
"# defaults.  In particular, it may be desirable to switch many of the 644\n"
"# entries to 640 or 600.  For example, some sites will consider the\n"
"# contents of maillog, messages, and lpd-errs to be confidential.  In the\n"
"# future, these defaults may change to more conservative ones.\n"
"#\n"
"# logfilename          [owner:group]    mode count size when  flags "
"[/pid_file] [sig_num]\n"
"/var/log/all.log                        600  7     *    @T00  J\n"
"/var/log/amd.log                        644  7     100  *     J\n"
"/var/log/auth.log                       600  7     100  @0101T JC\n"
"/var/log/console.log                    600  5     100  *     J\n"
"/var/log/cron                           600  3     100  *     JC\n"
"/var/log/daily.log                      640  7     *    @T00  JN\n"
"/var/log/debug.log                      600  7     100  *     JC\n"
"/var/log/kerberos.log                   600  7     100  *     J\n"
"/var/log/lpd-errs                       644  7     100  *     JC\n"
"/var/log/maillog                        640  7     *    @T00  JC\n"
"/var/log/messages                       644  5     100  @0101T JC\n"
"/var/log/monthly.log                    640  12    *    $M1D0 JN\n"
"/var/log/pflog                          600  3     100  *     JB    "
"/var/run/pflogd.pid\n"
"/var/log/ppp.log        root:network    640  3     100  *     JC\n"
"/var/log/devd.log                       644  3     100  *     JC\n"
"/var/log/security                       600  10    100  *     JC\n"
"/var/log/sendmail.st                    640  10    *    168   B\n"
"/var/log/utx.log                        644  3     *    @01T05 B\n"
"/var/log/weekly.log                     640  5     1    $W6D0 JN\n"
"/var/log/xferlog                        600  7     100  *     JC\n"
msgstr ""
"# configuration file for newsyslog\n"
"# <_:phrase-1/>\n"
"#\n"
"# Entries which do not specify the '/pid_file' field will cause the\n"
"# syslogd process to be signalled when that log file is rotated.  This\n"
"# action is only appropriate for log files which are written to by the\n"
"# syslogd process (ie, files listed in /etc/syslog.conf).  If there\n"
"# is no process which needs to be signalled when a given log file is\n"
"# rotated, then the entry for that file should include the 'N' flag.\n"
"#\n"
"# The 'flags' field is one or more of the letters: BCDGJNUXZ or a '-'.\n"
"#\n"
"# Note: some sites will want to select more restrictive protections than "
"the\n"
"# defaults.  In particular, it may be desirable to switch many of the 644\n"
"# entries to 640 or 600.  For example, some sites will consider the\n"
"# contents of maillog, messages, and lpd-errs to be confidential.  In the\n"
"# future, these defaults may change to more conservative ones.\n"
"#\n"
"# logfilename          [owner:group]    mode count size when  flags "
"[/pid_file] [sig_num]\n"
"/var/log/all.log                        600  7     *    @T00  J\n"
"/var/log/amd.log                        644  7     100  *     J\n"
"/var/log/auth.log                       600  7     100  @0101T JC\n"
"/var/log/console.log                    600  5     100  *     J\n"
"/var/log/cron                           600  3     100  *     JC\n"
"/var/log/daily.log                      640  7     *    @T00  JN\n"
"/var/log/debug.log                      600  7     100  *     JC\n"
"/var/log/kerberos.log                   600  7     100  *     J\n"
"/var/log/lpd-errs                       644  7     100  *     JC\n"
"/var/log/maillog                        640  7     *    @T00  JC\n"
"/var/log/messages                       644  5     100  @0101T JC\n"
"/var/log/monthly.log                    640  12    *    $M1D0 JN\n"
"/var/log/pflog                          600  3     100  *     JB    /var/run/"
"pflogd.pid\n"
"/var/log/ppp.log        root:network    640  3     100  *     JC\n"
"/var/log/devd.log                       644  3     100  *     JC\n"
"/var/log/security                       600  10    100  *     JC\n"
"/var/log/sendmail.st                    640  10    *    168   B\n"
"/var/log/utx.log                        644  3     *    @01T05 B\n"
"/var/log/weekly.log                     640  5     1    $W6D0 JN\n"
"/var/log/xferlog                        600  7     100  *     JC\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:757
msgid ""
"Each line starts with the name of the log to be rotated, optionally followed "
"by an owner and group for both rotated and newly created files. The `mode` "
"field sets the permissions on the log file and `count` denotes how many "
"rotated log files should be kept. The `size` and `when` fields tell "
"newsyslog when to rotate the file. A log file is rotated when either its "
"size is larger than the `size` field or when the time in the `when` field "
"has passed. An asterisk (`*`) means that this field is ignored. The _flags_ "
"field gives further instructions, such as how to compress the rotated file "
"or to create the log file if it is missing. The last two fields are optional "
"and specify the name of the Process ID (PID) file of a process and a signal "
"number to send to that process when the file is rotated."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:759
msgid ""
"For more information on all fields, valid flags, and how to specify the "
"rotation time, refer to man:newsyslog.conf[5]. Since newsyslog is run from "
"man:cron[8], it cannot rotate files more often than it is scheduled to run "
"from man:cron[8]."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:761
#, no-wrap
msgid "Configuring Remote Logging"
msgstr "设定远端日志"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:764
msgid ""
"Monitoring the log files of multiple hosts can become unwieldy as the number "
"of systems increases. Configuring centralized logging can reduce some of the "
"administrative burden of log file administration."
msgstr ""
"处理系统日志对于系统安全和管理是一个重要方面。 当有多台分布在中型或大型网络的机器，再或者是处于各种不同类型的网络中， "
"监视他们上面的日志文件则显得非常难以操作， 在这种情况下， 配置远程日志记录能使整个处理过程变得更加轻松。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:766
msgid ""
"In FreeBSD, centralized log file aggregation, merging, and rotation can be "
"configured using syslogd and newsyslog. This section demonstrates an example "
"configuration, where host `A`, named `logserv.example.com`, will collect "
"logging information for the local network. Host `B`, named "
"`logclient.example.com`, will be configured to pass logging information to "
"the logging server."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:767
#, no-wrap
msgid "Log Server Configuration"
msgstr "日志服务器设定"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:770
msgid ""
"A log server is a system that has been configured to accept logging "
"information from other hosts. Before configuring a log server, check the "
"following:"
msgstr "日志服务器是接受来自其他主机的日志信息的系统。在配置日志服务器之前，请检查以下内容："

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:772
msgid ""
"If there is a firewall between the logging server and any logging clients, "
"ensure that the firewall ruleset allows UDP port 514 for both the clients "
"and the server."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:773
#, fuzzy
msgid ""
"The logging server and all client machines must have forward and reverse "
"entries in the local DNS. If the network does not have a DNS server, create "
"entries in each system's [.filename]#/etc/hosts#. Proper name resolution is "
"required so that log entries are not rejected by the logging server."
msgstr ""
"日志记录服务器和所有客户端计算机必须具有本地 <acronym> DNS </acronym> 中的正向和反向条目。如果网络没有 <acronym> "
"DNS </acronym> 服务器，请在每个系统的 <filename>/etc/"
"hosts</filename>中创建条目。需要正确的名称解析，以便日志记录服务器不会拒绝日志条目。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:775
msgid ""
"On the log server, edit [.filename]#/etc/syslog.conf# to specify the name of "
"the client to receive log entries from, the logging facility to be used, and "
"the name of the log to store the host's log entries. This example adds the "
"hostname of `B`, logs all facilities, and stores the log entries in "
"[.filename]#/var/log/logclient.log#."
msgstr ""

#. type: Block title
#: documentation/content/en/books/handbook/config/_index.adoc:776
#, no-wrap
msgid "Sample Log Server Configuration"
msgstr "日志服务器设定示例"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:784
#, fuzzy, no-wrap
msgid ""
"+logclient.example.com\n"
"*.*     /var/log/logclient.log\n"
msgstr ""
"+logclient.example.com\n"
"*.*     /var/log/logclient.log\n"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:789
msgid ""
"When adding multiple log clients, add a similar two-line entry for each "
"client. More information about the available facilities may be found in "
"man:syslog.conf[5]."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:791
msgid "Next, configure [.filename]#/etc/rc.conf#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:796
#, fuzzy, no-wrap
msgid ""
"syslogd_enable=\"YES\"\n"
"syslogd_flags=\"-a logclient.example.com -v -v\"\n"
msgstr ""
"syslogd_enable=\"YES\"\n"
"syslogd_flags=\"-a logclient.example.com -v -v\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:799
msgid ""
"The first entry starts syslogd at system boot. The second entry allows log "
"entries from the specified client. The `-v -v` increases the verbosity of "
"logged messages. This is useful for tweaking facilities as administrators "
"are able to see what type of messages are being logged under each facility."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:801
msgid ""
"Multiple `-a` options may be specified to allow logging from multiple "
"clients. IP addresses and whole netblocks may also be specified. Refer to "
"man:syslogd[8] for a full list of possible options."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:803
msgid "Finally, create the log file:"
msgstr "最后，创建日志文件："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:807
#, no-wrap
msgid "# touch /var/log/logclient.log\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:810
msgid "At this point, syslogd should be restarted and verified:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:815
#, no-wrap
msgid ""
"# service syslogd restart\n"
"# pgrep syslog\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:818
msgid ""
"If a PID is returned, the server restarted successfully, and client "
"configuration can begin. If the server did not restart, consult "
"[.filename]#/var/log/messages# for the error."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:819
#, no-wrap
msgid "Log Client Configuration"
msgstr "日志客户端设定"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:822
msgid ""
"A logging client sends log entries to a logging server on the network. The "
"client also keeps a local copy of its own logs."
msgstr "日志客户端是一台发送日志信息到日志服务器的机器， 并在本地保存拷贝。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:824
#, fuzzy
msgid ""
"Once a logging server has been configured, edit [.filename]#/etc/rc.conf# on "
"the logging client:"
msgstr "配置日志记录服务器后, 在日志记录客户端上编辑 <filename>/etc/rc.conf</filename>:"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:829
#, fuzzy, no-wrap
msgid ""
"syslogd_enable=\"YES\"\n"
"syslogd_flags=\"-s -v -v\"\n"
msgstr ""
"syslogd_enable=\"YES\"\n"
"syslogd_flags=\"-s -v -v\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:832
msgid ""
"The first entry enables syslogd on boot up. The second entry prevents logs "
"from being accepted by this client from other hosts (`-s`) and increases the "
"verbosity of logged messages."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:834
#, fuzzy
msgid ""
"Next, define the logging server in the client's "
"[.filename]#/etc/syslog.conf#. In this example, all logged facilities are "
"sent to a remote system, denoted by the `@` symbol, with the specified "
"hostname:"
msgstr ""
"日志服务器必须在客户端的 <filename>/etc/syslog.conf</filename> 中指明。 在此例中， <literal>@</"
"literal> 符号被用来表示发送日志数据到远程的服务器， 看上去差不多如下这样："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:838
#, fuzzy, no-wrap
msgid "*.*\t\t@logserv.example.com\n"
msgstr "*.*\t\t@logserv.example.com\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:841
msgid "After saving the edit, restart syslogd for the changes to take effect:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:845
#: documentation/content/en/books/handbook/config/_index.adoc:870
#, no-wrap
msgid "# service syslogd restart\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:848
msgid ""
"To test that log messages are being sent across the network, use "
"man:logger[1] on the client to send a message to syslogd:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:852
#, no-wrap
msgid "# logger \"Test message from logclient\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:855
#, fuzzy
msgid ""
"This message should now exist both in [.filename]#/var/log/messages# on the "
"client and [.filename]#/var/log/logclient.log# on the log server."
msgstr ""
"这段消息现在应该同时出现在客户机的 <filename>/var/log/messages</filename> 以及日志服务器的 <filename>/"
"var/log/logclient.log</filename> 中。"

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:856
#, no-wrap
msgid "Debugging Log Servers"
msgstr "调试日志服务器"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:859
msgid ""
"If no messages are being received on the log server, the cause is most "
"likely a network connectivity issue, a hostname resolution issue, or a typo "
"in a configuration file. To isolate the cause, ensure that both the logging "
"server and the logging client are able to `ping` each other using the "
"hostname specified in their [.filename]#/etc/rc.conf#. If this fails, check "
"the network cabling, the firewall ruleset, and the hostname entries in the "
"DNS server or [.filename]#/etc/hosts# on both the logging server and "
"clients. Repeat until the `ping` is successful from both hosts."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:861
msgid ""
"If the `ping` succeeds on both hosts but log messages are still not being "
"received, temporarily increase logging verbosity to narrow down the "
"configuration issue. In the following example, "
"[.filename]#/var/log/logclient.log# on the logging server is empty and "
"[.filename]#/var/log/messages# on the logging client does not indicate a "
"reason for the failure. To increase debugging output, edit the "
"`syslogd_flags` entry on the logging server and issue a restart:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:865
#, fuzzy, no-wrap
msgid "syslogd_flags=\"-d -a logclient.example.com -v -v\"\n"
msgstr "syslogd_flags=\"-d -a logclient.example.com -v -v\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:873
msgid ""
"Debugging data similar to the following will flash on the console "
"immediately after the restart:"
msgstr "重启后控制台上会显示调试信息："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:884
#, fuzzy, no-wrap
msgid ""
"logmsg: pri 56, flags 4, from logserv.example.com, msg syslogd: restart\n"
"syslogd: restarted\n"
"logmsg: pri 6, flags 4, from logserv.example.com, msg syslogd: kernel boot "
"file is /boot/kernel/kernel\n"
"Logging to FILE /var/log/messages\n"
"syslogd: kernel boot file is /boot/kernel/kernel\n"
"cvthname(192.168.1.10)\n"
"validate: dgram from IP 192.168.1.10, port 514, name "
"logclient.example.com;\n"
"rejected in rule 0 due to name mismatch.\n"
msgstr ""
"logmsg: pri 56, flags 4, from logserv.example.com, msg syslogd: restart\n"
"syslogd: restarted\n"
"logmsg: pri 6, flags 4, from logserv.example.com, msg syslogd: kernel boot "
"file is /boot/kernel/kernel\n"
"Logging to FILE /var/log/messages\n"
"syslogd: kernel boot file is /boot/kernel/kernel\n"
"cvthname(192.168.1.10)\n"
"validate: dgram from IP 192.168.1.10, port 514, name logclient.example.com;\n"
"rejected in rule 0 due to name mismatch.\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:887
#, fuzzy
msgid ""
"In this example, the log messages are being rejected due to a typo which "
"results in a hostname mismatch. The client's hostname should be `logclient`, "
"not `logclien`. Fix the typo, issue a restart, and verify the results:"
msgstr ""
"在此示例中，由于拼写错误导致主机名不匹配，日志消息被拒绝。客户端的主机名应该是<literal>logclient</literal>，而非<litera"
"l>logclien</literal>。修复拼写错误并重新启动，验证结果："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:903
#, no-wrap
msgid ""
"# service syslogd restart\n"
"logmsg: pri 56, flags 4, from logserv.example.com, msg syslogd: restart\n"
"syslogd: restarted\n"
"logmsg: pri 6, flags 4, from logserv.example.com, msg syslogd: kernel boot "
"file is /boot/kernel/kernel\n"
"syslogd: kernel boot file is /boot/kernel/kernel\n"
"logmsg: pri 166, flags 17, from logserv.example.com,\n"
"msg Dec 10 20:55:02 <syslog.err> logserv.example.com syslogd: exiting on "
"signal 2\n"
"cvthname(192.168.1.10)\n"
"validate: dgram from IP 192.168.1.10, port 514, name "
"logclient.example.com;\n"
"accepted in rule 0.\n"
"logmsg: pri 15, flags 0, from logclient.example.com, msg Dec 11 02:01:28 "
"trhodes: Test message 2\n"
"Logging to FILE /var/log/logclient.log\n"
"Logging to FILE /var/log/messages\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:906
msgid ""
"At this point, the messages are being properly received and placed in the "
"correct file."
msgstr "此时，消息正在正确接收并放置在正确的文件中。"

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:907
#, no-wrap
msgid "Security Considerations"
msgstr "安全注意事项"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:910
#, fuzzy
msgid ""
"As with any network service, security requirements should be considered "
"before implementing a logging server. Log files may contain sensitive data "
"about services enabled on the local host, user accounts, and configuration "
"data. Network data sent from the client to the server will not be encrypted "
"or password protected. If a need for encryption exists, consider using "
"package:security/stunnel[], which will transmit the logging data over an "
"encrypted tunnel."
msgstr ""
"就像其他的网络服务一样， 在实现配置之前需要考虑安全性。 有时日志文件也包含了敏感信息， 比如本地主机上所启用的服务， 用户帐号和配置数据。 "
"从客户端发出的数据经过网络到达服务器， 这期间既没有加密也没有密码保护。 如果有加密需要的话， 可以使用 <package>security/"
"stunnel</package>， 它将在一个加密的隧道中传输数据。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:912
msgid ""
"Local security is also an issue. Log files are not encrypted during use or "
"after log rotation. Local users may access log files to gain additional "
"insight into system configuration. Setting proper permissions on log files "
"is critical. The built-in log rotator, newsyslog, supports setting "
"permissions on newly created and rotated log files. Setting log files to "
"mode `600` should prevent unwanted access by local users. Refer to "
"man:newsyslog.conf[5] for additional information."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/config/_index.adoc:914
#, no-wrap
msgid "Configuration Files"
msgstr "配置文件"

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:916
#, no-wrap
msgid "[.filename]#/etc# Layout"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:919
msgid ""
"There are a number of directories in which configuration information is "
"kept. These include:"
msgstr "有数个目录中储存着设定信息，这些目录有："

#. type: Table
#: documentation/content/en/books/handbook/config/_index.adoc:944
#, no-wrap
msgid ""
"|[.filename]#/etc#\n"
"|Generic system-specific configuration information.\n"
"\n"
"|[.filename]#/etc/defaults#\n"
"|Default versions of system configuration files.\n"
"\n"
"|[.filename]#/etc/mail#\n"
"|Extra man:sendmail[8] configuration and other MTA configuration files.\n"
"\n"
"|[.filename]#/etc/ppp#\n"
"|Configuration for both user- and kernel-ppp programs.\n"
"\n"
"|[.filename]#/usr/local/etc#\n"
"|Configuration files for installed applications. May contain per-application "
"subdirectories.\n"
"\n"
"|[.filename]#/usr/local/etc/rc.d#\n"
"|man:rc[8] scripts for installed applications.\n"
"\n"
"|[.filename]#/var/db#\n"
"|Automatically generated system-specific database files, such as the package "
"database and the man:locate[1] database.\n"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:946
#, no-wrap
msgid "Hostnames"
msgstr "主机名称"

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:948
#, no-wrap
msgid "[.filename]#/etc/resolv.conf#"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:951
msgid ""
"How a FreeBSD system accesses the Internet Domain Name System (DNS) is "
"controlled by man:resolv.conf[5]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:953
msgid "The most common entries to [.filename]#/etc/resolv.conf# are:"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/config/_index.adoc:966
#, no-wrap
msgid ""
"|`nameserver`\n"
"|The IP address of a name server the resolver should query. The servers are "
"queried in the order listed with a maximum of three.\n"
"\n"
"|`search`\n"
"|Search list for hostname lookup. This is normally determined by the domain "
"of the local hostname.\n"
"\n"
"|`domain`\n"
"|The local domain name.\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:969
msgid "A typical [.filename]#/etc/resolv.conf# looks like this:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:975
#, fuzzy, no-wrap
msgid ""
"search example.com\n"
"nameserver 147.11.1.11\n"
"nameserver 147.11.100.30\n"
msgstr ""
"search example.com\n"
"nameserver 147.11.1.11\n"
"nameserver 147.11.100.30\n"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:980
msgid "Only one of the `search` and `domain` options should be used."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:983
msgid ""
"When using DHCP, man:dhclient[8] usually rewrites "
"[.filename]#/etc/resolv.conf# with information received from the DHCP "
"server."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:984
#, no-wrap
msgid "[.filename]#/etc/hosts#"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:987
msgid ""
"[.filename]#/etc/hosts# is a simple text database which works in conjunction "
"with DNS and NIS to provide host name to IP address mappings. Entries for "
"local computers connected via a LAN can be added to this file for simplistic "
"naming purposes instead of setting up a man:named[8] server. Additionally, "
"[.filename]#/etc/hosts# can be used to provide a local record of Internet "
"names, reducing the need to query external DNS servers for commonly accessed "
"names."
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1022
#, fuzzy, no-wrap
msgid ""
"# $FreeBSD$\n"
"#\n"
"#\n"
"# Host Database\n"
"#\n"
"# This file should contain the addresses and aliases for local hosts that\n"
"# share this file.  Replace 'my.domain' below with the domainname of your\n"
"# machine.\n"
"#\n"
"# In the presence of the domain name service or NIS, this file may\n"
"# not be consulted at all; see /etc/nsswitch.conf for the resolution "
"order.\n"
"#\n"
"#\n"
"::1\t\t\tlocalhost localhost.my.domain\n"
"127.0.0.1\t\tlocalhost localhost.my.domain\n"
"#\n"
"# Imaginary network.\n"
"#10.0.0.2\t\tmyname.my.domain myname\n"
"#10.0.0.3\t\tmyfriend.my.domain myfriend\n"
"#\n"
"# According to RFC 1918, you can use the following IP networks for\n"
"# private nets which will never be connected to the Internet:\n"
"#\n"
"#\t10.0.0.0\t-   10.255.255.255\n"
"#\t172.16.0.0\t-   172.31.255.255\n"
"#\t192.168.0.0\t-   192.168.255.255\n"
"#\n"
"# In case you want to be able to connect to the Internet, you need\n"
"# real official assigned numbers.  Do not try to invent your own network\n"
"# numbers but instead get one from your network provider (if any) or\n"
"# from your regional registry (ARIN, APNIC, LACNIC, RIPE NCC, or AfriNIC.)\n"
"#\n"
msgstr ""
"# <_:phrase-1/>\n"
"#\n"
"#\n"
"# Host Database\n"
"#\n"
"# This file should contain the addresses and aliases for local hosts that\n"
"# share this file.  Replace 'my.domain' below with the domainname of your\n"
"# machine.\n"
"#\n"
"# In the presence of the domain name service or NIS, this file may\n"
"# not be consulted at all; see /etc/nsswitch.conf for the resolution order.\n"
"#\n"
"#\n"
"::1\t\t\tlocalhost localhost.my.domain\n"
"127.0.0.1\t\tlocalhost localhost.my.domain\n"
"#\n"
"# Imaginary network.\n"
"#10.0.0.2\t\tmyname.my.domain myname\n"
"#10.0.0.3\t\tmyfriend.my.domain myfriend\n"
"#\n"
"# According to RFC 1918, you can use the following IP networks for\n"
"# private nets which will never be connected to the Internet:\n"
"#\n"
"#\t10.0.0.0\t-   10.255.255.255\n"
"#\t172.16.0.0\t-   172.31.255.255\n"
"#\t192.168.0.0\t-   192.168.255.255\n"
"#\n"
"# In case you want to be able to connect to the Internet, you need\n"
"# real official assigned numbers.  Do not try to invent your own network\n"
"# numbers but instead get one from your network provider (if any) or\n"
"# from your regional registry (ARIN, APNIC, LACNIC, RIPE NCC, or AfriNIC.)\n"
"#\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1025
msgid "The format of [.filename]#/etc/hosts# is as follows:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1029
#, fuzzy, no-wrap
msgid "[Internet address] [official hostname] [alias1] [alias2] ...\n"
msgstr "[Internet address] [official hostname] [alias1] [alias2] ...\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1032
msgid "For example:"
msgstr "例如："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1036
#, fuzzy, no-wrap
msgid "10.0.0.1 myRealHostname.example.com myRealHostname foobar1 foobar2\n"
msgstr "10.0.0.1 myRealHostname.example.com myRealHostname foobar1 foobar2\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1039
msgid "Consult man:hosts[5] for more information."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/config/_index.adoc:1041
#, no-wrap
msgid "Tuning with man:sysctl[8]"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1044
msgid ""
"man:sysctl[8] is used to make changes to a running FreeBSD system. This "
"includes many advanced options of the TCP/IP stack and virtual memory system "
"that can dramatically improve performance for an experienced system "
"administrator. Over five hundred system variables can be read and set using "
"man:sysctl[8]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1046
msgid ""
"At its core, man:sysctl[8] serves two functions: to read and to modify "
"system settings."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1048
msgid "To view all readable variables:"
msgstr "检视所有可读取的变数："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1052
#, no-wrap
msgid "% sysctl -a\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1055
msgid "To read a particular variable, specify its name:"
msgstr "要读取特定变数只要指定其名称："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1060
#, no-wrap
msgid ""
"% sysctl kern.maxproc\n"
"kern.maxproc: 1044\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1063
msgid "To set a particular variable, use the _variable_=_value_ syntax:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1068
#, no-wrap
msgid ""
"# sysctl kern.maxfiles=5000\n"
"kern.maxfiles: 2088 -> 5000\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1071
msgid ""
"Settings of sysctl variables are usually either strings, numbers, or "
"booleans, where a boolean is `1` for yes or `0` for no."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1073
msgid ""
"To automatically set some variables each time the machine boots, add them to "
"[.filename]#/etc/sysctl.conf#. For more information, refer to "
"man:sysctl.conf[5] and <<configtuning-sysctlconf>>."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:1075
#, no-wrap
msgid "[.filename]#sysctl.conf#"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1078
msgid ""
"The configuration file for man:sysctl[8], [.filename]#/etc/sysctl.conf#, "
"looks much like [.filename]#/etc/rc.conf#. Values are set in a "
"`variable=value` form. The specified values are set after the system goes "
"into multi-user mode. Not all variables are settable in this mode."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1080
#, fuzzy
msgid ""
"For example, to turn off logging of fatal signal exits and prevent users "
"from seeing processes started by other users, the following tunables can be "
"set in [.filename]#/etc/sysctl.conf#:"
msgstr ""
"例如，要关闭严重信号（Fatal signal）中止的记录并避免使用者看到其他使用者所执行的程序，可加入以下设定到<filename>/etc/"
"sysctl.conf</filename>："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1085
#, no-wrap
msgid ""
"# Do not log fatal signal exits (e.g., sig 11)\n"
"kern.logsigexit=0\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1089
#, no-wrap
msgid ""
"# Prevent users from seeing information about processes that\n"
"# are being run under another UID.\n"
"security.bsd.see_other_uids=0\n"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:1092
#, no-wrap
msgid "man:sysctl[8] Read-only"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1095
msgid ""
"In some cases it may be desirable to modify read-only man:sysctl[8] values, "
"which will require a reboot of the system."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1097
msgid ""
"For instance, on some laptop models the man:cardbus[4] device will not probe "
"memory ranges and will fail with errors similar to:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1102
#, fuzzy, no-wrap
msgid ""
"cbb0: Could not map register memory\n"
"device_probe_and_attach: cbb0 attach returned 12\n"
msgstr ""
"cbb0: Could not map register memory\n"
"device_probe_and_attach: cbb0 attach returned 12\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1105
msgid ""
"The fix requires the modification of a read-only man:sysctl[8] setting. Add "
"`hw.pci.allow_unsupported_io_range=1` to [.filename]#/boot/loader.conf# and "
"reboot. Now man:cardbus[4] should work properly."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/config/_index.adoc:1107
#, no-wrap
msgid "Tuning Disks"
msgstr "调校磁盘"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1110
msgid ""
"The following section will discuss various tuning mechanisms and options "
"which may be applied to disk devices. In many cases, disks with mechanical "
"parts, such as SCSI drives, will be the bottleneck driving down the overall "
"system performance. While a solution is to install a drive without "
"mechanical parts, such as a solid state drive, mechanical drives are not "
"going away anytime in the near future. When tuning disks, it is advisable to "
"utilize the features of the man:iostat[8] command to test various changes to "
"the system. This command will allow the user to obtain valuable information "
"on system IO."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:1111
#, no-wrap
msgid "Sysctl Variables"
msgstr "Sysctl 参数"

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1113
#, no-wrap
msgid "`vfs.vmiodirenable`"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1116
msgid ""
"The `vfs.vmiodirenable` man:sysctl[8] variable may be set to either `0` "
"(off) or `1` (on). It is set to `1` by default. This variable controls how "
"directories are cached by the system. Most directories are small, using just "
"a single fragment (typically 1 K) in the file system and typically 512 bytes "
"in the buffer cache. With this variable turned off, the buffer cache will "
"only cache a fixed number of directories, even if the system has a huge "
"amount of memory. When turned on, this man:sysctl[8] allows the buffer cache "
"to use the VM page cache to cache the directories, making all the memory "
"available for caching directories. However, the minimum in-core memory used "
"to cache a directory is the physical page size (typically 4 K) rather than "
"512 bytes. Keeping this option enabled is recommended if the system is "
"running any services which manipulate large numbers of files. Such services "
"can include web caches, large mail systems, and news systems. Keeping this "
"option on will generally not reduce performance, even with the wasted "
"memory, but one should experiment to find out."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1117
#, no-wrap
msgid "`vfs.write_behind`"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1120
msgid ""
"The `vfs.write_behind` man:sysctl[8] variable defaults to `1` (on). This "
"tells the file system to issue media writes as full clusters are collected, "
"which typically occurs when writing large sequential files. This avoids "
"saturating the buffer cache with dirty buffers when it would not benefit I/O "
"performance. However, this may stall processes and under certain "
"circumstances should be turned off."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1121
#, no-wrap
msgid "`vfs.hirunningspace`"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1124
msgid ""
"The `vfs.hirunningspace` man:sysctl[8] variable determines how much "
"outstanding write I/O may be queued to disk controllers system-wide at any "
"given instance. The default is usually sufficient, but on machines with many "
"disks, try bumping it up to four or five _megabytes_. Setting too high a "
"value which exceeds the buffer cache's write threshold can lead to bad "
"clustering performance. Do not set this value arbitrarily high as higher "
"write values may add latency to reads occurring at the same time."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1126
msgid ""
"There are various other buffer cache and VM page cache related man:sysctl[8] "
"values. Modifying these values is not recommended as the VM system does a "
"good job of automatically tuning itself."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1127
#, no-wrap
msgid "`vm.swap_idle_enabled`"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1130
msgid ""
"The `vm.swap_idle_enabled` man:sysctl[8] variable is useful in large "
"multi-user systems with many active login users and lots of idle "
"processes. Such systems tend to generate continuous pressure on free memory "
"reserves. Turning this feature on and tweaking the swapout hysteresis (in "
"idle seconds) via `vm.swap_idle_threshold1` and `vm.swap_idle_threshold2` "
"depresses the priority of memory pages associated with idle processes more "
"quickly then the normal pageout algorithm. This gives a helping hand to the "
"pageout daemon. Only turn this option on if needed, because the tradeoff is "
"essentially pre-page memory sooner rather than later which eats more swap "
"and disk bandwidth. In a small system this option will have a determinable "
"effect, but in a large system that is already doing moderate paging, this "
"option allows the VM system to stage whole processes into and out of memory "
"easily."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1131
#, no-wrap
msgid "`hw.ata.wc`"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1134
msgid ""
"Turning off IDE write caching reduces write bandwidth to IDE disks, but may "
"sometimes be necessary due to data consistency issues introduced by hard "
"drive vendors. The problem is that some IDE drives lie about when a write "
"completes. With IDE write caching turned on, IDE hard drives write data to "
"disk out of order and will sometimes delay writing some blocks indefinitely "
"when under heavy disk load. A crash or power failure may cause serious file "
"system corruption. Check the default on the system by observing the "
"`hw.ata.wc` man:sysctl[8] variable. If IDE write caching is turned off, one "
"can set this read-only variable to `1` in [.filename]#/boot/loader.conf# in "
"order to enable it at boot time."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1136
msgid "For more information, refer to man:ata[4]."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1137
#, no-wrap
msgid "`SCSI_DELAY` (`kern.cam.scsi_delay`)"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1140
msgid ""
"The `SCSI_DELAY` kernel configuration option may be used to reduce system "
"boot times. The defaults are fairly high and can be responsible for `15` "
"seconds of delay in the boot process. Reducing it to `5` seconds usually "
"works with modern drives. The `kern.cam.scsi_delay` boot time tunable should "
"be used. The tunable and kernel configuration option accept values in terms "
"of _milliseconds_ and _not seconds_."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:1142
#, no-wrap
msgid "Soft Updates"
msgstr "Soft Updates"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1145
msgid ""
"To fine-tune a file system, use man:tunefs[8]. This program has many "
"different options. To toggle Soft Updates on and off, use:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1150
#, no-wrap
msgid ""
"# tunefs -n enable /filesystem\n"
"# tunefs -n disable /filesystem\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1153
msgid ""
"A file system cannot be modified with man:tunefs[8] while it is mounted. A "
"good time to enable Soft Updates is before any partitions have been mounted, "
"in single-user mode."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1155
#, fuzzy
msgid ""
"Soft Updates is recommended for UFS file systems as it drastically improves "
"meta-data performance, mainly file creation and deletion, through the use of "
"a memory cache. There are two downsides to Soft Updates to be aware "
"of. First, Soft Updates guarantee file system consistency in the case of a "
"crash, but could easily be several seconds or even a minute behind updating "
"the physical disk. If the system crashes, unwritten data may be "
"lost. Secondly, Soft Updates delay the freeing of file system blocks. If the "
"root file system is almost full, performing a major update, such as `make "
"installworld`, can cause the file system to run out of space and the update "
"to fail."
msgstr ""
"软更新（Soft Update）推荐用于<acronym>UFS</acronym>文件系统，因为它通过使用内存缓存，大幅提高了元数据的性能，主要是文件的"
"创建和删除。软更新有两个缺点需要注意。第一，软更新保证了文件系统在崩溃时的一致性，但在更新物理磁盘时很容易出现几秒甚至一分钟的延迟。如果系统崩溃，未写入的"
"数据可能会丢失。其次，软更新会推迟文件系统块的释放。如果根文件系统几乎满了，执行重大更新，如<command>make "
"installworld</command>，会导致文件系统空间耗尽，更新失败。"

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1156
#, no-wrap
msgid "More Details About Soft Updates"
msgstr "更多关于 Soft Update 的信息"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1159
msgid ""
"Meta-data updates are updates to non-content data like inodes or "
"directories. There are two traditional approaches to writing a file system's "
"meta-data back to disk."
msgstr "元数据更新是对非内容数据的更新，如inode或目录。有两种传统的方法将文件系统的元数据写回磁盘。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1161
msgid ""
"Historically, the default behavior was to write out meta-data updates "
"synchronously. If a directory changed, the system waited until the change "
"was actually written to disk. The file data buffers (file contents) were "
"passed through the buffer cache and backed up to disk later on "
"asynchronously. The advantage of this implementation is that it operates "
"safely. If there is a failure during an update, meta-data is always in a "
"consistent state. A file is either created completely or not at all. If the "
"data blocks of a file did not find their way out of the buffer cache onto "
"the disk by the time of the crash, man:fsck[8] recognizes this and repairs "
"the file system by setting the file length to `0`. Additionally, the "
"implementation is clear and simple. The disadvantage is that meta-data "
"changes are slow. For example, `rm -r` touches all the files in a directory "
"sequentially, but each directory change will be written synchronously to the "
"disk. This includes updates to the directory itself, to the inode table, and "
"possibly to indirect blocks allocated by the file. Similar considerations "
"apply for unrolling large hierarchies using `tar -x`."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1163
msgid ""
"The second approach is to use asynchronous meta-data updates. This is the "
"default for a UFS file system mounted with `mount -o async`. Since all "
"meta-data updates are also passed through the buffer cache, they will be "
"intermixed with the updates of the file content data. The advantage of this "
"implementation is there is no need to wait until each meta-data update has "
"been written to disk, so all operations which cause huge amounts of "
"meta-data updates work much faster than in the synchronous case. This "
"implementation is still clear and simple, so there is a low risk for bugs "
"creeping into the code. The disadvantage is that there is no guarantee for a "
"consistent state of the file system. If there is a failure during an "
"operation that updated large amounts of meta-data, like a power failure or "
"someone pressing the reset button, the file system will be left in an "
"unpredictable state. There is no opportunity to examine the state of the "
"file system when the system comes up again as the data blocks of a file "
"could already have been written to the disk while the updates of the inode "
"table or the associated directory were not. It is impossible to implement a "
"man:fsck[8] which is able to clean up the resulting chaos because the "
"necessary information is not available on the disk. If the file system has "
"been damaged beyond repair, the only choice is to reformat it and restore "
"from backup."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1165
#, fuzzy
msgid ""
"The usual solution for this problem is to implement _dirty region logging_, "
"which is also referred to as _journaling_. Meta-data updates are still "
"written synchronously, but only into a small region of the disk. Later on, "
"they are moved to their proper location. Since the logging area is a small, "
"contiguous region on the disk, there are no long distances for the disk "
"heads to move, even during heavy operations, so these operations are quicker "
"than synchronous updates. Additionally, the complexity of the implementation "
"is limited, so the risk of bugs being present is low. A disadvantage is that "
"all meta-data is written twice, once into the logging region and once to the "
"proper location, so performance \"pessimization\" might result. On the other "
"hand, in case of a crash, all pending meta-data operations can be either "
"quickly rolled back or completed from the logging area after the system "
"comes up again, resulting in a fast file system startup."
msgstr ""
"这个问题通常的解决办法是使用 <emphasis>dirty region logging</emphasis> 或者 "
"<emphasis>journaling</emphasis> 尽管它不是一贯的被使用并且有时候应用到其他的事务纪录中更好。 "
"这种方法元数据更新依然同步写入，但是只写到磁盘的一个小区域。 过后他们将会被移动到正确的位置。因为纪录区很小， "
"磁盘上接近的区域磁头不需要移动很长的距离，所以这些比写同步快一些。 另外这个方法的复杂性有限，所以出现错误的机会也很少。缺点是元数据要写两次 "
"(一次写到纪录区域，一次写到正确的区域)。正常情况下， 悲观的性能可能会发生。从另一方面来讲， "
"崩溃的时候所有未发生的元数据操作可以很快的在系统启动之后从记录中恢复过来。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1167
msgid ""
"Kirk McKusick, the developer of Berkeley FFS, solved this problem with Soft "
"Updates. All pending meta-data updates are kept in memory and written out to "
"disk in a sorted sequence (\"ordered meta-data updates\"). This has the "
"effect that, in case of heavy meta-data operations, later updates to an item "
"\"catch\" the earlier ones which are still in memory and have not already "
"been written to disk. All operations are generally performed in memory "
"before the update is written to disk and the data blocks are sorted "
"according to their position so that they will not be on the disk ahead of "
"their meta-data. If the system crashes, an implicit \"log rewind\" causes "
"all operations which were not written to the disk appear as if they never "
"happened. A consistent file system state is maintained that appears to be "
"the one of 30 to 60 seconds earlier. The algorithm used guarantees that all "
"resources in use are marked as such in their blocks and inodes. After a "
"crash, the only resource allocation error that occurs is that resources are "
"marked as \"used\" which are actually \"free\". man:fsck[8] recognizes this "
"situation, and frees the resources that are no longer used. It is safe to "
"ignore the dirty state of the file system after a crash by forcibly mounting "
"it with `mount -f`. In order to free resources that may be unused, "
"man:fsck[8] needs to be run at a later time. This is the idea behind the "
"_background man:fsck[8]_: at system startup time, only a _snapshot_ of the "
"file system is recorded and man:fsck[8] is run afterwards. All file systems "
"can then be mounted \"dirty\", so the system startup proceeds in multi-user "
"mode. Then, background man:fsck[8] is scheduled for all file systems where "
"this is required, to free resources that may be unused. File systems that do "
"not use Soft Updates still need the usual foreground man:fsck[8]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1169
msgid ""
"The advantage is that meta-data operations are nearly as fast as "
"asynchronous updates and are faster than _logging_, which has to write the "
"meta-data twice. The disadvantages are the complexity of the code, a higher "
"memory consumption, and some idiosyncrasies. After a crash, the state of the "
"file system appears to be somewhat \"older\". In situations where the "
"standard synchronous approach would have caused some zero-length files to "
"remain after the man:fsck[8], these files do not exist at all with Soft "
"Updates because neither the meta-data nor the file contents have been "
"written to disk. Disk space is not released until the updates have been "
"written to disk, which may take place some time after running "
"man:rm[1]. This may cause problems when installing large amounts of data on "
"a file system that does not have enough free space to hold all the files "
"twice."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/config/_index.adoc:1171
#, no-wrap
msgid "Tuning Kernel Limits"
msgstr "调校内核限制"

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:1174
#, no-wrap
msgid "File/Process Limits"
msgstr "文件/进程限制"

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1177
#, no-wrap
msgid "`kern.maxfiles`"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1180
msgid ""
"The `kern.maxfiles` man:sysctl[8] variable can be raised or lowered based "
"upon system requirements. This variable indicates the maximum number of file "
"descriptors on the system. When the file descriptor table is full, `file: "
"table is full` will show up repeatedly in the system message buffer, which "
"can be viewed using man:dmesg[8]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1182
msgid ""
"Each open file, socket, or fifo uses one file descriptor. A large-scale "
"production server may easily require many thousands of file descriptors, "
"depending on the kind and number of services running concurrently."
msgstr ""
"每个打开的文件、 套接字和管道， 都会占用一个文件描述符。 在大型生产服务器上， 可能会轻易地用掉数千个文件描述符， "
"具体用量取决于服务的类型和并行启动的服务数量。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1184
#, fuzzy
msgid ""
"In older FreeBSD releases, the default value of `kern.maxfiles` is derived "
"from `maxusers` in the kernel configuration file. `kern.maxfiles` grows "
"proportionally to the value of `maxusers`. When compiling a custom kernel, "
"consider setting this kernel configuration option according to the use of "
"the system. From this number, the kernel is given most of its pre-defined "
"limits. Even though a production machine may not have 256 concurrent users, "
"the resources needed may be similar to a high-scale web server."
msgstr ""
"在早期版本的 FreeBSD 中， <varname>kern.maxfiles</varname> 的默认值， 是根据您内核配置文件中的 "
"<option>maxusers</option> 选项计算的。 <varname>kern.maxfiles</varname> 这个数值， 会随 "
"<option>maxusers</option> 成比例地增减。 当编译定制的内核时， 按照您系统的用途来修改这个值是个好主意。 "
"这个数字同时还决定内核的许多预设的限制值。 有时， 尽管并不会真的有 256 个用户同时连接一台生产服务器， 但对于高负载的 web 服务器而言， "
"却可能需要与之类似的资源。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1186
msgid ""
"The read-only man:sysctl[8] variable `kern.maxusers` is automatically sized "
"at boot based on the amount of memory available in the system, and may be "
"determined at run-time by inspecting the value of `kern.maxusers`. Some "
"systems require larger or smaller values of `kern.maxusers` and values of "
"`64`, `128`, and `256` are not uncommon. Going above `256` is not "
"recommended unless a huge number of file descriptors is needed. Many of the "
"tunable values set to their defaults by `kern.maxusers` may be individually "
"overridden at boot-time or run-time in [.filename]#/boot/loader.conf#. Refer "
"to man:loader.conf[5] and [.filename]#/boot/defaults/loader.conf# for more "
"details and some hints."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1188
msgid ""
"In older releases, the system will auto-tune `maxusers` if it is set to "
"`0`. footnote:[The auto-tuning algorithm sets maxusers equal to the amount "
"of memory in the system, with a minimum of 32, and a maximum of 384.]. When "
"setting this option, set `maxusers` to at least `4`, especially if the "
"system runs Xorg or is used to compile software. The most important table "
"set by `maxusers` is the maximum number of processes, which is set to `20 + "
"16 * maxusers`. If `maxusers` is set to `1`, there can only be `36` "
"simultaneous processes, including the `18` or so that the system starts up "
"at boot time and the `15` or so used by Xorg. Even a simple task like "
"reading a manual page will start up nine processes to filter, decompress, "
"and view it. Setting `maxusers` to `64` allows up to `1044` simultaneous "
"processes, which should be enough for nearly all uses. If, however, the "
"error is displayed when trying to start another program, or a server is "
"running with a large number of simultaneous users, increase the number and "
"rebuild."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1192
msgid ""
"`maxusers` does _not_ limit the number of users which can log into the "
"machine. It instead sets various table sizes to reasonable values "
"considering the maximum number of users on the system and how many processes "
"each user will be running."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1194
#, no-wrap
msgid "`kern.ipc.soacceptqueue`"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1197
msgid ""
"The `kern.ipc.soacceptqueue` man:sysctl[8] variable limits the size of the "
"listen queue for accepting new `TCP` connections. The default value of `128` "
"is typically too low for robust handling of new connections on a heavily "
"loaded web server. For such environments, it is recommended to increase this "
"value to `1024` or higher. A service such as man:sendmail[8], or Apache may "
"itself limit the listen queue size, but will often have a directive in its "
"configuration file to adjust the queue size. Large listen queues do a better "
"job of avoiding Denial of Service (DoS) attacks."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:1199
#, no-wrap
msgid "Network Limits"
msgstr "网络限制"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1202
msgid ""
"The `NMBCLUSTERS` kernel configuration option dictates the amount of network "
"Mbufs available to the system. A heavily-trafficked server with a low number "
"of Mbufs will hinder performance. Each cluster represents approximately 2 K "
"of memory, so a value of `1024` represents `2` megabytes of kernel memory "
"reserved for network buffers. A simple calculation can be done to figure out "
"how many are needed. A web server which maxes out at `1000` simultaneous "
"connections where each connection uses a 6 K receive and 16 K send buffer, "
"requires approximately 32 MB worth of network buffers to cover the web "
"server. A good rule of thumb is to multiply by `2`, so 2x32 MB / 2 KB = 64 "
"MB / 2 kB = `32768`. Values between `4096` and `32768` are recommended for "
"machines with greater amounts of memory. Never specify an arbitrarily high "
"value for this parameter as it could lead to a boot time crash. To observe "
"network cluster usage, use `-m` with man:netstat[1]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1204
msgid ""
"The `kern.ipc.nmbclusters` loader tunable should be used to tune this at "
"boot time. Only older versions of FreeBSD will require the use of the "
"`NMBCLUSTERS` kernel man:config[8] option."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1206
msgid ""
"For busy servers that make extensive use of the man:sendfile[2] system call, "
"it may be necessary to increase the number of man:sendfile[2] buffers via "
"the `NSFBUFS` kernel configuration option or by setting its value in "
"[.filename]#/boot/loader.conf# (see man:loader[8] for details). A common "
"indicator that this parameter needs to be adjusted is when processes are "
"seen in the `sfbufa` state. The man:sysctl[8] variable `kern.ipc.nsfbufs` is "
"read-only. This parameter nominally scales with `kern.maxusers`, however it "
"may be necessary to tune accordingly."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1210
msgid ""
"Even though a socket has been marked as non-blocking, calling "
"man:sendfile[2] on the non-blocking socket may result in the man:sendfile[2] "
"call blocking until enough ``struct sf_buf``'s are made available."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1212
#, no-wrap
msgid "`net.inet.ip.portrange.*`"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1215
msgid ""
"The `net.inet.ip.portrange.*` man:sysctl[8] variables control the port "
"number ranges automatically bound to `TCP` and `UDP` sockets. There are "
"three ranges: a low range, a default range, and a high range. Most network "
"programs use the default range which is controlled by "
"`net.inet.ip.portrange.first` and `net.inet.ip.portrange.last`, which "
"default to `1024` and `5000`, respectively. Bound port ranges are used for "
"outgoing connections and it is possible to run the system out of ports under "
"certain circumstances. This most commonly occurs when running a heavily "
"loaded web proxy. The port range is not an issue when running a server which "
"handles mainly incoming connections, such as a web server, or has a limited "
"number of outgoing connections, such as a mail relay. For situations where "
"there is a shortage of ports, it is recommended to increase "
"`net.inet.ip.portrange.last` modestly. A value of `10000`, `20000` or "
"`30000` may be reasonable. Consider firewall effects when changing the port "
"range. Some firewalls may block large ranges of ports, usually low-numbered "
"ports, and expect systems to use higher ranges of ports for outgoing "
"connections. For this reason, it is not recommended that the value of "
"`net.inet.ip.portrange.first` be lowered."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1216
#, no-wrap
msgid "`TCP` Bandwidth Delay Product"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1219
msgid ""
"`TCP` bandwidth delay product limiting can be enabled by setting the "
"`net.inet.tcp.inflight.enable` man:sysctl[8] variable to `1`. This instructs "
"the system to attempt to calculate the bandwidth delay product for each "
"connection and limit the amount of data queued to the network to just the "
"amount required to maintain optimum throughput."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1221
#, fuzzy
msgid ""
"This feature is useful when serving data over modems, Gigabit Ethernet, high "
"speed `WAN` links, or any other link with a high bandwidth delay product, "
"especially when also using window scaling or when a large send window has "
"been configured. When enabling this option, also set "
"`net.inet.tcp.inflight.debug` to `0` to disable debugging. For production "
"use, setting `net.inet.tcp.inflight.min` to at least `6144` may be "
"beneficial. Setting high minimums may effectively disable bandwidth "
"limiting, depending on the link. The limiting feature reduces the amount of "
"data built up in intermediate route and switch packet queues and reduces the "
"amount of data built up in the local host's interface queue. With fewer "
"queued packets, interactive connections, especially over slow modems, will "
"operate with lower _Round Trip Times_. This feature only effects server side "
"data transmission such as uploading. It has no effect on data reception or "
"downloading."
msgstr ""
"这一特性在您的服务器同时向使用普通调制解调器， 千兆以太网， 乃至更高速度的光与网络连接 (或其他带宽延迟积很大的连接) 的时候尤为重要， "
"特别是当您同时使用滑动窗缩放， 或使用了大的发送窗口的时候。 如果启用了这个选项， 您还应该把 <varname>net.inet.tcp."
"inflight.debug</varname> 设置为 <literal>0</literal> (禁用调试)， 对于生产环境而言， 将 "
"<varname>net.inet.tcp.inflight.min</varname> 设置成至少 <literal>6144</literal> "
"会很有好处。 然而， 需要注意的是， 这个值设置过大事实上相当于禁用了连接带宽延迟积限制功能。 这个限制特性减少了在路由和交换包队列的堵塞数据数量， "
"也减少了在本地主机接口队列阻塞的数据的数量。在少数的等候队列中、 交互式连接，尤其是通过慢速的调制解调器，也能用低的 "
"<emphasis>往返时间</emphasis>操作。但是，注意这只影响到数据发送 (上载/服务端)。对数据接收(下载)没有效果。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1223
msgid ""
"Adjusting `net.inet.tcp.inflight.stab` is _not_ recommended. This parameter "
"defaults to `20`, representing 2 maximal packets added to the bandwidth "
"delay product window calculation. The additional window is required to "
"stabilize the algorithm and improve responsiveness to changing conditions, "
"but it can also result in higher man:ping[8] times over slow links, though "
"still much lower than without the inflight algorithm. In such cases, try "
"reducing this parameter to `15`, `10`, or `5` and reducing "
"`net.inet.tcp.inflight.min` to a value such as `3500` to get the desired "
"effect. Reducing these parameters should be done as a last resort only."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:1224
#, no-wrap
msgid "Virtual Memory"
msgstr "虚拟內存"

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1226
#, no-wrap
msgid "`kern.maxvnodes`"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1229
#, fuzzy
msgid ""
"A vnode is the internal representation of a file or directory. Increasing "
"the number of vnodes available to the operating system reduces disk "
"I/O. Normally, this is handled by the operating system and does not need to "
"be changed. In some cases where disk I/O is a bottleneck and the system is "
"running out of vnodes, this setting needs to be increased. The amount of "
"inactive and free RAM will need to be taken into account."
msgstr ""
"vnode 是对文件或目录的一种内部表达。 因此， 增加可以被操作系统利用的 vnode 数量将降低磁盘的 I/O。 一般而言， "
"这是由操作系统自行完成的， 也不需要加以修改。 但在某些时候磁盘 I/O 会成为瓶颈， 而系统的 vnode 不足， 则这一配置应被增加。 "
"此时需要考虑是非活跃和空闲内存的数量。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1231
msgid "To see the current number of vnodes in use:"
msgstr "要查看当前在用的 vnode 数量："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1236
#, no-wrap
msgid ""
"# sysctl vfs.numvnodes\n"
"vfs.numvnodes: 91349\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1239
msgid "To see the maximum vnodes:"
msgstr "要查看最大可用的 vnode 数量："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1244
#, no-wrap
msgid ""
"# sysctl kern.maxvnodes\n"
"kern.maxvnodes: 100000\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1247
msgid ""
"If the current vnode usage is near the maximum, try increasing "
"`kern.maxvnodes` by a value of `1000`. Keep an eye on the number of "
"`vfs.numvnodes`. If it climbs up to the maximum again, `kern.maxvnodes` will "
"need to be increased further. Otherwise, a shift in memory usage as reported "
"by man:top[1] should be visible and more memory should be active."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/config/_index.adoc:1249
#, no-wrap
msgid "Adding Swap Space"
msgstr "增加交换空间"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1252
msgid ""
"Sometimes a system requires more swap space. This section describes two "
"methods to increase swap space: adding swap to an existing partition or new "
"hard drive, and creating a swap file on an existing partition."
msgstr ""
"有时系统会需要更多的交换（Swap）空间，本章节会介绍两种增加交换空间的方式：一种是在既有的分割区或新的硬盘增加交换空间，另一种则是在既有的分割区中建立一"
"个交换档。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1254
msgid ""
"For information on how to encrypt swap space, which options exist, and why "
"it should be done, refer to crossref:disks[swap-encrypting,“Encrypting "
"Swap”]."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:1256
#, no-wrap
msgid "Swap on a New Hard Drive or Existing Partition"
msgstr "使用新硬盘或既有分割区增加交换空间"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1259
msgid ""
"Adding a new hard drive for swap gives better performance than using a "
"partition on an existing drive. Setting up partitions and hard drives is "
"explained in crossref:disks[disks-adding,“Adding Disks”] while "
"crossref:bsdinstall[configtuning-initial,“Designing the Partition Layout”] "
"discusses partition layouts and swap partition size considerations."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1261
msgid "Use `swapon` to add a swap partition to the system. For example:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1265
#, no-wrap
msgid "# swapon /dev/ada1s1b\n"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1271
#, fuzzy
msgid ""
"It is possible to use any partition not currently mounted, even if it "
"already contains data. Using `swapon` on a partition that contains data will "
"overwrite and destroy that data. Make sure that the partition to be added as "
"swap is really the intended partition before running `swapon`."
msgstr ""
"可以使用任何尚未挂载过、甚至已经有内含数据的分割区做为交换空间，但在含有数据的分割区上使用<command>swapon</command>会复写并清除该"
"分割区上所有的数据，请在执行<command>swapon</command>之前确认真的要使用该分割区增加交换空间。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1274
#, fuzzy
msgid ""
"To automatically add this swap partition on boot, add an entry to "
"[.filename]#/etc/fstab#:"
msgstr "要在开机时自动加入此交换分割区，可加入以下项目到<filename>/etc/fstab</filename>："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1278
#, no-wrap
msgid "/dev/ada1s1b\tnone\tswap\tsw\t0\t0\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1281
msgid ""
"See man:fstab[5] for an explanation of the entries in "
"[.filename]#/etc/fstab#. More information about `swapon` can be found in "
"man:swapon[8]."
msgstr ""

#. type: Block title
#: documentation/content/en/books/handbook/config/_index.adoc:1283
#: documentation/content/en/books/handbook/config/_index.adoc:1290
#, no-wrap
msgid "Creating a Swap File"
msgstr "建立交换档"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1286
#, fuzzy
msgid ""
"These examples create a 512M swap file called [.filename]#/usr/swap0# "
"instead of using a partition."
msgstr "以下例子会建立一个512M的交换文件，位于<filename>/usr/swap0</filename>，来替代 swap 分区。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1288
msgid ""
"Using swap files requires that the module needed by man:md[4] has either "
"been built into the kernel or has been loaded before swap is enabled. See "
"crossref:kernelconfig[kernelconfig,Configuring the FreeBSD Kernel] for "
"information about building a custom kernel."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1295
msgid "Create the swap file:"
msgstr "建立交换档："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1299
#, no-wrap
msgid "# dd if=/dev/zero of=/usr/swap0 bs=1m count=512\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1302
msgid "Set the proper permissions on the new file:"
msgstr "在新文件设定适当的权限："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1306
#, no-wrap
msgid "# chmod 0600 /usr/swap0\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1309
#, fuzzy
msgid ""
"Inform the system about the swap file by adding a line to "
"[.filename]#/etc/fstab#:"
msgstr "加入行到<filename>/etc/fstab</filename>以让系统知道交换档的信息："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1313
#, fuzzy, no-wrap
msgid "md99\tnone\tswap\tsw,file=/usr/swap0,late\t0\t0\n"
msgstr "md99\tnone\tswap\tsw,file=/usr/swap0,late\t0\t0\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1316
msgid ""
"  The man:md[4] device [.filename]#md99# is used, leaving lower device "
"numbers available for interactive use."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1317
msgid ""
"Swap space will be added on system startup. To add swap space immediately, "
"use man:swapon[8]:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1321
#, no-wrap
msgid "# swapon -aL\n"
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/config/_index.adoc:1326
#, no-wrap
msgid "Power and Resource Management"
msgstr "电源与资源管理"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1329
#, fuzzy
msgid ""
"It is important to utilize hardware resources in an efficient manner. Power "
"and resource management allows the operating system to monitor system limits "
"and to possibly provide an alert if the system temperature increases "
"unexpectedly. An early specification for providing power management was the "
"Advanced Power Management (APM) facility. APM controls the power usage of a "
"system based on its activity. However, it was difficult and inflexible for "
"operating systems to manage the power usage and thermal properties of a "
"system. The hardware was managed by the BIOS and the user had limited "
"configurability and visibility into the power management settings. The "
"APMBIOS is supplied by the vendor and is specific to the hardware "
"platform. An APM driver in the operating system mediates access to the APM "
"Software Interface, which allows management of power levels."
msgstr ""
"以有效率的方式运用硬件资源是很重要的，电源与资源管理让操作系统可以监控系统的限制，并且在系统温度意外升高时能够发出警报。早期提供电源管理的规范是进阶电源管"
"理（Advanced Power Management，<acronym>APM</acronym>），<acronym>APM</acronym>可根据"
"系统的使用状况来来控制电源用量。然而，使用<acronym>APM</acronym>要操作系统来管理系统的电源用量和温度属性是困难且没有弹性的，因为硬件"
"是由<acronym>BIOS</acronym>所管理，使用者对电源管理设定只有有限的设定性与可见性，且<acronym>APM</acronym> <"
"acronym>BIOS</acronym>是由供应商提供且特定于某些硬件平台，而操作系统中必透过<acronym>APM</acronym>驱动程序做为"
"中介存取<acronym>APM</acronym>软件界面才能够管理电源等级。"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1331
msgid ""
"There are four major problems in APM. First, power management is done by the "
"vendor-specific BIOS, separate from the operating system. For example, the "
"user can set idle-time values for a hard drive in the APMBIOS so that, when "
"exceeded, the BIOS spins down the hard drive without the consent of the "
"operating system. Second, the APM logic is embedded in the BIOS, and it "
"operates outside the scope of the operating system. This means that users "
"can only fix problems in the APMBIOS by flashing a new one into the ROM, "
"which is a dangerous procedure with the potential to leave the system in an "
"unrecoverable state if it fails. Third, APM is a vendor-specific technology, "
"meaning that there is a lot of duplication of efforts and bugs found in one "
"vendor's BIOS may not be solved in others. Lastly, the APMBIOS did not have "
"enough room to implement a sophisticated power policy or one that can adapt "
"well to the purpose of the machine."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1333
msgid ""
"The Plug and Play BIOS (PNPBIOS) was unreliable in many situations. PNPBIOS "
"is 16-bit technology, so the operating system has to use 16-bit emulation in "
"order to interface with PNPBIOS methods. FreeBSD provides an APM driver as "
"APM should still be used for systems manufactured at or before the year "
"2000. The driver is documented in man:apm[4]."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1335
msgid ""
"The successor to APM is the Advanced Configuration and Power Interface "
"(ACPI). ACPI is a standard written by an alliance of vendors to provide an "
"interface for hardware resources and power management. It is a key element "
"in _Operating System-directed configuration and Power Management_ as it "
"provides more control and flexibility to the operating system."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1337
msgid ""
"This chapter demonstrates how to configure ACPI on FreeBSD. It then offers "
"some tips on how to debug ACPI and how to submit a problem report containing "
"debugging information so that developers can diagnosis and fix ACPI issues."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:1339
#, no-wrap
msgid "Configuring ACPI"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1342
msgid ""
"In FreeBSD the man:acpi[4] driver is loaded by default at system boot and "
"should _not_ be compiled into the kernel. This driver cannot be unloaded "
"after boot because the system bus uses it for various hardware "
"interactions. However, if the system is experiencing problems, ACPI can be "
"disabled altogether by rebooting after setting `hint.acpi.0.disabled=\"1\"` "
"in [.filename]#/boot/loader.conf# or by setting this variable at the loader "
"prompt, as described in crossref:boot[boot-loader,“Stage Three”]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1346
msgid ""
"ACPI and APM cannot coexist and should be used separately. The last one to "
"load will terminate if the driver notices the other is running."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1349
msgid ""
"ACPI can be used to put the system into a sleep mode with `acpiconf`, the "
"`-s` flag, and a number from `1` to `5`. Most users only need `1` (quick "
"suspend to RAM) or `3` (suspend to RAM). Option `5` performs a soft-off "
"which is the same as running `halt -p`."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1351
msgid ""
"Other options are available using `sysctl`. Refer to man:acpi[4] and "
"man:acpiconf[8] for more information."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:1353
#, no-wrap
msgid "Common Problems"
msgstr "常见问题"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1356
#, fuzzy
msgid ""
"ACPI is present in all modern computers that conform to the ia32 (x86) and "
"amd64 (AMD) architectures. The full standard has many features including CPU "
"performance management, power planes control, thermal zones, various battery "
"systems, embedded controllers, and bus enumeration. Most systems implement "
"less than the full standard. For instance, a desktop system usually only "
"implements bus enumeration while a laptop might have cooling and battery "
"management support as well. Laptops also have suspend and resume, with their "
"own associated complexity."
msgstr ""
"所有符合 ia32 （x86） 和 amd64 （<acronym>AMD</acronym>） 体系结构的现代计算机都有<acronym>ACPI</a"
"cronym>。全标准具有多种功能，包括<acronym>CPU</acronym>性能管理、电源平面控制、热区、各种电池系统、嵌入式控制器和总线枚举。大"
"多数系统实施不到完整的标准。例如，桌面系统通常只实现总线枚举，而笔记本电脑可能也有冷却和电池管理支持。笔记本电脑也有挂起和恢复，与它们相关的复杂性。"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1358
msgid ""
"An ACPI-compliant system has various components. The BIOS and chipset "
"vendors provide various fixed tables, such as FADT, in memory that specify "
"things like the APIC map (used for SMP), config registers, and simple "
"configuration values. Additionally, a bytecode table, the Differentiated "
"System Description Table DSDT, specifies a tree-like name space of devices "
"and methods."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1360
msgid ""
"The ACPI driver must parse the fixed tables, implement an interpreter for "
"the bytecode, and modify device drivers and the kernel to accept information "
"from the ACPI subsystem. For FreeBSD, Intel(R) has provided an interpreter "
"(ACPI-CA) that is shared with Linux(R) and NetBSD. The path to the ACPI-CA "
"source code is [.filename]#src/sys/contrib/dev/acpica#. The glue code that "
"allows ACPI-CA to work on FreeBSD is in "
"[.filename]#src/sys/dev/acpica/Osd#. Finally, drivers that implement various "
"ACPI devices are found in [.filename]#src/sys/dev/acpica#."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1362
msgid ""
"For ACPI to work correctly, all the parts have to work correctly. Here are "
"some common problems, in order of frequency of appearance, and some possible "
"workarounds or fixes. If a fix does not resolve the issue, refer to "
"<<ACPI-submitdebug>> for instructions on how to submit a bug report."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1363
#, no-wrap
msgid "Mouse Issues"
msgstr "鼠标问题"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1366
#, fuzzy
msgid ""
"In some cases, resuming from a suspend operation will cause the mouse to "
"fail. A known work around is to add `hint.psm.0.flags=\"0x3000\"` to "
"[.filename]#/boot/loader.conf#."
msgstr ""
"某些时候， 唤醒操作会导致鼠标不再正常工作。 已知的绕过这一问题的方法， 是在 <filename>/boot/loader.conf</"
"filename> 文件中添加 <literal>hint.psm.0.flags=\"0x3000\"</literal> 设置。 "
"如果这样做不能解决问题， 请考虑按前面介绍的方法提交问题报告。"

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1367
#, no-wrap
msgid "Suspend/Resume"
msgstr "待机/唤醒"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1370
msgid ""
"ACPI has three suspend to RAM (STR) states, `S1`-`S3`, and one suspend to "
"disk state (STD), called `S4`. STD can be implemented in two separate "
"ways. The ``S4``BIOS is a BIOS-assisted suspend to disk and ``S4``OS is "
"implemented entirely by the operating system. The normal state the system is "
"in when plugged in but not powered up is \"soft off\" (`S5`)."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1372
msgid ""
"Use `sysctl hw.acpi` to check for the suspend-related items. These example "
"results are from a Thinkpad:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1377
#, fuzzy, no-wrap
msgid ""
"hw.acpi.supported_sleep_state: S3 S4 S5\n"
"hw.acpi.s4bios: 0\n"
msgstr ""
"hw.acpi.supported_sleep_state: S3 S4 S5\n"
"hw.acpi.s4bios: 0\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1380
msgid ""
"Use `acpiconf -s` to test `S3`, `S4`, and `S5`. An `s4bios` of one (`1`) "
"indicates ``S4``BIOS support instead of `S4` operating system support."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1382
msgid ""
"When testing suspend/resume, start with `S1`, if supported. This state is "
"most likely to work since it does not require much driver support. No one "
"has implemented `S2`, which is similar to `S1`. Next, try `S3`. This is the "
"deepest STR state and requires a lot of driver support to properly "
"reinitialize the hardware."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1384
msgid ""
"A common problem with suspend/resume is that many device drivers do not "
"save, restore, or reinitialize their firmware, registers, or device memory "
"properly. As a first attempt at debugging the problem, try:"
msgstr ""
"休眠和唤醒操作最常见的问题是某些设备驱动程序不会保存、 恢复或正确地重新初始化其固件、 寄存器或设备内存。 尝试调试这些问题时， 首先可以尝试："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1390
#, no-wrap
msgid ""
"# sysctl debug.bootverbose=1\n"
"# sysctl debug.acpi.suspend_bounce=1\n"
"# acpiconf -s 3\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1393
#, fuzzy
msgid ""
"This test emulates the suspend/resume cycle of all device drivers without "
"actually going into `S3` state. In some cases, problems such as losing "
"firmware state, device watchdog time out, and retrying forever, can be "
"captured with this method. Note that the system will not really enter `S3` "
"state, which means devices may not lose power, and many will work fine even "
"if suspend/resume methods are totally missing, unlike real `S3` state."
msgstr ""
"这个测试会模拟休眠和恢复过程而不真的进入 <literal>S3</literal> 状态。 有时， 您会用这种方式很容易地抓住问题 (例如， "
"丢失固件状态、 设备 watchdog 超时， 以及一直重试等)。 注意系统不会真的进入 <literal>S3</literal> 状态， "
"这意味着这些设备可能不会掉电， 而许多设备在完全不提供休眠和恢复方法时仍可正常工作， 而不像使用真的 <literal>S3</literal> "
"状态那样。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1395
msgid ""
"Harder cases require additional hardware, such as a serial port and cable "
"for debugging through a serial console, a Firewire port and cable for using "
"man:dcons[4], and kernel debugging skills."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1397
msgid ""
"To help isolate the problem, unload as many drivers as possible. If it "
"works, narrow down which driver is the problem by loading drivers until it "
"fails again. Typically, binary drivers like [.filename]#nvidia.ko#, display "
"drivers, and USB will have the most problems while Ethernet interfaces "
"usually work fine. If drivers can be properly loaded and unloaded, automate "
"this by putting the appropriate commands in [.filename]#/etc/rc.suspend# and "
"[.filename]#/etc/rc.resume#. Try setting `hw.acpi.reset_video` to `1` if the "
"display is messed up after resume. Try setting longer or shorter values for "
"`hw.acpi.sleep_delay` to see if that helps."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1399
msgid ""
"Try loading a recent Linux(R) distribution to see if suspend/resume works on "
"the same hardware. If it works on Linux(R), it is likely a FreeBSD driver "
"problem. Narrowing down which driver causes the problem will assist "
"developers in fixing the problem. Since the ACPI maintainers rarely maintain "
"other drivers, such as sound or ATA, any driver problems should also be "
"posted to the {freebsd-current} and mailed to the driver "
"maintainer. Advanced users can include debugging man:printf[3]s in a "
"problematic driver to track down where in its resume function it hangs."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1401
msgid ""
"Finally, try disabling ACPI and enabling APM instead. If suspend/resume "
"works with APM, stick with APM, especially on older hardware (pre-2000). It "
"took vendors a while to get ACPI support correct and older hardware is more "
"likely to have BIOS problems with ACPI."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1402
#, no-wrap
msgid "System Hangs"
msgstr "系统无响应"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1405
msgid ""
"Most system hangs are a result of lost interrupts or an interrupt "
"storm. Chipsets may have problems based on boot, how the BIOS configures "
"interrupts before correctness of the APIC (MADT) table, and routing of the "
"System Control Interrupt (SCI)."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1407
msgid ""
"Interrupt storms can be distinguished from lost interrupts by checking the "
"output of `vmstat -i` and looking at the line that has `acpi0`. If the "
"counter is increasing at more than a couple per second, there is an "
"interrupt storm. If the system appears hung, try breaking to DDB "
"(kbd:[CTRL+ALT+ESC] on console) and type `show interrupts`."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1409
msgid ""
"When dealing with interrupt problems, try disabling APIC support with "
"`hint.apic.0.disabled=\"1\"` in [.filename]#/boot/loader.conf#."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1410
#, no-wrap
msgid "Panics"
msgstr "崩溃"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1413
msgid ""
"Panics are relatively rare for ACPI and are the top priority to be "
"fixed. The first step is to isolate the steps to reproduce the panic, if "
"possible, and get a backtrace. Follow the advice for enabling `options DDB` "
"and setting up a serial console in "
"crossref:serialcomms[serialconsole-ddb,“Entering the DDB Debugger from the "
"Serial Line”] or setting up a dump partition. To get a backtrace in DDB, use "
"`tr`. When handwriting the backtrace, get at least the last five and the top "
"five lines in the trace."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1415
msgid ""
"Then, try to isolate the problem by booting with ACPI disabled. If that "
"works, isolate the ACPI subsystem by using various values of "
"`debug.acpi.disable`. See man:acpi[4] for some examples."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1416
#, no-wrap
msgid "System Powers Up After Suspend or Shutdown"
msgstr "系统在待机或关机后仍开机"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1419
msgid ""
"First, try setting `hw.acpi.disable_on_poweroff=\"0\"` in "
"[.filename]#/boot/loader.conf#. This keeps ACPI from disabling various "
"events during the shutdown process. Some systems need this value set to `1` "
"(the default) for the same reason. This usually fixes the problem of a "
"system powering up spontaneously after a suspend or poweroff."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1421
#, no-wrap
msgid "BIOS Contains Buggy Bytecode"
msgstr "BIOS含有有问题的Bytecode"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1424
msgid ""
"Some BIOS vendors provide incorrect or buggy bytecode. This is usually "
"manifested by kernel console messages like this:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1429
#, fuzzy, no-wrap
msgid ""
"ACPI-1287: *** Error: Method execution failed [\\\\_SB_.PCI0.LPC0.FIGD._STA] "
"\\\\\n"
"(Node 0xc3f6d160), AE_NOT_FOUND\n"
msgstr ""
"ACPI-1287: *** Error: Method execution failed [\\\\_SB_.PCI0.LPC0.FIGD._STA] "
"\\\\\n"
"(Node 0xc3f6d160), AE_NOT_FOUND\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1432
#, fuzzy
msgid ""
"Often, these problems may be resolved by updating the BIOS to the latest "
"revision. Most console messages are harmless, but if there are other "
"problems, like the battery status is not working, these messages are a good "
"place to start looking for problems."
msgstr ""
"通常，这些问题可以通过将<acronym>BIOS</acronym>更新到最新版本来解决。大多数控制台消息是无害的，但如果存在其他问题，如电池状态不工作"
"，这些消息是开始查找问题的好地方。"

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:1433
#, no-wrap
msgid "Overriding the Default AML"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1436
msgid ""
"The BIOS bytecode, known as ACPI Machine Language (AML), is compiled from a "
"source language called ACPI Source Language (ASL). The AML is found in the "
"table known as the Differentiated System Description Table (DSDT)."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1438
msgid ""
"The goal of FreeBSD is for everyone to have working ACPI without any user "
"intervention. Workarounds are still being developed for common mistakes made "
"by BIOS vendors. The Microsoft(R) interpreter ([.filename]#acpi.sys# and "
"[.filename]#acpiec.sys#) does not strictly check for adherence to the "
"standard, and thus many BIOS vendors who only test ACPI under Windows(R) "
"never fix their ASL. FreeBSD developers continue to identify and document "
"which non-standard behavior is allowed by Microsoft(R)'s interpreter and "
"replicate it so that FreeBSD can work without forcing users to fix the ASL."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1440
msgid ""
"To help identify buggy behavior and possibly fix it manually, a copy can be "
"made of the system's ASL. To copy the system's ASL to a specified file name, "
"use `acpidump` with `-t`, to show the contents of the fixed tables, and "
"`-d`, to disassemble the AML:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1444
#, no-wrap
msgid "# acpidump -td > my.asl\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1447
msgid ""
"Some AML versions assume the user is running Windows(R). To override this, "
"set `hw.acpi.osname=_\"Windows 2009\"_` in [.filename]#/boot/loader.conf#, "
"using the most recent Windows(R) version listed in the ASL."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1449
#, fuzzy
msgid ""
"Other workarounds may require [.filename]#my.asl# to be customized. If this "
"file is edited, compile the new ASL using the following command. Warnings "
"can usually be ignored, but errors are bugs that will usually prevent ACPI "
"from working correctly."
msgstr ""
"一些解决方案可能需要修改<filename>my.asl</filename>。修改完成后需要使用以下命令将其编译城<acronym>AML</acron"
"ym>。一些警告可以忽略，但编译过程中出现的错误不可忽略，这些错误可能让 ACPI 工作异常。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1453
#, no-wrap
msgid "# iasl -f my.asl\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1456
msgid ""
"Including `-f` forces creation of the AML, even if there are errors during "
"compilation. Some errors, such as missing return statements, are "
"automatically worked around by the FreeBSD interpreter."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1458
msgid ""
"The default output filename for `iasl` is [.filename]#DSDT.aml#. Load this "
"file instead of the BIOS's buggy copy, which is still present in flash "
"memory, by editing [.filename]#/boot/loader.conf# as follows:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1463
#, fuzzy, no-wrap
msgid ""
"acpi_dsdt_load=\"YES\"\n"
"acpi_dsdt_name=\"/boot/DSDT.aml\"\n"
msgstr ""
"acpi_dsdt_load=\"YES\"\n"
"acpi_dsdt_name=\"/boot/DSDT.aml\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1466
msgid ""
"Be sure to copy [.filename]#DSDT.aml# to [.filename]#/boot#, then reboot the "
"system. If this fixes the problem, send a man:diff[1] of the old and new ASL "
"to {freebsd-acpi} so that developers can work around the buggy behavior in "
"[.filename]#acpica#."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:1468
#, no-wrap
msgid "Getting and Submitting Debugging Info"
msgstr "获取和提交调试信息"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1471
msgid ""
"The ACPI driver has a flexible debugging facility. A set of subsystems and "
"the level of verbosity can be specified. The subsystems to debug are "
"specified as layers and are broken down into components "
"(`ACPI_ALL_COMPONENTS`) and ACPI hardware support (`ACPI_ALL_DRIVERS`). The "
"verbosity of debugging output is specified as the level and ranges from just "
"report errors (`ACPI_LV_ERROR`) to everything (`ACPI_LV_VERBOSE`). The level "
"is a bitmask so multiple options can be set at once, separated by spaces. In "
"practice, a serial console should be used to log the output so it is not "
"lost as the console message buffer flushes. A full list of the individual "
"layers and levels is found in man:acpi[4]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1473
msgid ""
"Debugging output is not enabled by default. To enable it, add `options "
"ACPI_DEBUG` to the custom kernel configuration file if ACPI is compiled into "
"the kernel. Add `ACPI_DEBUG=1` to [.filename]#/etc/make.conf# to enable it "
"globally. If a module is used instead of a custom kernel, recompile just the "
"[.filename]#acpi.ko# module as follows:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1477
#, no-wrap
msgid "# cd /sys/modules/acpi/acpi && make clean && make ACPI_DEBUG=1\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1480
msgid ""
"Copy the compiled [.filename]#acpi.ko# to [.filename]#/boot/kernel# and add "
"the desired level and layer to [.filename]#/boot/loader.conf#. The entries "
"in this example enable debug messages for all ACPI components and hardware "
"drivers and output error messages at the least verbose level:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1485
#, fuzzy, no-wrap
msgid ""
"debug.acpi.layer=\"ACPI_ALL_COMPONENTS ACPI_ALL_DRIVERS\"\n"
"debug.acpi.level=\"ACPI_LV_ERROR\"\n"
msgstr ""
"debug.acpi.layer=\"ACPI_ALL_COMPONENTS ACPI_ALL_DRIVERS\"\n"
"debug.acpi.level=\"ACPI_LV_ERROR\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1488
msgid ""
"If the required information is triggered by a specific event, such as a "
"suspend and then resume, do not modify "
"[.filename]#/boot/loader.conf#. Instead, use `sysctl` to specify the layer "
"and level after booting and preparing the system for the specific event. The "
"variables which can be set using `sysctl` are named the same as the tunables "
"in [.filename]#/boot/loader.conf#."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1490
msgid ""
"Once the debugging information is gathered, it can be sent to {freebsd-acpi} "
"so that it can be used by the FreeBSD ACPI maintainers to identify the root "
"cause of the problem and to develop a solution."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1494
msgid ""
"Before submitting debugging information to this mailing list, ensure the "
"latest BIOS version is installed and, if available, the embedded controller "
"firmware version."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1497
msgid "When submitting a problem report, include the following information:"
msgstr "提交问题报告时，请包括以下信息："

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1499
msgid ""
"Description of the buggy behavior, including system type, model, and "
"anything that causes the bug to appear. Note as accurately as possible when "
"the bug began occurring if it is new."
msgstr "错误行为的描述，包括系统类型、模型以及导致出现 Bug 的任何内容。如果 Bug 是新的，则尽可能准确地记下该 Bug 何时开始发生。"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1500
msgid ""
"The output of `dmesg` after running `boot -v`, including any error messages "
"generated by the bug."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1501
msgid ""
"The `dmesg` output from `boot -v` with ACPI disabled, if disabling ACPI "
"helps to fix the problem."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1502
msgid "Output from `sysctl hw.acpi`. This lists which features the system offers."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1503
msgid ""
"The URL to a pasted version of the system's ASL. Do _not_ send the ASL "
"directly to the list as it can be very large. Generate a copy of the ASL by "
"running this command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1507
#, no-wrap
msgid "# acpidump -dt > name-system.asl\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1510
msgid ""
"  Substitute the login name for _name_ and manufacturer/model for "
"_system_. For example, use [.filename]#njl-FooCo6000.asl#."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1512
msgid ""
"Most FreeBSD developers watch the {freebsd-current}, but one should submit "
"problems to {freebsd-acpi} to be sure it is seen. Be patient when waiting "
"for a response. If the bug is not immediately apparent, submit a bug "
"report. When entering a PR, include the same information as requested "
"above. This helps developers to track the problem and resolve it. Do not "
"send a PR without emailing {freebsd-acpi} first as it is likely that the "
"problem has been reported before."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:1514
#, no-wrap
msgid "References"
msgstr "参考文献"

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1517
msgid "More information about ACPI may be found in the following locations:"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1519
msgid ""
"The FreeBSD ACPI Mailing List Archives "
"(https://lists.freebsd.org/pipermail/freebsd-acpi/[https://lists.freebsd.org/pipermail/freebsd-acpi/])"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1520
msgid ""
"The ACPI 2.0 Specification "
"(http://acpi.info/spec.htm[http://acpi.info/spec.htm])"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1520
msgid ""
"man:acpi[4], man:acpi_thermal[4], man:acpidump[8], man:iasl[8], and "
"man:acpidb[8]"
msgstr ""
