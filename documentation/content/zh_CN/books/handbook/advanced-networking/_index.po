# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR The FreeBSD Project
# This file is distributed under the same license as the FreeBSD Documentation package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
msgid ""
msgstr ""
"Project-Id-Version: FreeBSD Documentation VERSION\n"
"POT-Creation-Date: 2021-02-27 11:44-0300\n"
"PO-Revision-Date: 2021-04-12 20:53+0000\n"
"Last-Translator: Anonymous <noreply@weblate.org>\n"
"Language-Team: Chinese (Simplified) <https://translate-dev.freebsd.org/"
"projects/documentation/bookshandbookadvanced-networking_index/zh_CN/>\n"
"Language: zh_CN\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"
"X-Generator: Weblate 4.5.2\n"

#. type: YAML Front Matter: part
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1
#, no-wrap
msgid "IV. Network Communication"
msgstr ""

#. type: YAML Front Matter: title
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1
#, no-wrap
msgid "Chapter 32. Advanced Networking"
msgstr ""

#. type: Title =
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:9
#, no-wrap
msgid "Advanced Networking"
msgstr "高级网络配置"

#. type: Title ==
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:45
#, no-wrap
msgid "Synopsis"
msgstr "简介"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:48
msgid "This chapter covers a number of advanced networking topics."
msgstr "本章介绍许多高级网络主题。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:50
msgid "After reading this chapter, you will know:"
msgstr "读完本章节，你将会知道："

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:52
msgid "The basics of gateways and routes."
msgstr "网关和路由的基础知识。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:53
msgid "How to set up USB tethering."
msgstr "如何设置 USB 共享。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:54
msgid "How to set up IEEE(R) 802.11 and Bluetooth(R) devices."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:55
msgid "How to make FreeBSD act as a bridge."
msgstr "如何用 FreeBSD 做网桥。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:56
msgid "How to set up network PXE booting."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:57
msgid "How to set up IPv6 on a FreeBSD machine."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:58
msgid ""
"How to enable and utilize the features of the Common Address Redundancy "
"Protocol (CARP) in FreeBSD."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:59
msgid "How to configure multiple VLANs on FreeBSD."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:60
msgid "Configure bluetooth headset."
msgstr "配置蓝牙耳机。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:62
msgid "Before reading this chapter, you should:"
msgstr "在阅读这个章节之前，您应当："

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:64
msgid "Understand the basics of the [.filename]#/etc/rc# scripts."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:65
msgid "Be familiar with basic network terminology."
msgstr "熟悉基本网络术语。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:66
msgid ""
"Know how to configure and install a new FreeBSD kernel "
"(crossref:kernelconfig[kernelconfig,Configuring the FreeBSD Kernel])."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:67
msgid ""
"Know how to install additional third-party software "
"(crossref:ports[ports,Installing Applications: Packages and Ports])."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:69
#, no-wrap
msgid "Gateways and Routes"
msgstr "网关和路由"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:72
msgid ""
"_Routing_ is the mechanism that allows a system to find the network path to "
"another system. A _route_ is a defined pair of addresses which represent the "
"\"destination\" and a \"gateway\". The route indicates that when trying to "
"get to the specified destination, send the packets through the specified "
"gateway. There are three types of destinations: individual hosts, subnets, "
"and \"default\". The \"default route\" is used if no other routes "
"apply. There are also three types of gateways: individual hosts, interfaces, "
"also called links, and Ethernet hardware (MAC) addresses. Known routes are "
"stored in a routing table."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:74
msgid ""
"This section provides an overview of routing basics. It then demonstrates "
"how to configure a FreeBSD system as a router and offers some "
"troubleshooting tips."
msgstr "本节概述了路由基础知识。然后演示如何将 FreeBSD 系统配置为路由器，并提供一些故障排除提示。"

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:76
#, no-wrap
msgid "Routing Basics"
msgstr "路由基础概念"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:79
msgid "To view the routing table of a FreeBSD system, use man:netstat[1]:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:84
#, no-wrap
msgid ""
"% netstat -r\n"
"Routing tables\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:96
#, no-wrap
msgid ""
"Internet:\n"
"Destination      Gateway            Flags     Refs     Use     Netif "
"Expire\n"
"default          outside-gw         UGS        37      418       em0\n"
"localhost        localhost          UH          0      181       lo0\n"
"test0            0:e0:b5:36:cf:4f   UHLW        5    63288       re0     "
"77\n"
"10.20.30.255     link#1             UHLW        1     2421\n"
"example.com      link#1             UC          0        0\n"
"host1            0:e0:a8:37:8:1e    UHLW        3     4601       lo0\n"
"host2            0:e0:a8:37:8:1e    UHLW        0        5       lo0 =>\n"
"host2.example.com link#1            UC          0        0\n"
"224              link#1             UC          0        0\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:99
msgid "The entries in this example are as follows:"
msgstr "此示例中的条目含义如下所示："

#. type: Labeled list
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:100
#, no-wrap
msgid "default"
msgstr "default"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:102
#, fuzzy
msgid ""
"The first route in this table specifies the `default` route. When the local "
"system needs to make a connection to a remote host, it checks the routing "
"table to determine if a known path exists. If the remote host matches an "
"entry in the table, the system checks to see if it can connect using the "
"interface specified in that entry."
msgstr ""
"此表中的第一个路由指定<literal>default</literal>路由。当本地系统需要与远程主机建立连接时， "
"它会检查路由表以决定是否有已知的路径存在。 如果远程主机属于一个我们已知如何到达 (克隆的路由) 的子网内，那么系统会检查看沿着那个接口是否能够连接。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:104
#, fuzzy
msgid ""
"If the destination does not match an entry, or if all known paths fail, the "
"system uses the entry for the default route. For hosts on a local area "
"network, the `Gateway` field in the default route is set to the system which "
"has a direct connection to the Internet. When reading this entry, verify "
"that the `Flags` column indicates that the gateway is usable (`UG`)."
msgstr ""
"如果目标与路由表中的条目不匹配, 或者所有已知路径都失败, 则系统将使用默认路由的条目。对于局域网上的主机, "
"默认路由中的<literal>Gateway</literal>字段设置为直接连接到 Internet 的系统。读取此条目时, "
"请验证<literal>Flags</literal>列指示网关可用 (<literal>UG</literal>)。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:106
msgid ""
"The default route for a machine which itself is functioning as the gateway "
"to the outside world will be the gateway machine at the Internet Service "
"Provider (ISP)."
msgstr ""

#. type: Labeled list
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:107
#, no-wrap
msgid "localhost"
msgstr "localhost"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:109
msgid ""
"The second route is the `localhost` route. The interface specified in the "
"`Netif` column for `localhost` is [.filename]#lo0#, also known as the "
"loopback device. This indicates that all traffic for this destination should "
"be internal, rather than sending it out over the network."
msgstr ""

#. type: Labeled list
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:110
#, no-wrap
msgid "MAC address"
msgstr "MAC address"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:112
msgid ""
"The addresses beginning with `0:e0:` are MAC addresses. FreeBSD will "
"automatically identify any hosts, `test0` in the example, on the local "
"Ethernet and add a route for that host over the Ethernet interface, "
"[.filename]#re0#. This type of route has a timeout, seen in the `Expire` "
"column, which is used if the host does not respond in a specific amount of "
"time. When this happens, the route to this host will be automatically "
"deleted. These hosts are identified using the Routing Information Protocol "
"(RIP), which calculates routes to local hosts based upon a shortest path "
"determination."
msgstr ""

#. type: Labeled list
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:113
#, no-wrap
msgid "subnet"
msgstr "subnet"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:115
msgid ""
"FreeBSD will automatically add subnet routes for the local subnet. In this "
"example, `10.20.30.255` is the broadcast address for the subnet `10.20.30` "
"and `example.com` is the domain name associated with that subnet. The "
"designation `link#1` refers to the first Ethernet card in the machine."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:117
msgid ""
"Local network hosts and local subnets have their routes automatically "
"configured by a daemon called man:routed[8]. If it is not running, only "
"routes which are statically defined by the administrator will exist."
msgstr ""

#. type: Labeled list
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:118
#, no-wrap
msgid "host"
msgstr "host"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:120
msgid ""
"The `host1` line refers to the host by its Ethernet address. Since it is the "
"sending host, FreeBSD knows to use the loopback interface ([.filename]#lo0#) "
"rather than the Ethernet interface."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:122
msgid ""
"The two `host2` lines represent aliases which were created using "
"man:ifconfig[8]. The `=>` symbol after the [.filename]#lo0# interface says "
"that an alias has been set in addition to the loopback address. Such routes "
"only show up on the host that supports the alias and all other hosts on the "
"local network will have a `link#1` line for such routes."
msgstr ""

#. type: Labeled list
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:123
#, no-wrap
msgid "224"
msgstr "224"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:125
msgid "The final line (destination subnet `224`) deals with multicasting."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:127
msgid ""
"Various attributes of each route can be seen in the `Flags` "
"column. <<routeflags>> summarizes some of these flags and their meanings:"
msgstr ""

#. type: Block title
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:129
#, no-wrap
msgid "Commonly Seen Routing Table Flags"
msgstr "常见路由表标记"

#. type: Table
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:155
#, no-wrap
msgid ""
"| Command\n"
"| Purpose\n"
"\n"
"|U\n"
"|The route is active (up).\n"
"\n"
"|H\n"
"|The route destination is a single host.\n"
"\n"
"|G\n"
"|Send anything for this destination on to this gateway, which will figure "
"out from there where to send it.\n"
"\n"
"|S\n"
"|This route was statically configured.\n"
"\n"
"|C\n"
"|Clones a new route based upon this route for machines to connect to. This "
"type of route is normally used for local networks.\n"
"\n"
"|W\n"
"|The route was auto-configured based upon a local area network (clone) "
"route.\n"
"\n"
"|L\n"
"|Route involves references to Ethernet (link) hardware.\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:158
msgid ""
"On a FreeBSD system, the default route can defined in "
"[.filename]#/etc/rc.conf# by specifying the IP address of the default "
"gateway:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:162
#, fuzzy, no-wrap
msgid "defaultrouter=\"10.20.30.1\"\n"
msgstr "defaultrouter=\"10.20.30.1\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:165
msgid "It is also possible to manually add the route using `route`:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:169
#, no-wrap
msgid "# route add default 10.20.30.1\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:172
msgid ""
"Note that manually added routes will not survive a reboot. For more "
"information on manual manipulation of network routing tables, refer to "
"man:route[8]."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:174
#, no-wrap
msgid "Configuring a Router with Static Routes"
msgstr "设定路由器使用静态路由"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:177
#, fuzzy
msgid ""
"A FreeBSD system can be configured as the default gateway, or router, for a "
"network if it is a dual-homed system. A dual-homed system is a host which "
"resides on at least two different networks. Typically, each network is "
"connected to a separate network interface, though IP aliasing can be used to "
"bind multiple addresses, each on a different subnet, to one physical "
"interface."
msgstr ""
"如果一个 FreeBSD 系统是一个双宿主系统， 则可以被配置为网络的默认网关或路由器。双宿主系统是指至少驻留在两个不同的网络上的主机。通常情况下， "
"每一个网络都连接到一个独立的网络接口上， 虽然可以使用 <acronym>IP</acronym> 别名来绑定多个地址， 每个地址都在不同的子网上， "
"并将其绑定到一个物理接口上。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:179
#, fuzzy
msgid ""
"In order for the system to forward packets between interfaces, FreeBSD must "
"be configured as a router. Internet standards and good engineering practice "
"prevent the FreeBSD Project from enabling this feature by default, but it "
"can be configured to start at boot by adding this line to "
"[.filename]#/etc/rc.conf#:"
msgstr ""
"网络路由器只是一个将数据包从一个接口转发到另一个接口的系统。 互联网标准和良好的工程实践阻止了 FreeBSD 计划在 FreeBSD 中把它置成默认值。"
"您在可以在 <citerefentry><refentrytitle>rc."
"conf</refentrytitle><manvolnum>5</manvolnum></citerefentry> 中改变下列变量的值为 "
"<literal>YES</literal>，使这个功能生效："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:183
#, fuzzy, no-wrap
msgid ""
"gateway_enable=\"YES\"          # Set to YES if this host will be a "
"gateway\n"
msgstr ""
"gateway_enable=\"YES\"          # Set to YES if this host will be a gateway\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:186
msgid ""
"To enable routing now, set the man:sysctl[8] variable "
"`net.inet.ip.forwarding` to `1`. To stop routing, reset this variable to "
"`0`."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:188
msgid ""
"The routing table of a router needs additional routes so it knows how to "
"reach other networks. Routes can be either added manually using static "
"routes or routes can be automatically learned using a routing "
"protocol. Static routes are appropriate for small networks and this section "
"describes how to add a static routing entry for a small network."
msgstr ""
"路由器中的路由表需要有路由才知道将数据传向何处。路由可以手动添加（静态路由），也可以使用路由协议动态获取。静态路由适用于小型网络，本节介绍如何为小型网络添"
"加静态路由。"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:192
msgid ""
"For large networks, static routes quickly become unscalable. FreeBSD comes "
"with the standard BSD routing daemon man:routed[8], which provides the "
"routing protocols RIP, versions 1 and 2, and IRDP. Support for the BGP and "
"OSPF routing protocols can be installed using the package:net/zebra[] "
"package or port."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:195
msgid "Consider the following network:"
msgstr "请考虑以下网络："

#. type: Target for macro image
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:196
#, no-wrap
msgid "static-routes.png"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:199
msgid ""
"In this scenario, `RouterA` is a FreeBSD machine that is acting as a router "
"to the rest of the Internet. It has a default route set to `10.0.0.1` which "
"allows it to connect with the outside world. `RouterB` is already configured "
"to use `192.168.1.1` as its default gateway."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:201
msgid ""
"Before adding any static routes, the routing table on `RouterA` looks like "
"this:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:206
#, no-wrap
msgid ""
"% netstat -nr\n"
"Routing tables\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:213
#, no-wrap
msgid ""
"Internet:\n"
"Destination        Gateway            Flags    Refs      Use  Netif  "
"Expire\n"
"default            10.0.0.1           UGS         0    49378    xl0\n"
"127.0.0.1          127.0.0.1          UH          0        6    lo0\n"
"10.0.0.0/24        link#1             UC          0        0    xl0\n"
"192.168.1.0/24     link#2             UC          0        0    xl1\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:216
msgid ""
"With the current routing table, `RouterA` does not have a route to the "
"`192.168.2.0/24` network. The following command adds the `Internal Net 2` "
"network to ``RouterA``'s routing table using `192.168.1.2` as the next hop:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:220
#, no-wrap
msgid "# route add -net 192.168.2.0/24 192.168.1.2\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:223
msgid ""
"Now, `RouterA` can reach any host on the `192.168.2.0/24` network. However, "
"the routing information will not persist if the FreeBSD system reboots. If a "
"static route needs to be persistent, add it to [.filename]#/etc/rc.conf#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:229
#, fuzzy, no-wrap
msgid ""
"# Add Internal Net 2 as a persistent static route\n"
"static_routes=\"internalnet2\"\n"
"route_internalnet2=\"-net 192.168.2.0/24 192.168.1.2\"\n"
msgstr ""
"# Add Internal Net 2 as a persistent static route\n"
"static_routes=\"internalnet2\"\n"
"route_internalnet2=\"-net 192.168.2.0/24 192.168.1.2\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:232
msgid ""
"The `static_routes` configuration variable is a list of strings separated by "
"a space, where each string references a route name. The variable "
"`route_internalnet2` contains the static route for that route name."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:234
msgid ""
"Using more than one string in `static_routes` creates multiple static "
"routes. The following shows an example of adding static routes for the "
"`192.168.0.0/24` and `192.168.1.0/24` networks:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:240
#, fuzzy, no-wrap
msgid ""
"static_routes=\"net1 net2\"\n"
"route_net1=\"-net 192.168.0.0/24 192.168.0.1\"\n"
"route_net2=\"-net 192.168.1.0/24 192.168.1.1\"\n"
msgstr ""
"static_routes=\"net1 net2\"\n"
"route_net1=\"-net 192.168.0.0/24 192.168.0.1\"\n"
"route_net2=\"-net 192.168.1.0/24 192.168.1.1\"\n"

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:243
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1218
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1627
#, no-wrap
msgid "Troubleshooting"
msgstr "故障排除"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:246
#, fuzzy
msgid ""
"When an address space is assigned to a network, the service provider "
"configures their routing tables so that all traffic for the network will be "
"sent to the link for the site. But how do external sites know to send their "
"packets to the network's ISP?"
msgstr ""
"当您得到一个分配给您的网络的地址空间时， ISP(网络服务商)会设置它们的路由表， 这样指向您子网的数据就会通过 PPP 连接下传到您的网络。 "
"但是其它跨越国界的网络是如何知道将数据传给您的 ISP 的呢？"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:248
msgid ""
"There is a system that keeps track of all assigned address spaces and "
"defines their point of connection to the Internet backbone, or the main "
"trunk lines that carry Internet traffic across the country and around the "
"world. Each backbone machine has a copy of a master set of tables, which "
"direct traffic for a particular network to a specific backbone carrier, and "
"from there down the chain of service providers until it reaches a particular "
"network."
msgstr ""
"有一个系统(很像分布式 DNS 信息系统)， 它一直跟踪被分配的地址空间， 并说明它们连接到互联网骨干(Internet backbone)的点。 "
"<quote>骨干(Backbone)</quote> 指的是负责全世界和跨国的传输的主要干线。 每一台骨干主机(backbone "
"machine)有一份主要表集的副本， 它将发送给特定网络的数据导向相应的骨干载体上(backbone carrier)， "
"从结点往下遍历服务提供商链，直到数据到达您的网络。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:250
msgid ""
"It is the task of the service provider to advertise to the backbone sites "
"that they are the point of connection, and thus the path inward, for a "
"site. This is known as route propagation."
msgstr "服务提供商的任务是向骨干网络广播，以声明它们就是通向您的网点的连接结点 (以及进入的路径)。这就是路由传播。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:252
#, fuzzy
msgid ""
"Sometimes, there is a problem with route propagation and some sites are "
"unable to connect. Perhaps the most useful command for trying to figure out "
"where routing is breaking down is `traceroute`. It is useful when `ping` "
"fails."
msgstr ""
"有时候，路由传播会有一个问题，一些网络无法与您连接。 或许能帮您找出路由是在哪里中断的最有用的命令就是 <citerefentry><refentryti"
"tle>traceroute</refentrytitle><manvolnum>8</manvolnum></citerefentry>了。当您无法与远"
"程主机连接时， 这个命令一样有用(例如 "
"<citerefentry><refentrytitle>ping</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> 失败)。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:254
msgid ""
"When using `traceroute`, include the address of the remote host to connect "
"to. The output will show the gateway hosts along the path of the attempt, "
"eventually either reaching the target host, or terminating because of a lack "
"of connection. For more information, refer to man:traceroute[8]."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:256
#, no-wrap
msgid "Multicast Considerations"
msgstr "多播路由"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:259
msgid ""
"FreeBSD natively supports both multicast applications and multicast "
"routing. Multicast applications do not require any special configuration in "
"order to run on FreeBSD. Support for multicast routing requires that the "
"following option be compiled into a custom kernel:"
msgstr ""
"FreeBSD 一开始就支持多播应用软件和多播路由选择。 多播程序并不要求FreeBSD的任何特殊的配置， "
"就可以工作得很好。多播路由需要支持被编译入内核："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:263
#, fuzzy, no-wrap
msgid "options MROUTING\n"
msgstr "options MROUTING\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:266
msgid ""
"The multicast routing daemon, mrouted can be installed using the "
"package:net/mrouted[] package or port. This daemon implements the DVMRP "
"multicast routing protocol and is configured by editing "
"[.filename]#/usr/local/etc/mrouted.conf# in order to set up the tunnels and "
"DVMRP. The installation of mrouted also installs map-mbone and mrinfo, as "
"well as their associated man pages. Refer to these for configuration "
"examples."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:270
msgid ""
"DVMRP has largely been replaced by the PIM protocol in many multicast "
"installations. Refer to man:pim[4] for more information."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:273
#, no-wrap
msgid "Wireless Networking"
msgstr "无线网络"

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:275
#, no-wrap
msgid "Wireless Networking Basics"
msgstr "无线网络基础"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:278
msgid ""
"Most wireless networks are based on the IEEE(R) 802.11 standards. A basic "
"wireless network consists of multiple stations communicating with radios "
"that broadcast in either the 2.4GHz or 5GHz band, though this varies "
"according to the locale and is also changing to enable communication in the "
"2.3GHz and 4.9GHz ranges."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:280
msgid ""
"802.11 networks are organized in two ways. In _infrastructure mode_, one "
"station acts as a master with all the other stations associating to it, the "
"network is known as a BSS, and the master station is termed an access point "
"(AP). In a BSS, all communication passes through the AP; even when one "
"station wants to communicate with another wireless station, messages must go "
"through the AP. In the second form of network, there is no master and "
"stations communicate directly. This form of network is termed an IBSS and is "
"commonly known as an _ad-hoc network_."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:282
msgid ""
"802.11 networks were first deployed in the 2.4GHz band using protocols "
"defined by the IEEE(R) 802.11 and 802.11b standard. These specifications "
"include the operating frequencies and the MAC layer characteristics, "
"including framing and transmission rates, as communication can occur at "
"various rates. Later, the 802.11a standard defined operation in the 5GHz "
"band, including different signaling mechanisms and higher transmission "
"rates. Still later, the 802.11g standard defined the use of 802.11a "
"signaling and transmission mechanisms in the 2.4GHz band in such a way as to "
"be backwards compatible with 802.11b networks."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:284
#, fuzzy
msgid ""
"Separate from the underlying transmission techniques, 802.11 networks have a "
"variety of security mechanisms. The original 802.11 specifications defined a "
"simple security protocol called WEP. This protocol uses a fixed pre-shared "
"key and the RC4 cryptographic cipher to encode data transmitted on a "
"network. Stations must all agree on the fixed key in order to "
"communicate. This scheme was shown to be easily broken and is now rarely "
"used except to discourage transient users from joining networks. Current "
"security practice is given by the IEEE(R) 802.11i specification that defines "
"new cryptographic ciphers and an additional protocol to authenticate "
"stations to an access point and exchange keys for data "
"communication. Cryptographic keys are periodically refreshed and there are "
"mechanisms for detecting and countering intrusion attempts. Another security "
"protocol specification commonly used in wireless networks is termed WPA, "
"which was a precursor to 802.11i. WPA specifies a subset of the requirements "
"found in 802.11i and is designed for implementation on legacy "
"hardware. Specifically, WPA requires only the TKIP cipher that is derived "
"from the original WEP cipher. 802.11i permits use of TKIP but also requires "
"support for a stronger cipher, AES-CCM, for encrypting data. The AES cipher "
"was not required in WPA because it was deemed too computationally costly to "
"be implemented on legacy hardware."
msgstr ""
"除了底层传输技术之外，802.11网络还有各种安全机制。最初的802.11规范定义了一个简单的安全协议，称为WEP。该协议使用一个固定的预共享密钥和RC4"
"加密密码来对网络上传输的数据进行编码。各站必须在固定密钥上达成一致，才能进行通信。这种方案被证明是很容易被破解的，现在除了为了阻止瞬时用户加入网络，很少使"
"用这种方案。目前的安全实践是由IEEE® 802.11i规范给出的，该规范定义了新的加密密码器和额外的协议，用于认证站与接入点的身份，并交换数据通信的密钥"
"。加密密钥会定期刷新，并有检测和反击入侵企图的机制。无线网络中常用的另一种安全协议规范是WPA，它是802.11i的前身。WPA规定了802."
"11i中的要求的一个子集，是为在传统硬件上实现而设计的。具体来说，WPA只需要从原始的WEP密码中提取的TKIP密码。802.11i允许使用TKIP"
"，但也要求支持更强的密码AES-CCM，用于加密数据。WPA中不需要AES密码，因为它被认为计算成本太高，无法在传统硬件上实现。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:286
#, fuzzy
msgid ""
"The other standard to be aware of is 802.11e. It defines protocols for "
"deploying multimedia applications, such as streaming video and voice over IP "
"(VoIP), in an 802.11 network. Like 802.11i, 802.11e also has a precursor "
"specification termed WME (later renamed WMM) that has been defined by an "
"industry group as a subset of 802.11e that can be deployed now to enable "
"multimedia applications while waiting for the final ratification of "
"802.11e. The most important thing to know about 802.11e and WME/WMM is that "
"it enables prioritized traffic over a wireless network through Quality of "
"Service (QoS) protocols and enhanced media access protocols. Proper "
"implementation of these protocols enables high speed bursting of data and "
"prioritized traffic flow."
msgstr ""
"除了前面介绍的那些协议标准之外， 还有一种需要介绍的标准是 802.11e。 它定义了用于在 802.11 网络上运行多媒体应用， 如视频流和使用 IP "
"传送的语音 (VoIP) 的协议。 与 802.11i 类似， 802.11e 也有一个前身标准， 通常称作 WME (后改名为 WMM)， "
"它也是由业界组织定义的 802.11e 的子集， 以便能够在旧式硬件中使用多媒体应用。 关于 802.11e 与 WME/WMM 之间的另一项重要区别是，"
" 前者允许对流量通过服务品质 (QoS) 协议和增强媒体访问协议来安排优先级。 对于这些协议的正确实现， 能够实现高速突发数据和流量分级。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:288
#, fuzzy
msgid ""
"FreeBSD supports networks that operate using 802.11a, 802.11b, and "
"802.11g. The WPA and 802.11i security protocols are likewise supported (in "
"conjunction with any of 11a, 11b, and 11g) and QoS and traffic "
"prioritization required by the WME/WMM protocols are supported for a limited "
"set of wireless devices."
msgstr ""
"FreeBSD 支持采用 802.11a, 802.11b 和 802.11g 的网络。 类似地， 它也支持 WPA 和 802.11i 安全协议 (与 "
"11a、 11b 和 11g 配合)， 而 WME/WMM 所需要的 QoS 和流量分级， 则在部分无线设备上提供了支持。"

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:290
#, no-wrap
msgid "Quick Start"
msgstr "快速开始"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:293
msgid ""
"Connecting a computer to an existing wireless network is a very common "
"situation. This procedure shows the steps required."
msgstr "将计算机连接到无线网络是十分常见的操作，本章将介绍如何将计算机连接到无线网络。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:296
msgid ""
"Obtain the SSID (Service Set Identifier) and PSK (Pre-Shared Key) for the "
"wireless network from the network administrator."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:297
msgid ""
"Identify the wireless adapter. The FreeBSD [.filename]#GENERIC# kernel "
"includes drivers for many common wireless adapters. If the wireless adapter "
"is one of those models, it will be shown in the output from man:ifconfig[8]:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:301
#, no-wrap
msgid "% ifconfig | grep -B3 -i wireless\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:304
#, fuzzy
msgid "  On FreeBSD 11 or higher, use this command instead:"
msgstr "  在 FreeBSD 11 或更高版本上，改用此命令："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:308
#, no-wrap
msgid "% sysctl net.wlan.devices\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:311
#, fuzzy
msgid ""
"  If a wireless adapter is not listed, an additional kernel module might be "
"required, or it might be a model not supported by FreeBSD."
msgstr "  如果未列出无线适配器，则可能需要额外的内核模块，也可能是该网卡不支持 FreeBSD。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:313
msgid "  This example shows the Atheros `ath0` wireless adapter."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:314
msgid ""
"Add an entry for this network to [.filename]#/etc/wpa_supplicant.conf#. If "
"the file does not exist, create it. Replace _myssid_ and _mypsk_ with the "
"SSID and PSK provided by the network administrator."
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:321
#, no-wrap
msgid ""
"network={\n"
"\tssid=\"myssid\"\n"
"\tpsk=\"mypsk\"\n"
"}\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:324
#, fuzzy
msgid ""
"Add entries to [.filename]#/etc/rc.conf# to configure the network on "
"startup:"
msgstr ""
"接下来， 在 <filename>/etc/rc.conf</filename> 中， 我们将指定无线设备的配置， 令其采用 WPA， 并通过 DHCP "
"来获取 IP 地址："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:329
#, no-wrap
msgid ""
"wlans_ath0=\"wlan0\"\n"
"ifconfig_wlan0=\"WPA SYNCDHCP\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:332
msgid ""
"Restart the computer, or restart the network service to connect to the "
"network:"
msgstr "重新启动计算机，或重新启动网络服务以连接到网络："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:336
#, no-wrap
msgid "# service netif restart\n"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:339
#, no-wrap
msgid "Basic Setup"
msgstr "基础设定"

#. type: Title ====
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:341
#, no-wrap
msgid "Kernel Configuration"
msgstr "内核配置"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:344
msgid ""
"To use wireless networking, a wireless networking card is needed and the "
"kernel needs to be configured with the appropriate wireless networking "
"support. The kernel is separated into multiple modules so that only the "
"required support needs to be configured."
msgstr ""
"要使用无线网络， 您需要一块无线网卡， 并适当地配置内核令其提供无线网络支持。 后者被分成了多个模块， 因此您只需配置使用您所需要的软件就可以了。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:346
msgid ""
"The most commonly used wireless devices are those that use parts made by "
"Atheros. These devices are supported by man:ath[4] and require the following "
"line to be added to [.filename]#/boot/loader.conf#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:350
#, fuzzy, no-wrap
msgid "if_ath_load=\"YES\"\n"
msgstr "if_ath_load=\"YES\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:353
msgid ""
"The Atheros driver is split up into three separate pieces: the driver "
"(man:ath[4]), the hardware support layer that handles chip-specific "
"functions (man:ath_hal[4]), and an algorithm for selecting the rate for "
"transmitting frames. When this support is loaded as kernel modules, any "
"dependencies are automatically handled. To load support for a different type "
"of wireless device, specify the module for that device. This example is for "
"devices based on the Intersil Prism parts (man:wi[4]) driver:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:357
#, fuzzy, no-wrap
msgid "if_wi_load=\"YES\"\n"
msgstr "if_wi_load=\"YES\"\n"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:362
msgid ""
"The examples in this section use an man:ath[4] device and the device name in "
"the examples must be changed according to the configuration. A list of "
"available wireless drivers and supported adapters can be found in the "
"FreeBSD Hardware Notes, available on the "
"https://www.FreeBSD.org/releases/[Release Information] page of the FreeBSD "
"website. If a native FreeBSD driver for the wireless device does not exist, "
"it may be possible to use the Windows(R) driver with the help of the "
"crossref:config[config-network-ndis,NDIS] driver wrapper."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:365
msgid ""
"In addition, the modules that implement cryptographic support for the "
"security protocols to use must be loaded. These are intended to be "
"dynamically loaded on demand by the man:wlan[4] module, but for now they "
"must be manually configured. The following modules are available: "
"man:wlan_wep[4], man:wlan_ccmp[4], and man:wlan_tkip[4]. The "
"man:wlan_ccmp[4] and man:wlan_tkip[4] drivers are only needed when using the "
"WPA or 802.11i security protocols. If the network does not use encryption, "
"man:wlan_wep[4] support is not needed. To load these modules at boot time, "
"add the following lines to [.filename]#/boot/loader.conf#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:371
#, fuzzy, no-wrap
msgid ""
"wlan_wep_load=\"YES\"\n"
"wlan_ccmp_load=\"YES\"\n"
"wlan_tkip_load=\"YES\"\n"
msgstr ""
"wlan_wep_load=\"YES\"\n"
"wlan_ccmp_load=\"YES\"\n"
"wlan_tkip_load=\"YES\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:374
msgid ""
"Once this information has been added to [.filename]#/boot/loader.conf#, "
"reboot the FreeBSD box. Alternately, load the modules by hand using "
"man:kldload[8]."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:378
msgid ""
"For users who do not want to use modules, it is possible to compile these "
"drivers into the kernel by adding the following lines to a custom kernel "
"configuration file:"
msgstr "如果不想加载模块， 也可以将这些驱动编译到内核中， 方法是在内核的编译配置文件中加入下面的配置："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:390
#, fuzzy, no-wrap
msgid ""
"device wlan              # 802.11 support\n"
"device wlan_wep          # 802.11 WEP support\n"
"device wlan_ccmp         # 802.11 CCMP support\n"
"device wlan_tkip         # 802.11 TKIP support\n"
"device wlan_amrr         # AMRR transmit rate control algorithm\n"
"device ath               # Atheros pci/cardbus NIC's\n"
"device ath_hal           # pci/cardbus chip support\n"
"options AH_SUPPORT_AR5416 # enable AR5416 tx/rx descriptors\n"
"device ath_rate_sample   # SampleRate tx rate control for ath\n"
msgstr ""
"device wlan              # 802.11 support\n"
"device wlan_wep          # 802.11 WEP support\n"
"device wlan_ccmp         # 802.11 CCMP support\n"
"device wlan_tkip         # 802.11 TKIP support\n"
"device wlan_amrr         # AMRR transmit rate control algorithm\n"
"device ath               # Atheros pci/cardbus NIC's\n"
"device ath_hal           # pci/cardbus chip support\n"
"options AH_SUPPORT_AR5416 # enable AR5416 tx/rx descriptors\n"
"device ath_rate_sample   # SampleRate tx rate control for ath\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:393
msgid ""
"With this information in the kernel configuration file, recompile the kernel "
"and reboot the FreeBSD machine."
msgstr "使用内核配置文件中的此信息，重新编译内核并重新启动 FreeBSD 计算机。"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:396
msgid ""
"Information about the wireless device should appear in the boot messages, "
"like this:"
msgstr "在系统启动之后， 您会在引导时给出的信息中， 找到类似下面这样的关于无线设备的信息："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:402
#, no-wrap
msgid ""
"ath0: <Atheros 5212> mem 0x88000000-0x8800ffff irq 11 at device 0.0 on "
"cardbus1\n"
"ath0: [ITHREAD]\n"
"ath0: AR2413 mac 7.9 RF2413 phy 4.5\n"
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:404
#, no-wrap
msgid "Setting the Correct Region"
msgstr "设置正确的区域"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:407
msgid ""
"Since the regulatory situation is different in various parts of the world, "
"it is necessary to correctly set the domains that apply to your location to "
"have the correct information about what channels can be used."
msgstr "由于世界各地的监管情况不同，因此有必要正确设置适用于您所在位置的域，以便获取有关可以使用哪些信道的正确信息。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:409
msgid ""
"The available region definitions can be found in "
"[.filename]#/etc/regdomain.xml#. To set the data at runtime, use `ifconfig`:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:413
#, no-wrap
msgid "# ifconfig wlan0 regdomain ETSI country AT\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:416
msgid "To persist the settings, add it to [.filename]#/etc/rc.conf#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:420
#, no-wrap
msgid "# sysrc create_args_wlan0=\"country AT regdomain ETSI\"\n"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:422
#, no-wrap
msgid "Infrastructure Mode"
msgstr "Infrastructure 模式"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:425
#, fuzzy
msgid ""
"Infrastructure (BSS) mode is the mode that is typically used. In this mode, "
"a number of wireless access points are connected to a wired network. Each "
"wireless network has its own name, called the SSID. Wireless clients connect "
"to the wireless access points."
msgstr ""
"通常的情形中使用的是 infrastructure 模式或称 BSS 模式。 在这种模式中， 有一系列无线访问点接入了有线网络。 "
"每个无线网都会有自己的名字， 这个名字称作网络的 SSID。 无线客户端都通过无线访问点来完成接入。"

#. type: Title ====
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:426
#, no-wrap
msgid "FreeBSD Clients"
msgstr "FreeBSD客户端"

#. type: Title =====
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:428
#, no-wrap
msgid "How to Find Access Points"
msgstr "如何查找无线接入点"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:431
msgid ""
"To scan for available networks, use man:ifconfig[8]. This request may take a "
"few moments to complete as it requires the system to switch to each "
"available wireless frequency and probe for available access points. Only the "
"superuser can initiate a scan:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:439
#, no-wrap
msgid ""
"# ifconfig wlan0 create wlandev ath0\n"
"# ifconfig wlan0 up scan\n"
"SSID/MESH ID    BSSID              CHAN RATE   S:N     INT CAPS\n"
"dlinkap         00:13:46:49:41:76   11   54M -90:96   100 EPS  WPA WME\n"
"freebsdap       00:11:95:c3:0d:ac    1   54M -83:96   100 EPS  WPA\n"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:444
msgid ""
"The interface must be `up` before it can scan. Subsequent scan requests do "
"not require the interface to be marked as up again."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:447
msgid ""
"The output of a scan request lists each BSS/IBSS network found. Besides "
"listing the name of the network, the `SSID`, the output also shows the "
"`BSSID`, which is the MAC address of the access point. The `CAPS` field "
"identifies the type of each network and the capabilities of the stations "
"operating there:"
msgstr ""

#. type: Block title
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:448
#, no-wrap
msgid "Station Capability Codes"
msgstr "站台功能代号"

#. type: Table
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:468
#, no-wrap
msgid ""
"| Capability Code\n"
"| Meaning\n"
"\n"
"|`E`\n"
"|Extended Service Set (ESS). Indicates that the station is part of an "
"infrastructure network rather than an IBSS/ad-hoc network.\n"
"\n"
"|`I`\n"
"|IBSS/ad-hoc network. Indicates that the station is part of an ad-hoc "
"network rather than an ESS network.\n"
"\n"
"|`P`\n"
"|Privacy. Encryption is required for all data frames exchanged within the "
"BSS using cryptographic means such as WEP, TKIP or AES-CCMP.\n"
"\n"
"|`S`\n"
"|Short Preamble. Indicates that the network is using short preambles, "
"defined in 802.11b High Rate/DSSS PHY, and utilizes a 56 bit sync field "
"rather than the 128 bit field used in long preamble mode.\n"
"\n"
"|`s`\n"
"|Short slot time. Indicates that the 802.11g network is using a short slot "
"time because there are no legacy (802.11b) stations present.\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:471
msgid "One can also display the current list of known networks with:"
msgstr "要显示目前已知的网络， 可以使用下面的命令："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:475
#, no-wrap
msgid "# ifconfig wlan0 list scan\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:478
#, fuzzy
msgid ""
"This information may be updated automatically by the adapter or manually "
"with a `scan` request. Old data is automatically removed from the cache, so "
"over time this list may shrink unless more scans are done."
msgstr ""
"这些信息可能会由无线适配器自动更新， 也可使用 <option>scan</option> 手动更新。 快取缓存中的旧数据会自动删除， "
"因此除非进行更多扫描， 这个列表会逐渐缩小。"

#. type: Title ====
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:479
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1003
#, no-wrap
msgid "Basic Settings"
msgstr "基本设置"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:482
#, fuzzy
msgid ""
"This section provides a simple example of how to make the wireless network "
"adapter work in FreeBSD without encryption. Once familiar with these "
"concepts, it is strongly recommend to use <<network-wireless-wpa,WPA>> to "
"set up the wireless network."
msgstr ""
"在这一节中我们将展示一个简单的例子来介绍如何让无线网络适配器在 FreeBSD 中以不加密的方式工作。 在您熟悉了这些概念之后， "
"我们强烈建议您在实际的使用中采用 <link linkend=\"network-wireless-wpa\">WPA</link> 来配置网络。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:484
#, fuzzy
msgid ""
"There are three basic steps to configure a wireless network: select an "
"access point, authenticate the station, and configure an IP address. The "
"following sections discuss each step."
msgstr "配置无线网络的过程可分为三个基本步骤： 选择无线访问点、 验证您的通讯站身份， 以及配置 IP 地址。 下面的几节中将分步骤地介绍它们。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:486
msgid "====== Selecting an Access Point"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:488
#, fuzzy
msgid ""
"Most of the time, it is sufficient to let the system choose an access point "
"using the builtin heuristics. This is the default behavior when an interface "
"is marked as up or it is listed in [.filename]#/etc/rc.conf#:"
msgstr ""
"多数时候让系统以内建的探测方式选择无线访问点就可以了。 这是在您将网络接口置为 up 或在 <filename>/etc/rc.conf</"
"filename> 中配置 IP 地址时的默认方式， 例如："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:493
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:546
#, fuzzy, no-wrap
msgid ""
"wlans_ath0=\"wlan0\"\n"
"ifconfig_wlan0=\"DHCP\"\n"
msgstr ""
"wlans_ath0=\"wlan0\"\n"
"ifconfig_wlan0=\"DHCP\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:496
msgid ""
"If there are multiple access points, a specific one can be selected by its "
"SSID:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:501
#, no-wrap
msgid ""
"wlans_ath0=\"wlan0\"\n"
"ifconfig_wlan0=\"ssid your_ssid_here DHCP\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:504
#, fuzzy
msgid ""
"In an environment where there are multiple access points with the same SSID, "
"which is often done to simplify roaming, it may be necessary to associate to "
"one specific device. In this case, the BSSID of the access point can be "
"specified, with or without the SSID:"
msgstr ""
"在某些环境中， 多个访问点可能会使用同样的 SSID (通常， 这样做的目的是简化漫游)， 这时可能就需要与某个具体的设备关联了。 这种情况下， "
"您还应指定无线访问点的 BSSID (这时可以不指定 SSID)："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:509
#, no-wrap
msgid ""
"wlans_ath0=\"wlan0\"\n"
"ifconfig_wlan0=\"ssid your_ssid_here bssid xx:xx:xx:xx:xx:xx DHCP\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:512
#, fuzzy
msgid ""
"There are other ways to constrain the choice of an access point, such as "
"limiting the set of frequencies the system will scan on. This may be useful "
"for a multi-band wireless card as scanning all the possible channels can be "
"time-consuming. To limit operation to a specific band, use the `mode` "
"parameter:"
msgstr ""
"除此之外， 还有一些其它的方法能够约束查找无线访问点的范围， 例如限制系统扫描的频段， 等等。 如果您的无线网卡支持多个频段， 这样做可能会非常有用， "
"因为扫描全部可用频段是一个十分耗时的过程。 要将操作限制在某个具体的频段， 可以使用 <option>mode</option> 参数； 例如："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:517
#, no-wrap
msgid ""
"wlans_ath0=\"wlan0\"\n"
"ifconfig_wlan0=\"mode 11g ssid your_ssid_here DHCP\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:520
msgid ""
"This example will force the card to operate in 802.11g, which is defined "
"only for 2.4GHz frequencies so any 5GHz channels will not be "
"considered. This can also be achieved with the `channel` parameter, which "
"locks operation to one specific frequency, and the `chanlist` parameter, to "
"specify a list of channels for scanning. More information about these "
"parameters can be found in man:ifconfig[8]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:522
msgid "====== Authentication"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:524
#, fuzzy
msgid ""
"Once an access point is selected, the station needs to authenticate before "
"it can pass data. Authentication can happen in several ways. The most common "
"scheme, open authentication, allows any station to join the network and "
"communicate. This is the authentication to use for test purposes the first "
"time a wireless network is setup. Other schemes require cryptographic "
"handshakes to be completed before data traffic can flow, either using "
"pre-shared keys or secrets, or more complex schemes that involve backend "
"services such as RADIUS. Open authentication is the default setting. The "
"next most common setup is WPA-PSK, also known as WPA Personal, which is "
"described in <<network-wireless-wpa-wpa-psk>>."
msgstr ""
"一旦您选定了无线访问点， 您的通讯站就需要完成身份验证， 以便开始发送和接收数据。 身份验证可以通过许多方式进行， 最常用的一种方式称为开放式验证， "
"它允许任意通讯站加入网络并相互通信。 这种验证方式只应在您第一次配置无线网络进行测试时使用。 其它的验证方式则需要在进行数据通讯之前， "
"首先进行密钥协商握手； 这些方式要么使用预先分发的密钥或密码， 要么是用更复杂一些的后台服务， 如 RADIUS。 绝大多数用户会使用默认的开放式验证， "
"而第二多的则是 WPA-PSK， 它也称为个人 WPA， 在 <xref linkend=\"network-wireless-wpa-wpa-psk\""
"/> 中将进行介绍。"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:528
msgid ""
"If using an Apple(R) AirPort(R) Extreme base station for an access point, "
"shared-key authentication together with a WEP key needs to be "
"configured. This can be configured in [.filename]#/etc/rc.conf# or by using "
"man:wpa_supplicant[8]. For a single AirPort(R) base station, access can be "
"configured with:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:533
#, no-wrap
msgid ""
"wlans_ath0=\"wlan0\"\n"
"ifconfig_wlan0=\"authmode shared wepmode on weptxkey 1 wepkey 01234567 "
"DHCP\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:536
msgid ""
"In general, shared key authentication should be avoided because it uses the "
"WEP key material in a highly-constrained manner, making it even easier to "
"crack the key. If WEP must be used for compatibility with legacy devices, it "
"is better to use WEP with `open` authentication. More information regarding "
"WEP can be found in <<network-wireless-wep>>."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:539
msgid "====== Getting an IP Address with DHCP"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:541
msgid ""
"Once an access point is selected and the authentication parameters are set, "
"an IP address must be obtained in order to communicate. Most of the time, "
"the IP address is obtained via DHCP. To achieve that, edit "
"[.filename]#/etc/rc.conf# and add `DHCP` to the configuration for the "
"device:"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:549
msgid "The wireless interface is now ready to bring up:"
msgstr "现在您已经完成了启用无线网络接口的全部准备工作了， 下面的操作将启用它："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:553
#, no-wrap
msgid "# service netif start\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:556
msgid ""
"Once the interface is running, use man:ifconfig[8] to see the status of the "
"interface [.filename]#ath0#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:569
#, no-wrap
msgid ""
"# ifconfig wlan0\n"
"wlan0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> mtu 1500\n"
"        ether 00:11:95:d5:43:62\n"
"        inet 192.168.1.100 netmask 0xffffff00 broadcast 192.168.1.255\n"
"        media: IEEE 802.11 Wireless Ethernet OFDM/54Mbps mode 11g\n"
"        status: associated\n"
"        ssid dlinkap channel 11 (2462 Mhz 11g) bssid 00:13:46:49:41:76\n"
"        country US ecm authmode OPEN privacy OFF txpower 21.5 bmiss 7\n"
"        scanvalid 60 bgscan bgscanintvl 300 bgscanidle 250 roam:rssi 7\n"
"        roam:rate 5 protmode CTS wme burst\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:572
msgid ""
"The `status: associated` line means that it is connected to the wireless "
"network. The `bssid 00:13:46:49:41:76` is the MAC address of the access "
"point and `authmode OPEN` indicates that the communication is not encrypted."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:574
msgid "====== Static IP Address"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:576
msgid ""
"If an IP address cannot be obtained from a DHCP server, set a fixed IP "
"address. Replace the `DHCP` keyword shown above with the address "
"information. Be sure to retain any other parameters for selecting the access "
"point:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:581
#, no-wrap
msgid ""
"wlans_ath0=\"wlan0\"\n"
"ifconfig_wlan0=\"inet 192.168.1.100 netmask 255.255.255.0 ssid "
"your_ssid_here\"\n"
msgstr ""

#. type: Title =====
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:584
#, no-wrap
msgid "WPA"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:587
msgid ""
"Wi-Fi Protected Access (WPA) is a security protocol used together with "
"802.11 networks to address the lack of proper authentication and the "
"weakness of WEP. WPA leverages the 802.1X authentication protocol and uses "
"one of several ciphers instead of WEP for data integrity. The only cipher "
"required by WPA is the Temporary Key Integrity Protocol (TKIP). TKIP is a "
"cipher that extends the basic RC4 cipher used by WEP by adding integrity "
"checking, tamper detection, and measures for responding to detected "
"intrusions. TKIP is designed to work on legacy hardware with only software "
"modification. It represents a compromise that improves security but is still "
"not entirely immune to attack. WPA also specifies the AES-CCMP cipher as an "
"alternative to TKIP, and that is preferred when possible. For this "
"specification, the term WPA2 or RSN is commonly used."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:589
msgid ""
"WPA defines authentication and encryption protocols. Authentication is most "
"commonly done using one of two techniques: by 802.1X and a backend "
"authentication service such as RADIUS, or by a minimal handshake between the "
"station and the access point using a pre-shared secret. The former is "
"commonly termed WPA Enterprise and the latter is known as WPA "
"Personal. Since most people will not set up a RADIUS backend server for "
"their wireless network, WPA-PSK is by far the most commonly encountered "
"configuration for WPA."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:591
msgid ""
"The control of the wireless connection and the key negotiation or "
"authentication with a server is done using man:wpa_supplicant[8]. This "
"program requires a configuration file, "
"[.filename]#/etc/wpa_supplicant.conf#, to run. More information regarding "
"this file can be found in man:wpa_supplicant.conf[5]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:594
msgid "====== WPA-PSK"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:596
#, fuzzy
msgid ""
"WPA-PSK, also known as WPA Personal, is based on a pre-shared key (PSK) "
"which is generated from a given password and used as the master key in the "
"wireless network. This means every wireless user will share the same "
"key. WPA-PSK is intended for small networks where the use of an "
"authentication server is not possible or desired."
msgstr ""
"WPA-PSK 也称作 个人-WPA， 它基于预先分发的密钥 (PSK)， 这个密钥是根据作为无线网络上使用的主密钥的密码生成的。 "
"这表示每个无线用户都会使用同样的密钥。 WPA-PSK 主要用于小型网络， 在这种网络中， 通常不需要或没有办法架设验证服务器。"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:601
msgid ""
"Always use strong passwords that are sufficiently long and made from a rich "
"alphabet so that they will not be easily guessed or attacked."
msgstr "无论何时， 都应使用足够长， 且包括尽可能多字母和数字的强密码， 以免被猜出和/或攻击。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:604
msgid ""
"The first step is the configuration of [.filename]#/etc/wpa_supplicant.conf# "
"with the SSID and the pre-shared key of the network:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:611
#, fuzzy, no-wrap
msgid ""
"network={\n"
"  ssid=\"freebsdap\"\n"
"  psk=\"freebsdmall\"\n"
"}\n"
msgstr ""
"network={\n"
"  ssid=\"freebsdap\"\n"
"  psk=\"freebsdmall\"\n"
"}\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:614
msgid ""
"Then, in [.filename]#/etc/rc.conf#, indicate that the wireless device "
"configuration will be done with WPA and the IP address will be obtained with "
"DHCP:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:619
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:750
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:809
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:876
#, fuzzy, no-wrap
msgid ""
"wlans_ath0=\"wlan0\"\n"
"ifconfig_wlan0=\"WPA DHCP\"\n"
msgstr ""
"wlans_ath0=\"wlan0\"\n"
"ifconfig_wlan0=\"WPA DHCP\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:622
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:879
msgid "Then, bring up the interface:"
msgstr "下面启用无线网络接口："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:643
#, fuzzy, no-wrap
msgid ""
"# service netif start\n"
"Starting wpa_supplicant.\n"
"DHCPDISCOVER on wlan0 to 255.255.255.255 port 67 interval 5\n"
"DHCPDISCOVER on wlan0 to 255.255.255.255 port 67 interval 6\n"
"DHCPOFFER from 192.168.0.1\n"
"DHCPREQUEST on wlan0 to 255.255.255.255 port 67\n"
"DHCPACK from 192.168.0.1\n"
"bound to 192.168.0.254 -- renewal in 300 seconds.\n"
"wlan0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> mtu 1500\n"
"      ether 00:11:95:d5:43:62\n"
"      inet 192.168.0.254 netmask 0xffffff00 broadcast 192.168.0.255\n"
"      media: IEEE 802.11 Wireless Ethernet OFDM/36Mbps mode 11g\n"
"      status: associated\n"
"      ssid freebsdap channel 1 (2412 Mhz 11g) bssid 00:11:95:c3:0d:ac\n"
"      country US ecm authmode WPA2/802.11i privacy ON deftxkey UNDEF\n"
"      AES-CCM 3:128-bit txpower 21.5 bmiss 7 scanvalid 450 bgscan\n"
"      bgscanintvl 300 bgscanidle 250 roam:rssi 7 roam:rate 5 protmode CTS\n"
"      wme burst roaming MANUAL\n"
msgstr ""
"<prompt>#</prompt> <userinput>service netif start</userinput>\n"
"Starting wpa_supplicant.\n"
"DHCPDISCOVER on wlan0 to 255.255.255.255 port 67 interval 5\n"
"DHCPDISCOVER on wlan0 to 255.255.255.255 port 67 interval 6\n"
"DHCPOFFER from 192.168.0.1\n"
"DHCPREQUEST on wlan0 to 255.255.255.255 port 67\n"
"DHCPACK from 192.168.0.1\n"
"bound to 192.168.0.254 -- renewal in 300 seconds.\n"
"wlan0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500\n"
"      ether 00:11:95:d5:43:62\n"
"      inet 192.168.0.254 netmask 0xffffff00 broadcast 192.168.0.255\n"
"      media: IEEE 802.11 Wireless Ethernet OFDM/36Mbps mode 11g\n"
"      status: associated\n"
"      ssid freebsdap channel 1 (2412 Mhz 11g) bssid 00:11:95:c3:0d:ac\n"
"      country US ecm authmode WPA2/802.11i privacy ON deftxkey UNDEF\n"
"      AES-CCM 3:128-bit txpower 21.5 bmiss 7 scanvalid 450 bgscan\n"
"      bgscanintvl 300 bgscanidle 250 roam:rssi 7 roam:rate 5 protmode CTS\n"
"      wme burst roaming MANUAL\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:646
#, fuzzy
msgid ""
"Or, try to configure the interface manually using the information in "
"[.filename]#/etc/wpa_supplicant.conf#:"
msgstr ""
"除此之外， 您也可以手动地使用 <link linkend=\"network-wireless-wpa-wpa-psk\">above</link> "
"中那份 <filename>/etc/wpa_supplicant.conf</filename> 来配置， 方法是执行："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:654
#, no-wrap
msgid ""
"# wpa_supplicant -i wlan0 -c /etc/wpa_supplicant.conf\n"
"Trying to associate with 00:11:95:c3:0d:ac (SSID='freebsdap' freq=2412 "
"MHz)\n"
"Associated with 00:11:95:c3:0d:ac\n"
"WPA: Key negotiation completed with 00:11:95:c3:0d:ac [PTK=CCMP GTK=CCMP]\n"
"CTRL-EVENT-CONNECTED - Connection to 00:11:95:c3:0d:ac completed (auth) "
"[id=0 id_str=]\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:657
msgid ""
"The next operation is to launch man:dhclient[8] to get the IP address from "
"the DHCP server:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:675
#, no-wrap
msgid ""
"# dhclient wlan0\n"
"DHCPREQUEST on wlan0 to 255.255.255.255 port 67\n"
"DHCPACK from 192.168.0.1\n"
"bound to 192.168.0.254 -- renewal in 300 seconds.\n"
"# ifconfig wlan0\n"
"wlan0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> mtu 1500\n"
"      ether 00:11:95:d5:43:62\n"
"      inet 192.168.0.254 netmask 0xffffff00 broadcast 192.168.0.255\n"
"      media: IEEE 802.11 Wireless Ethernet OFDM/36Mbps mode 11g\n"
"      status: associated\n"
"      ssid freebsdap channel 1 (2412 Mhz 11g) bssid 00:11:95:c3:0d:ac\n"
"      country US ecm authmode WPA2/802.11i privacy ON deftxkey UNDEF\n"
"      AES-CCM 3:128-bit txpower 21.5 bmiss 7 scanvalid 450 bgscan\n"
"      bgscanintvl 300 bgscanidle 250 roam:rssi 7 roam:rate 5 protmode CTS\n"
"      wme burst roaming MANUAL\n"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:680
msgid ""
"If [.filename]#/etc/rc.conf# has an `ifconfig_wlan0=\"DHCP\"` entry, "
"man:dhclient[8] will be launched automatically after man:wpa_supplicant[8] "
"associates with the access point."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:683
msgid ""
"If DHCP is not possible or desired, set a static IP address after "
"man:wpa_supplicant[8] has authenticated the station:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:698
#, no-wrap
msgid ""
"# ifconfig wlan0 inet 192.168.0.100 netmask 255.255.255.0\n"
"# ifconfig wlan0\n"
"wlan0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> mtu 1500\n"
"      ether 00:11:95:d5:43:62\n"
"      inet 192.168.0.100 netmask 0xffffff00 broadcast 192.168.0.255\n"
"      media: IEEE 802.11 Wireless Ethernet OFDM/36Mbps mode 11g\n"
"      status: associated\n"
"      ssid freebsdap channel 1 (2412 Mhz 11g) bssid 00:11:95:c3:0d:ac\n"
"      country US ecm authmode WPA2/802.11i privacy ON deftxkey UNDEF\n"
"      AES-CCM 3:128-bit txpower 21.5 bmiss 7 scanvalid 450 bgscan\n"
"      bgscanintvl 300 bgscanidle 250 roam:rssi 7 roam:rate 5 protmode CTS\n"
"      wme burst roaming MANUAL\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:701
msgid ""
"When DHCP is not used, the default gateway and the nameserver also have to "
"be manually set:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:706
#, no-wrap
msgid ""
"# route add default your_default_router\n"
"# echo \"nameserver your_DNS_server\" >> /etc/resolv.conf\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:710
msgid "====== WPA with EAP-TLS"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:712
msgid ""
"The second way to use WPA is with an 802.1X backend authentication "
"server. In this case, WPA is called WPA Enterprise to differentiate it from "
"the less secure WPA Personal. Authentication in WPA Enterprise is based on "
"the Extensible Authentication Protocol (EAP)."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:714
msgid ""
"EAP does not come with an encryption method. Instead, EAP is embedded inside "
"an encrypted tunnel. There are many EAP authentication methods, but EAP-TLS, "
"EAP-TTLS, and EAP-PEAP are the most common."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:716
msgid ""
"EAP with Transport Layer Security (EAP-TLS) is a well-supported wireless "
"authentication protocol since it was the first EAP method to be certified by "
"the http://www.wi-fi.org/[Wi-Fi Alliance]. EAP-TLS requires three "
"certificates to run: the certificate of the Certificate Authority (CA) "
"installed on all machines, the server certificate for the authentication "
"server, and one client certificate for each wireless client. In this EAP "
"method, both the authentication server and wireless client authenticate each "
"other by presenting their respective certificates, and then verify that "
"these certificates were signed by the organization's CA."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:718
#, fuzzy
msgid ""
"As previously, the configuration is done via "
"[.filename]#/etc/wpa_supplicant.conf#:"
msgstr "与之前介绍的方法类似， 配置也是通过 <filename>/etc/wpa_supplicant.conf</filename> 来完成的："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:732
#, no-wrap
msgid ""
"network={\n"
"  ssid=\"freebsdap\" <.>\n"
"  proto=RSN  <.>\n"
"  key_mgmt=WPA-EAP <.>\n"
"  eap=TLS <.>\n"
"  identity=\"loader\" <.>\n"
"  ca_cert=\"/etc/certs/cacert.pem\" <.>\n"
"  client_cert=\"/etc/certs/clientcert.pem\" <.>\n"
"  private_key=\"/etc/certs/clientkey.pem\" <.>\n"
"  private_key_passwd=\"freebsdmallclient\" <.>\n"
"}\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:743
msgid ""
"<.> This field indicates the network name (SSID).  <.> This example uses the "
"RSN IEEE(R) 802.11i protocol, also known as WPA2.  <.> The `key_mgmt` line "
"refers to the key management protocol to use. In this example, it is WPA "
"using EAP authentication.  <.> This field indicates the EAP method for the "
"connection.  <.> The `identity` field contains the identity string for EAP.  "
"<.> The `ca_cert` field indicates the pathname of the CA certificate "
"file. This file is needed to verify the server certificate.  <.> The "
"`client_cert` line gives the pathname to the client certificate file. This "
"certificate is unique to each wireless client of the network.  <.> The "
"`private_key` field is the pathname to the client certificate private key "
"file.  <.> The `private_key_passwd` field contains the passphrase for the "
"private key."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:745
msgid "Then, add the following lines to [.filename]#/etc/rc.conf#:"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:753
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:812
msgid "The next step is to bring up the interface:"
msgstr "下一步是启动网络接口："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:772
#, fuzzy, no-wrap
msgid ""
"# service netif start\n"
"Starting wpa_supplicant.\n"
"DHCPREQUEST on wlan0 to 255.255.255.255 port 67 interval 7\n"
"DHCPREQUEST on wlan0 to 255.255.255.255 port 67 interval 15\n"
"DHCPACK from 192.168.0.20\n"
"bound to 192.168.0.254 -- renewal in 300 seconds.\n"
"wlan0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> mtu 1500\n"
"      ether 00:11:95:d5:43:62\n"
"      inet 192.168.0.254 netmask 0xffffff00 broadcast 192.168.0.255\n"
"      media: IEEE 802.11 Wireless Ethernet DS/11Mbps mode 11g\n"
"      status: associated\n"
"      ssid freebsdap channel 1 (2412 Mhz 11g) bssid 00:11:95:c3:0d:ac\n"
"      country US ecm authmode WPA2/802.11i privacy ON deftxkey UNDEF\n"
"      AES-CCM 3:128-bit txpower 21.5 bmiss 7 scanvalid 450 bgscan\n"
"      bgscanintvl 300 bgscanidle 250 roam:rssi 7 roam:rate 5 protmode CTS\n"
"      wme burst roaming MANUAL\n"
msgstr ""
"<prompt>#</prompt> <userinput>service netif start</userinput>\n"
"Starting wpa_supplicant.\n"
"DHCPREQUEST on wlan0 to 255.255.255.255 port 67 interval 7\n"
"DHCPREQUEST on wlan0 to 255.255.255.255 port 67 interval 15\n"
"DHCPACK from 192.168.0.20\n"
"bound to 192.168.0.254 -- renewal in 300 seconds.\n"
"wlan0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500\n"
"      ether 00:11:95:d5:43:62\n"
"      inet 192.168.0.254 netmask 0xffffff00 broadcast 192.168.0.255\n"
"      media: IEEE 802.11 Wireless Ethernet DS/11Mbps mode 11g\n"
"      status: associated\n"
"      ssid freebsdap channel 1 (2412 Mhz 11g) bssid 00:11:95:c3:0d:ac\n"
"      country US ecm authmode WPA2/802.11i privacy ON deftxkey UNDEF\n"
"      AES-CCM 3:128-bit txpower 21.5 bmiss 7 scanvalid 450 bgscan\n"
"      bgscanintvl 300 bgscanidle 250 roam:rssi 7 roam:rate 5 protmode CTS\n"
"      wme burst roaming MANUAL\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:775
msgid ""
"It is also possible to bring up the interface manually using "
"man:wpa_supplicant[8] and man:ifconfig[8]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:778
msgid "====== WPA with EAP-TTLS"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:780
msgid ""
"With EAP-TLS, both the authentication server and the client need a "
"certificate. With EAP-TTLS, a client certificate is optional. This method is "
"similar to a web server which creates a secure SSL tunnel even if visitors "
"do not have client-side certificates. EAP-TTLS uses an encrypted TLS tunnel "
"for safe transport of the authentication data."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:782
#, fuzzy
msgid ""
"The required configuration can be added to "
"[.filename]#/etc/wpa_supplicant.conf#:"
msgstr "对于它的配置， 同样是通过 <filename>/etc/wpa_supplicant.conf</filename> 文件来进行的："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:795
#, no-wrap
msgid ""
"network={\n"
"  ssid=\"freebsdap\"\n"
"  proto=RSN\n"
"  key_mgmt=WPA-EAP\n"
"  eap=TTLS <.>\n"
"  identity=\"test\" <.>\n"
"  password=\"test\" <.>\n"
"  ca_cert=\"/etc/certs/cacert.pem\" <.>\n"
"  phase2=\"auth=MD5\" <.>\n"
"}\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:802
msgid ""
"<.> This field specifies the EAP method for the connection.  <.> The "
"`identity` field contains the identity string for EAP authentication inside "
"the encrypted TLS tunnel.  <.> The `password` field contains the passphrase "
"for the EAP authentication.  <.> The `ca_cert` field indicates the pathname "
"of the CA certificate file. This file is needed to verify the server "
"certificate.  <.> This field specifies the authentication method used in the "
"encrypted TLS tunnel. In this example, EAP with MD5-Challenge is used. The "
"\"inner authentication\" phase is often called \"phase2\"."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:804
msgid "Next, add the following lines to [.filename]#/etc/rc.conf#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:832
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:899
#, fuzzy, no-wrap
msgid ""
"# service netif start\n"
"Starting wpa_supplicant.\n"
"DHCPREQUEST on wlan0 to 255.255.255.255 port 67 interval 7\n"
"DHCPREQUEST on wlan0 to 255.255.255.255 port 67 interval 15\n"
"DHCPREQUEST on wlan0 to 255.255.255.255 port 67 interval 21\n"
"DHCPACK from 192.168.0.20\n"
"bound to 192.168.0.254 -- renewal in 300 seconds.\n"
"wlan0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> mtu 1500\n"
"      ether 00:11:95:d5:43:62\n"
"      inet 192.168.0.254 netmask 0xffffff00 broadcast 192.168.0.255\n"
"      media: IEEE 802.11 Wireless Ethernet DS/11Mbps mode 11g\n"
"      status: associated\n"
"      ssid freebsdap channel 1 (2412 Mhz 11g) bssid 00:11:95:c3:0d:ac\n"
"      country US ecm authmode WPA2/802.11i privacy ON deftxkey UNDEF\n"
"      AES-CCM 3:128-bit txpower 21.5 bmiss 7 scanvalid 450 bgscan\n"
"      bgscanintvl 300 bgscanidle 250 roam:rssi 7 roam:rate 5 protmode CTS\n"
"      wme burst roaming MANUAL\n"
msgstr ""
"<prompt>#</prompt> <userinput>service netif start</userinput>\n"
"Starting wpa_supplicant.\n"
"DHCPREQUEST on wlan0 to 255.255.255.255 port 67 interval 7\n"
"DHCPREQUEST on wlan0 to 255.255.255.255 port 67 interval 15\n"
"DHCPREQUEST on wlan0 to 255.255.255.255 port 67 interval 21\n"
"DHCPACK from 192.168.0.20\n"
"bound to 192.168.0.254 -- renewal in 300 seconds.\n"
"wlan0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500\n"
"      ether 00:11:95:d5:43:62\n"
"      inet 192.168.0.254 netmask 0xffffff00 broadcast 192.168.0.255\n"
"      media: IEEE 802.11 Wireless Ethernet DS/11Mbps mode 11g\n"
"      status: associated\n"
"      ssid freebsdap channel 1 (2412 Mhz 11g) bssid 00:11:95:c3:0d:ac\n"
"      country US ecm authmode WPA2/802.11i privacy ON deftxkey UNDEF\n"
"      AES-CCM 3:128-bit txpower 21.5 bmiss 7 scanvalid 450 bgscan\n"
"      bgscanintvl 300 bgscanidle 250 roam:rssi 7 roam:rate 5 protmode CTS\n"
"      wme burst roaming MANUAL\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:836
msgid "====== WPA with EAP-PEAP"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:840
msgid ""
"PEAPv0/EAP-MSCHAPv2 is the most common PEAP method. In this chapter, the "
"term PEAP is used to refer to that method."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:843
msgid ""
"Protected EAP (PEAP) is designed as an alternative to EAP-TTLS and is the "
"most used EAP standard after EAP-TLS. In a network with mixed operating "
"systems, PEAP should be the most supported standard after EAP-TLS."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:845
msgid ""
"PEAP is similar to EAP-TTLS as it uses a server-side certificate to "
"authenticate clients by creating an encrypted TLS tunnel between the client "
"and the authentication server, which protects the ensuing exchange of "
"authentication information. PEAP authentication differs from EAP-TTLS as it "
"broadcasts the username in the clear and only the password is sent in the "
"encrypted TLS tunnel. EAP-TTLS will use the TLS tunnel for both the username "
"and password."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:847
msgid ""
"Add the following lines to [.filename]#/etc/wpa_supplicant.conf# to "
"configure the EAP-PEAP related settings:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:861
#, no-wrap
msgid ""
"network={\n"
"  ssid=\"freebsdap\"\n"
"  proto=RSN\n"
"  key_mgmt=WPA-EAP\n"
"  eap=PEAP <.>\n"
"  identity=\"test\" <.>\n"
"  password=\"test\" <.>\n"
"  ca_cert=\"/etc/certs/cacert.pem\" <.>\n"
"  phase1=\"peaplabel=0\" <.>\n"
"  phase2=\"auth=MSCHAPV2\" <.>\n"
"}\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:869
msgid ""
"<.> This field specifies the EAP method for the connection.  <.> The "
"`identity` field contains the identity string for EAP authentication inside "
"the encrypted TLS tunnel.  <.> The `password` field contains the passphrase "
"for the EAP authentication.  <.> The `ca_cert` field indicates the pathname "
"of the CA certificate file. This file is needed to verify the server "
"certificate.  <.> This field contains the parameters for the first phase of "
"authentication, the TLS tunnel. According to the authentication server used, "
"specify a specific label for authentication. Most of the time, the label "
"will be \"client EAP encryption\" which is set by using `peaplabel=0`. More "
"information can be found in man:wpa_supplicant.conf[5].  <.> This field "
"specifies the authentication protocol used in the encrypted TLS tunnel. In "
"the case of PEAP, it is `auth=MSCHAPV2`."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:871
msgid "Add the following to [.filename]#/etc/rc.conf#:"
msgstr ""

#. type: Title =====
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:902
#, no-wrap
msgid "WEP"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:905
#, fuzzy
msgid ""
"Wired Equivalent Privacy (WEP) is part of the original 802.11 "
"standard. There is no authentication mechanism, only a weak form of access "
"control which is easily cracked."
msgstr "WEP (有线等效协议) 是最初 802.11 标准的一部分。 其中没有提供身份验证机制， 只提供了弱访问控制， 而且很容易破解。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:907
msgid "WEP can be set up using man:ifconfig[8]:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:913
#, no-wrap
msgid ""
"# ifconfig wlan0 create wlandev ath0\n"
"# ifconfig wlan0 inet 192.168.1.100 netmask 255.255.255.0 \\\n"
"\t    ssid my_net wepmode on weptxkey 3 wepkey 3:0x3456789012\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:916
msgid ""
"The `weptxkey` specifies which WEP key will be used in the "
"transmission. This example uses the third key. This must match the setting "
"on the access point. When unsure which key is used by the access point, try "
"`1` (the first key) for this value."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:917
msgid ""
"The `wepkey` selects one of the WEP keys. It should be in the format "
"_index:key_. Key `1` is used by default; the index only needs to be set when "
"using a key other than the first key."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:921
msgid ""
"Replace the `0x3456789012` with the key configured for use on the access "
"point."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:924
msgid "Refer to man:ifconfig[8] for further information."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:926
msgid ""
"The man:wpa_supplicant[8] facility can be used to configure a wireless "
"interface with WEP. The example above can be set up by adding the following "
"lines to [.filename]#/etc/wpa_supplicant.conf#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:935
#, fuzzy, no-wrap
msgid ""
"network={\n"
"  ssid=\"my_net\"\n"
"  key_mgmt=NONE\n"
"  wep_key3=3456789012\n"
"  wep_tx_keyidx=3\n"
"}\n"
msgstr ""
"network={\n"
"  ssid=\"my_net\"\n"
"  key_mgmt=NONE\n"
"  wep_key3=3456789012\n"
"  wep_tx_keyidx=3\n"
"}\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:938
msgid "Then:"
msgstr "接着："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:944
#, no-wrap
msgid ""
"# wpa_supplicant -i wlan0 -c /etc/wpa_supplicant.conf\n"
"Trying to associate with 00:13:46:49:41:76 (SSID='dlinkap' freq=2437 MHz)\n"
"Associated with 00:13:46:49:41:76\n"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:946
#, no-wrap
msgid "Ad-hoc Mode"
msgstr "Ad-hoc 模式"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:949
msgid ""
"IBSS mode, also called ad-hoc mode, is designed for point to point "
"connections. For example, to establish an ad-hoc network between the "
"machines `A` and `B`, choose two IP addresses and a SSID."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:951
msgid "On `A`:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:965
#, no-wrap
msgid ""
"# ifconfig wlan0 create wlandev ath0 wlanmode adhoc\n"
"# ifconfig wlan0 inet 192.168.0.1 netmask 255.255.255.0 ssid freebsdap\n"
"# ifconfig wlan0\n"
"  wlan0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> metric 0 mtu "
"1500\n"
"\t  ether 00:11:95:c3:0d:ac\n"
"\t  inet 192.168.0.1 netmask 0xffffff00 broadcast 192.168.0.255\n"
"\t  media: IEEE 802.11 Wireless Ethernet autoselect mode 11g <adhoc>\n"
"\t  status: running\n"
"\t  ssid freebsdap channel 2 (2417 Mhz 11g) bssid 02:11:95:c3:0d:ac\n"
"\t  country US ecm authmode OPEN privacy OFF txpower 21.5 scanvalid 60\n"
"\t  protmode CTS wme burst\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:968
msgid "The `adhoc` parameter indicates that the interface is running in IBSS mode."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:970
msgid "`B` should now be able to detect `A`:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:977
#, no-wrap
msgid ""
"# ifconfig wlan0 create wlandev ath0 wlanmode adhoc\n"
"# ifconfig wlan0 up scan\n"
"  SSID/MESH ID    BSSID              CHAN RATE   S:N     INT CAPS\n"
"  freebsdap       02:11:95:c3:0d:ac    2   54M -64:-96  100 IS   WME\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:980
msgid ""
"The `I` in the output confirms that `A` is in ad-hoc mode. Now, configure "
"`B` with a different IP address:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:993
#, no-wrap
msgid ""
"# ifconfig wlan0 inet 192.168.0.2 netmask 255.255.255.0 ssid freebsdap\n"
"# ifconfig wlan0\n"
"  wlan0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> metric 0 mtu "
"1500\n"
"\t  ether 00:11:95:d5:43:62\n"
"\t  inet 192.168.0.2 netmask 0xffffff00 broadcast 192.168.0.255\n"
"\t  media: IEEE 802.11 Wireless Ethernet autoselect mode 11g <adhoc>\n"
"\t  status: running\n"
"\t  ssid freebsdap channel 2 (2417 Mhz 11g) bssid 02:11:95:c3:0d:ac\n"
"\t  country US ecm authmode OPEN privacy OFF txpower 21.5 scanvalid 60\n"
"\t  protmode CTS wme burst\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:996
msgid "Both `A` and `B` are now ready to exchange information."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:998
#, no-wrap
msgid "FreeBSD Host Access Points"
msgstr "FreeBSD 基于主机的（无线）访问接入点"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1001
#, fuzzy
msgid ""
"FreeBSD can act as an Access Point (AP) which eliminates the need to buy a "
"hardware AP or run an ad-hoc network. This can be particularly useful when a "
"FreeBSD machine is acting as a gateway to another network such as the "
"Internet."
msgstr ""
"FreeBSD 可以作为一个（无线）访问接入点（AP）， 这样可以不必再去买一个硬件 AP 或者使用 ad-hoc 模式的网络。 当你的 FreeBSD "
"机器作为网关连接到另外一个网络的时候将非常有用。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1006
msgid ""
"Before configuring a FreeBSD machine as an AP, the kernel must be configured "
"with the appropriate networking support for the wireless card as well as the "
"security protocols being used. For more details, see "
"<<network-wireless-basic>>."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1010
msgid ""
"The NDIS driver wrapper for Windows(R) drivers does not currently support AP "
"operation. Only native FreeBSD wireless drivers support AP mode."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1013
msgid ""
"Once wireless networking support is loaded, check if the wireless device "
"supports the host-based access point mode, also known as hostap mode:"
msgstr "一旦装载了无线网络的支持， 你就可以检查一下看看你的无线设备是否支持基于主机的无线访问接入模式 （通常也被称为 hostap 模式）："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1020
#, no-wrap
msgid ""
"# ifconfig wlan0 create wlandev ath0\n"
"# ifconfig wlan0 list caps\n"
"drivercaps=6f85edc1<STA,FF,TURBOP,IBSS,HOSTAP,AHDEMO,TXPMGT,SHSLOT,SHPREAMBLE,MONITOR,MBSS,WPA1,WPA2,BURST,WME,WDS,BGSCAN,TXFRAG>\n"
"cryptocaps=1f<WEP,TKIP,AES,AES_CCM,TKIPMIC>\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1023
msgid ""
"This output displays the card's capabilities. The `HOSTAP` word confirms "
"that this wireless card can act as an AP. Various supported ciphers are also "
"listed: WEP, TKIP, and AES. This information indicates which security "
"protocols can be used on the AP."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1025
msgid ""
"The wireless device can only be put into hostap mode during the creation of "
"the network pseudo-device, so a previously created device must be destroyed "
"first:"
msgstr "只有创建网络伪设备时能够配置无线设备是否以 hostap 模式运行， 如果之前已经存在了相应的设备， 则需要首先将其销毁："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1029
#, no-wrap
msgid "# ifconfig wlan0 destroy\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1032
msgid ""
"then regenerated with the correct option before setting the other "
"parameters:"
msgstr "接着， 在配置其它参数前， 以正确的选项重新生成设备："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1037
#, no-wrap
msgid ""
"# ifconfig wlan0 create wlandev ath0 wlanmode hostap\n"
"# ifconfig wlan0 inet 192.168.0.1 netmask 255.255.255.0 ssid freebsdap mode "
"11g channel 1\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1040
msgid ""
"Use man:ifconfig[8] again to see the status of the [.filename]#wlan0# "
"interface:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1052
#, no-wrap
msgid ""
"# ifconfig wlan0\n"
"  wlan0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> metric 0 mtu "
"1500\n"
"\t  ether 00:11:95:c3:0d:ac\n"
"\t  inet 192.168.0.1 netmask 0xffffff00 broadcast 192.168.0.255\n"
"\t  media: IEEE 802.11 Wireless Ethernet autoselect mode 11g <hostap>\n"
"\t  status: running\n"
"\t  ssid freebsdap channel 1 (2412 Mhz 11g) bssid 00:11:95:c3:0d:ac\n"
"\t  country US ecm authmode OPEN privacy OFF txpower 21.5 scanvalid 60\n"
"\t  protmode CTS wme burst dtimperiod 1 -dfs\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1055
msgid ""
"The `hostap` parameter indicates the interface is running in the host-based "
"access point mode."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1057
#, fuzzy
msgid ""
"The interface configuration can be done automatically at boot time by adding "
"the following lines to [.filename]#/etc/rc.conf#:"
msgstr ""
"通过在 <filename>/etc/rc.conf</filename> 中加入下面的配置， 也可以在系统引导的过程中自动完成对于网络接口的配置："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1063
#, no-wrap
msgid ""
"wlans_ath0=\"wlan0\"\n"
"create_args_wlan0=\"wlanmode hostap\"\n"
"ifconfig_wlan0=\"inet 192.168.0.1 netmask 255.255.255.0 ssid freebsdap mode "
"11g channel 1\"\n"
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1065
#, no-wrap
msgid "Host-based Access Point Without Authentication or Encryption"
msgstr "无认证或加密的Host-based存取点"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1068
#, fuzzy
msgid ""
"Although it is not recommended to run an AP without any authentication or "
"encryption, this is a simple way to check if the AP is working. This "
"configuration is also important for debugging client issues."
msgstr ""
"尽管我们不推荐运行一个不使用任何认证或加密的 AP， 但这是一个非常简单的检测 AP 是否正常工作的方法。 这样配置对于调试客户端问题也非常重要。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1070
msgid ""
"Once the AP is configured, initiate a scan from another wireless machine to "
"find the AP:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1077
#, no-wrap
msgid ""
"# ifconfig wlan0 create wlandev ath0\n"
"# ifconfig wlan0 up scan\n"
"SSID/MESH ID    BSSID              CHAN RATE   S:N     INT CAPS\n"
"freebsdap       00:11:95:c3:0d:ac    1   54M -66:-96  100 ES   WME\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1080
msgid "The client machine found the AP and can be associated with it:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1094
#, no-wrap
msgid ""
"# ifconfig wlan0 inet 192.168.0.2 netmask 255.255.255.0 ssid freebsdap\n"
"# ifconfig wlan0\n"
"  wlan0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> metric 0 mtu "
"1500\n"
"\t  ether 00:11:95:d5:43:62\n"
"\t  inet 192.168.0.2 netmask 0xffffff00 broadcast 192.168.0.255\n"
"\t  media: IEEE 802.11 Wireless Ethernet OFDM/54Mbps mode 11g\n"
"\t  status: associated\n"
"\t  ssid freebsdap channel 1 (2412 Mhz 11g) bssid 00:11:95:c3:0d:ac\n"
"\t  country US ecm authmode OPEN privacy OFF txpower 21.5 bmiss 7\n"
"\t  scanvalid 60 bgscan bgscanintvl 300 bgscanidle 250 roam:rssi 7\n"
"\t  roam:rate 5 protmode CTS wme burst\n"
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1097
#, no-wrap
msgid "WPA2 Host-based Access Point"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1100
msgid ""
"This section focuses on setting up a FreeBSD access point using the WPA2 "
"security protocol. More details regarding WPA and the configuration of "
"WPA-based wireless clients can be found in <<network-wireless-wpa>>."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1102
msgid ""
"The man:hostapd[8] daemon is used to deal with client authentication and key "
"management on the WPA2-enabled AP."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1104
msgid ""
"The following configuration operations are performed on the FreeBSD machine "
"acting as the AP. Once the AP is correctly working, man:hostapd[8] can be "
"automatically started at boot with this line in [.filename]#/etc/rc.conf#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1108
#, fuzzy, no-wrap
msgid "hostapd_enable=\"YES\"\n"
msgstr "hostapd_enable=\"YES\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1111
msgid ""
"Before trying to configure man:hostapd[8], first configure the basic "
"settings introduced in <<network-wireless-ap-basic>>."
msgstr ""

#. type: Title =====
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1112
#, no-wrap
msgid "WPA2-PSK"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1115
msgid ""
"WPA2-PSK is intended for small networks where the use of a backend "
"authentication server is not possible or desired."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1117
msgid "The configuration is done in [.filename]#/etc/hostapd.conf#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1129
#, no-wrap
msgid ""
"interface=wlan0                  <.>\n"
"debug=1                          <.>\n"
"ctrl_interface=/var/run/hostapd  <.>\n"
"ctrl_interface_group=wheel       <.>\n"
"ssid=freebsdap                   <.>\n"
"wpa=2                            <.>\n"
"wpa_passphrase=freebsdmall       <.>\n"
"wpa_key_mgmt=WPA-PSK             <.>\n"
"wpa_pairwise=CCMP                <.>\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1140
msgid ""
"<.> Wireless interface used for the access point.  <.> Level of verbosity "
"used during the execution of man:hostapd[8]. A value of `1` represents the "
"minimal level.  <.> Pathname of the directory used by man:hostapd[8] to "
"store domain socket files for communication with external programs such as "
"man:hostapd_cli[8]. The default value is used in this example.  <.> The "
"group allowed to access the control interface files.  <.> The wireless "
"network name, or SSID, that will appear in wireless scans.  <.> Enable WPA "
"and specify which WPA authentication protocol will be required. A value of "
"`2` configures the AP for WPA2 and is recommended. Set to `1` only if the "
"obsolete WPA is required.  <.> ASCII passphrase for WPA authentication.  <.> "
"The key management protocol to use. This example sets WPA-PSK.  <.> "
"Encryption algorithms accepted by the access point. In this example, only "
"the CCMP (AES) cipher is accepted. CCMP is an alternative to TKIP and is "
"strongly preferred when possible. TKIP should be allowed only when there are "
"stations incapable of using CCMP."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1142
msgid "The next step is to start man:hostapd[8]:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1146
#, no-wrap
msgid "# service hostapd forcestart\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1163
#, no-wrap
msgid ""
"# ifconfig wlan0\n"
"wlan0: flags=8943<UP,BROADCAST,RUNNING,PROMISC,SIMPLEX,MULTICAST> metric 0 "
"mtu 1500\n"
"\tether 04:f0:21:16:8e:10\n"
"\tinet6 fe80::6f0:21ff:fe16:8e10%wlan0 prefixlen 64 scopeid 0x9\n"
"\tnd6 options=21<PERFORMNUD,AUTO_LINKLOCAL>\n"
"\tmedia: IEEE 802.11 Wireless Ethernet autoselect mode 11na <hostap>\n"
"\tstatus: running\n"
"\tssid No5ignal channel 36 (5180 MHz 11a ht/40+) bssid 04:f0:21:16:8e:10\n"
"\tcountry US ecm authmode WPA2/802.11i privacy MIXED deftxkey 2\n"
"\tAES-CCM 2:128-bit AES-CCM 3:128-bit txpower 17 mcastrate 6 mgmtrate 6\n"
"\tscanvalid 60 ampdulimit 64k ampdudensity 8 shortgi wme burst\n"
"\tdtimperiod 1 -dfs\n"
"\tgroups: wlan\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1166
msgid ""
"Once the AP is running, the clients can associate with it. See "
"<<network-wireless-wpa>> for more details. It is possible to see the "
"stations associated with the AP using `ifconfig _wlan0_ list sta`."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1167
#, no-wrap
msgid "WEP Host-based Access Point"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1170
msgid ""
"It is not recommended to use WEP for setting up an AP since there is no "
"authentication mechanism and the encryption is easily cracked. Some legacy "
"wireless cards only support WEP and these cards will only support an AP "
"without authentication or encryption."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1172
msgid ""
"The wireless device can now be put into hostap mode and configured with the "
"correct SSID and IP address:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1178
#, no-wrap
msgid ""
"# ifconfig wlan0 create wlandev ath0 wlanmode hostap\n"
"# ifconfig wlan0 inet 192.168.0.1 netmask 255.255.255.0 \\\n"
"\tssid freebsdap wepmode on weptxkey 3 wepkey 3:0x3456789012 mode 11g\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1181
msgid ""
"The `weptxkey` indicates which WEP key will be used in the "
"transmission. This example uses the third key as key numbering starts with "
"`1`. This parameter must be specified in order to encrypt the data."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1182
msgid ""
"The `wepkey` sets the selected WEP key. It should be in the format "
"_index:key_. If the index is not given, key `1` is set. The index needs to "
"be set when using keys other than the first key."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1184
msgid "Use man:ifconfig[8] to see the status of the [.filename]#wlan0# interface:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1196
#, no-wrap
msgid ""
"# ifconfig wlan0\n"
"  wlan0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> metric 0 mtu "
"1500\n"
"\t  ether 00:11:95:c3:0d:ac\n"
"\t  inet 192.168.0.1 netmask 0xffffff00 broadcast 192.168.0.255\n"
"\t  media: IEEE 802.11 Wireless Ethernet autoselect mode 11g <hostap>\n"
"\t  status: running\n"
"\t  ssid freebsdap channel 4 (2427 Mhz 11g) bssid 00:11:95:c3:0d:ac\n"
"\t  country US ecm authmode OPEN privacy ON deftxkey 3 wepkey 3:40-bit\n"
"\t  txpower 21.5 scanvalid 60 protmode CTS wme burst dtimperiod 1 -dfs\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1199
msgid ""
"From another wireless machine, it is now possible to initiate a scan to find "
"the AP:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1206
#, no-wrap
msgid ""
"# ifconfig wlan0 create wlandev ath0\n"
"# ifconfig wlan0 up scan\n"
"SSID            BSSID              CHAN RATE  S:N   INT CAPS\n"
"freebsdap       00:11:95:c3:0d:ac    1   54M 22:1   100 EPS\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1209
msgid ""
"In this example, the client machine found the AP and can associate with it "
"using the correct parameters. See <<network-wireless-wep>> for more details."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1210
#, no-wrap
msgid "Using Both Wired and Wireless Connections"
msgstr "同时使用有线和无线连接"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1213
msgid ""
"A wired connection provides better performance and reliability, while a "
"wireless connection provides flexibility and mobility. Laptop users "
"typically want to roam seamlessly between the two types of connections."
msgstr ""
"一般而言， 有线网络的速度更快而且更可靠， 而无线网络则提供更好的灵活及机动性， 使用笔记本的用户， 往往会希望结合两者的优点， "
"并能够在两种连接之间无缝切换。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1215
#, fuzzy
msgid ""
"On FreeBSD, it is possible to combine two or even more network interfaces "
"together in a \"failover\" fashion. This type of configuration uses the most "
"preferred and available connection from a group of network interfaces, and "
"the operating system switches automatically when the link state changes."
msgstr ""
"在 FreeBSD 上可以将多个网络接口合并到一起， 并以 <quote>故障转移</quote> 的方式自动切换， 也就是说， "
"这一组网络接口有一定的优先顺序， 而操作系统在链路状态发生变化时则自动进行切换， 例如当同时存在有线和无线连接的时候优先使用有线网络， "
"而当有线网络断开时， 则自动切换到无线网络。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1217
msgid ""
"Link aggregation and failover is covered in <<network-aggregation>> and an "
"example for using both wired and wireless connections is provided at "
"<<networking-lagg-wired-and-wireless>>."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1221
msgid ""
"This section describes a number of steps to help troubleshoot common "
"wireless networking problems."
msgstr "如果您在使用无线网络时遇到了麻烦， 此处提供了一系列用以帮助排除故障的步骤。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1223
msgid ""
"If the access point is not listed when scanning, check that the "
"configuration has not limited the wireless device to a limited set of "
"channels."
msgstr "如果您在列表中找不到无线访问点， 请确认您没有将无线设备配置为使用有限的一组频段。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1224
#, fuzzy
msgid ""
"If the device cannot associate with an access point, verify that the "
"configuration matches the settings on the access point. This includes the "
"authentication scheme and any security protocols. Simplify the configuration "
"as much as possible. If using a security protocol such as WPA or WEP, "
"configure the access point for open authentication and no security to see if "
"traffic will pass."
msgstr ""
"如果您无法关联到无线访问点， 请确认您的通讯站配置与无线访问点的配置一致。 这包括认证模式以及安全协议。 尽可能简化您的配置。 如果您正使用类似 WPA "
"或 WEP 这样的安全协议， 请将无线访问点配置为开放验证和不采用安全措施， 并检查是否数据能够通过。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1226
msgid ""
"  Debugging support is provided by man:wpa_supplicant[8]. Try running this "
"utility manually with `-dd` and look at the system logs."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1227
msgid ""
"Once the system can associate with the access point, diagnose the network "
"configuration using tools like man:ping[8]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1228
msgid ""
"There are many lower-level debugging tools. Debugging messages can be "
"enabled in the 802.11 protocol support layer using man:wlandebug[8]. For "
"example, to enable console messages related to scanning for access points "
"and the 802.11 protocol handshakes required to arrange communication:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1233
#, no-wrap
msgid ""
"# wlandebug -i wlan0 +scan+auth+debug+assoc\n"
"  net.wlan.0.debug: 0 => 0xc80000<assoc,auth,scan>\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1236
#, fuzzy
msgid ""
"  Many useful statistics are maintained by the 802.11 layer and `wlanstats`, "
"found in [.filename]#/usr/src/tools/tools/net80211#, will dump this "
"information. These statistics should display all errors identified by the "
"802.11 layer. However, some errors are identified in the device drivers that "
"lie below the 802.11 layer so they may not show up. To diagnose "
"device-specific problems, refer to the drivers' documentation."
msgstr ""
"  还有许多有用的统计信息是由 802.11 层维护的； <command>wlanstats</command> 工具可以显示这些信息。 "
"这些统计数据能够指出由 802.11 层识别出来的错误。 请注意某些错误可能是由设备驱动在 802.11 层之下识别出来的， 因此这些错误可能并不显示。 "
"要诊断与设备有关的问题， 您需要参考设备驱动程序的文档。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1238
msgid ""
"If the above information does not help to clarify the problem, submit a "
"problem report and include output from the above tools."
msgstr "如果上述信息没能帮助您找到具体的问题所在， 请提交问题报告， 并在其中附上这些工具的输出。"

#. type: Title ==
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1240
#, no-wrap
msgid "USB Tethering"
msgstr "USB网络共享"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1243
msgid ""
"Many cellphones provide the option to share their data connection over USB "
"(often called \"tethering\"). This feature uses one of RNDIS, CDC, or a "
"custom Apple(R) iPhone(R)/iPad(R) protocol."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1245
msgid "Android(TM) devices generally use the man:urndis[4] driver."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1246
msgid "Apple(R) devices use the man:ipheth[4] driver."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1247
msgid "Older devices will often use the man:cdce[4] driver."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1249
msgid "Before attaching a device, load the appropriate driver into the kernel:"
msgstr "在连接设备之前，将适当的驱动程序加载到内核中："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1255
#, no-wrap
msgid ""
"# kldload if_urndis\n"
"# kldload if_cdce\n"
"# kldload if_ipheth\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1258
msgid ""
"Once the device is attached ``ue``_0_ will be available for use like a "
"normal network device. Be sure that the \"USB tethering\" option is enabled "
"on the device."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1260
#, fuzzy
msgid ""
"To make this change permanent and load the driver as a module at boot time, "
"place the appropriate line of the following in "
"[.filename]#/boot/loader.conf#:"
msgstr "要确保该模块在重启后会加载，可加入下行到<filename>/boot/loader.conf</filename>："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1266
#, no-wrap
msgid ""
"if_urndis_load=\"YES\"\n"
"if_cdce_load=\"YES\"\n"
"if_ipheth_load=\"YES\"\n"
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1269
#, no-wrap
msgid "Bluetooth"
msgstr "蓝牙"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1272
#, fuzzy
msgid ""
"Bluetooth is a wireless technology for creating personal networks operating "
"in the 2.4 GHz unlicensed band, with a range of 10 meters. Networks are "
"usually formed ad-hoc from portable devices such as cellular phones, "
"handhelds, and laptops. Unlike Wi-Fi wireless technology, Bluetooth offers "
"higher level service profiles, such as FTP-like file servers, file pushing, "
"voice transport, serial line emulation, and more."
msgstr ""
"Bluetooth (蓝牙) 是一项无线技术， 用于建立带宽为 2.4GHZ，波长为 10 米的私有网络。 网络一般是由便携式设备，比加手机 ("
"cellular phone)， 掌上电脑 (handhelds) 和膝上电脑 (laptops)) 以 ad-hoc 形式组成。不象其它流行的无线技术"
"――Wi-Fi，Bluetooth 提供了更高级的服务层面，像类 FTP 的文件服务、文件推送 (file pushing)、语音传送、串行线模拟等等。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1274
msgid ""
"This section describes the use of a USB Bluetooth dongle on a FreeBSD "
"system. It then describes the various Bluetooth protocols and utilities."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1275
#, no-wrap
msgid "Loading Bluetooth Support"
msgstr "加载蓝牙支持"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1278
msgid ""
"The Bluetooth stack in FreeBSD is implemented using the man:netgraph[4] "
"framework. A broad variety of Bluetooth USB dongles is supported by "
"man:ng_ubt[4]. Broadcom BCM2033 based Bluetooth devices are supported by the "
"man:ubtbcmfw[4] and man:ng_ubt[4] drivers. The 3Com Bluetooth PC Card "
"3CRWB60-A is supported by the man:ng_bt3c[4] driver. Serial and UART based "
"Bluetooth devices are supported by man:sio[4], man:ng_h4[4], and "
"man:hcseriald[8]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1280
msgid ""
"Before attaching a device, determine which of the above drivers it uses, "
"then load the driver. For example, if the device uses the man:ng_ubt[4] "
"driver:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1284
#, no-wrap
msgid "# kldload ng_ubt\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1287
#, fuzzy
msgid ""
"If the Bluetooth device will be attached to the system during system "
"startup, the system can be configured to load the module at boot time by "
"adding the driver to [.filename]#/boot/loader.conf#:"
msgstr ""
"如果系统启动时 Bluetooth 设备已经存在于系统里， 那么从 <filename>/boot/loader.conf</filename> "
"里加载这个模块："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1291
#, fuzzy, no-wrap
msgid "ng_ubt_load=\"YES\"\n"
msgstr "ng_ubt_load=\"YES\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1294
msgid ""
"Once the driver is loaded, plug in the USB dongle. If the driver load was "
"successful, output similar to the following should appear on the console and "
"in [.filename]#/var/log/messages#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1301
#, fuzzy, no-wrap
msgid ""
"ubt0: vendor 0x0a12 product 0x0001, rev 1.10/5.25, addr 2\n"
"ubt0: Interface 0 endpoints: interrupt=0x81, bulk-in=0x82, bulk-out=0x2\n"
"ubt0: Interface 1 (alt.config 5) endpoints: isoc-in=0x83, isoc-out=0x3,\n"
"      wMaxPacketSize=49, nframes=6, buffer size=294\n"
msgstr ""
"ubt0: vendor 0x0a12 product 0x0001, rev 1.10/5.25, addr 2\n"
"ubt0: Interface 0 endpoints: interrupt=0x81, bulk-in=0x82, bulk-out=0x2\n"
"ubt0: Interface 1 (alt.config 5) endpoints: isoc-in=0x83, isoc-out=0x3,\n"
"      wMaxPacketSize=49, nframes=6, buffer size=294\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1304
msgid ""
"To start and stop the Bluetooth stack, use its startup script. It is a good "
"idea to stop the stack before unplugging the device. Starting the bluetooth "
"stack might require man:hcsecd[8] to be started. When starting the stack, "
"the output should be similar to the following:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1319
#, no-wrap
msgid ""
"# service bluetooth start ubt0\n"
"BD_ADDR: 00:02:72:00:d4:1a\n"
"Features: 0xff 0xff 0xf 00 00 00 00 00\n"
"<3-Slot> <5-Slot> <Encryption> <Slot offset>\n"
"<Timing accuracy> <Switch> <Hold mode> <Sniff mode>\n"
"<Park mode> <RSSI> <Channel quality> <SCO link>\n"
"<HV2 packets> <HV3 packets> <u-law log> <A-law log> <CVSD>\n"
"<Paging scheme> <Power control> <Transparent SCO data>\n"
"Max. ACL packet size: 192 bytes\n"
"Number of ACL packets: 8\n"
"Max. SCO packet size: 64 bytes\n"
"Number of SCO packets: 8\n"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1321
#, no-wrap
msgid "Finding Other Bluetooth Devices"
msgstr "寻找其他蓝牙设备"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1324
msgid ""
"The Host Controller Interface (HCI) provides a uniform method for accessing "
"Bluetooth baseband capabilities. In FreeBSD, a netgraph HCI node is created "
"for each Bluetooth device. For more details, refer to man:ng_hci[4]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1326
msgid ""
"One of the most common tasks is discovery of Bluetooth devices within RF "
"proximity. This operation is called _inquiry_. Inquiry and other HCI related "
"operations are done using man:hccontrol[8]. The example below shows how to "
"find out which Bluetooth devices are in range. The list of devices should be "
"displayed in a few seconds. Note that a remote device will only answer the "
"inquiry if it is set to _discoverable_ mode."
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1339
#, no-wrap
msgid ""
"% hccontrol -n ubt0hci inquiry\n"
"Inquiry result, num_responses=1\n"
"Inquiry result #0\n"
"       BD_ADDR: 00:80:37:29:19:a4\n"
"       Page Scan Rep. Mode: 0x1\n"
"       Page Scan Period Mode: 00\n"
"       Page Scan Mode: 00\n"
"       Class: 52:02:04\n"
"       Clock offset: 0x78ef\n"
"Inquiry complete. Status: No error [00]\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1342
msgid ""
"The `BD_ADDR` is the unique address of a Bluetooth device, similar to the "
"MAC address of a network card. This address is needed for further "
"communication with a device and it is possible to assign a human readable "
"name to a `BD_ADDR`. Information regarding the known Bluetooth hosts is "
"contained in [.filename]#/etc/bluetooth/hosts#. The following example shows "
"how to obtain the human readable name that was assigned to the remote "
"device:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1348
#, no-wrap
msgid ""
"% hccontrol -n ubt0hci remote_name_request 00:80:37:29:19:a4\n"
"BD_ADDR: 00:80:37:29:19:a4\n"
"Name: Pav's T39\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1351
#, fuzzy
msgid ""
"If an inquiry is performed on a remote Bluetooth device, it will find the "
"computer as \"your.host.name (ubt0)\". The name assigned to the local device "
"can be changed at any time."
msgstr ""
"如果在远程蓝牙设备上执行查询，它将发现计算机的名字为<quote>your.host.name "
"(ubt0)</quote>。分配给本地设备的名称可以随时更改。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1353
msgid ""
"Remote devices can be assigned aliases in "
"[.filename]#/etc/bluetooth/hosts#. More information about "
"[.filename]#/etc/bluetooth/hosts# file might be found in "
"man:bluetooth.hosts[5]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1355
msgid ""
"The Bluetooth system provides a point-to-point connection between two "
"Bluetooth units, or a point-to-multipoint connection which is shared among "
"several Bluetooth devices. The following example shows how to create a "
"connection to a remote device:"
msgstr "蓝牙系统提供了两个蓝牙设备之间的点对点连接，或者是点对多点连接，该连接在多个蓝牙设备之间共享。下面的例子显示了如何创建一个与远程设备的连接："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1359
#, no-wrap
msgid "% hccontrol -n ubt0hci create_connection BT_ADDR\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1362
msgid ""
"`create_connection` accepts `BT_ADDR` as well as host aliases in "
"[.filename]#/etc/bluetooth/hosts#."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1364
msgid ""
"The following example shows how to obtain the list of active baseband "
"connections for the local device:"
msgstr "下面的示例演示如何获取本地设备的活动基带连接列表："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1370
#, no-wrap
msgid ""
"% hccontrol -n ubt0hci read_connection_list\n"
"Remote BD_ADDR    Handle Type Mode Role Encrypt Pending Queue State\n"
"00:80:37:29:19:a4     41  ACL    0 MAST    NONE       0     0 OPEN\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1373
msgid ""
"A _connection handle_ is useful when termination of the baseband connection "
"is required, though it is normally not required to do this by hand. The "
"stack will automatically terminate inactive baseband connections."
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1379
#, no-wrap
msgid ""
"# hccontrol -n ubt0hci disconnect 41\n"
"Connection handle: 41\n"
"Reason: Connection terminated by local host [0x16]\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1382
msgid ""
"Type `hccontrol help` for a complete listing of available HCI commands. Most "
"of the HCI commands do not require superuser privileges."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1383
#, no-wrap
msgid "Device Pairing"
msgstr "设备配对"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1386
#, fuzzy
msgid ""
"By default, Bluetooth communication is not authenticated, and any device can "
"talk to any other device. A Bluetooth device, such as a cellular phone, may "
"choose to require authentication to provide a particular service. Bluetooth "
"authentication is normally done with a _PIN code_, an ASCII string up to 16 "
"characters in length. The user is required to enter the same PIN code on "
"both devices. Once the user has entered the PIN code, both devices will "
"generate a _link key_. After that, the link key can be stored either in the "
"devices or in a persistent storage. Next time, both devices will use the "
"previously generated link key. This procedure is called _pairing_. Note that "
"if the link key is lost by either device, the pairing must be repeated."
msgstr ""
"默认情况下，蓝牙通信不进行身份验证，任何设备都可以与任何其他设备进行通话。蓝牙设备，如手机等蓝牙设备，可以选择需要认证才能提供特定服务。蓝牙认证通常通过<"
"emphasis><acronym>PIN</acronym>代码</emphasis>来完成，该代码是一个长度不超过16个字符的ASCII字符串。用户必"
"须在两个设备上输入相同的<acronym>PIN</acronym>代码。一旦用户输入了<acronym>PIN</acronym>代码，两个设备都将生成"
"一个<emphasis>链接密钥</emphasis>。之后，这个链接密钥可以存储在设备中或持久化存储中。下一次，两个设备都将使用之前生成的链接密钥。这个"
"过程被称为<emphasis>pairing</emphasis>。注意，如果链接密钥被任何一个设备丢失，必须重新配对。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1388
msgid ""
"The man:hcsecd[8] daemon is responsible for handling Bluetooth "
"authentication requests. The default configuration file is "
"[.filename]#/etc/bluetooth/hcsecd.conf#. An example section for a cellular "
"phone with the PIN code set to `1234` is shown below:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1397
#, fuzzy, no-wrap
msgid ""
"device {\n"
"        bdaddr  00:80:37:29:19:a4;\n"
"        name    \"Pav's T39\";\n"
"        key     nokey;\n"
"        pin     \"1234\";\n"
"      }\n"
msgstr ""
"device {\n"
"        bdaddr  00:80:37:29:19:a4;\n"
"        name    \"Pav's T39\";\n"
"        key     nokey;\n"
"        pin     \"1234\";\n"
"      }\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1400
msgid ""
"The only limitation on PIN codes is length. Some devices, such as Bluetooth "
"headsets, may have a fixed PIN code built in. The `-d` switch forces "
"man:hcsecd[8] to stay in the foreground, so it is easy to see what is "
"happening. Set the remote device to receive pairing and initiate the "
"Bluetooth connection to the remote device. The remote device should indicate "
"that pairing was accepted and request the PIN code. Enter the same PIN code "
"listed in [.filename]#hcsecd.conf#. Now the computer and the remote device "
"are paired. Alternatively, pairing can be initiated on the remote device."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1402
msgid ""
"The following line can be added to [.filename]#/etc/rc.conf# to configure "
"man:hcsecd[8] to start automatically on system start:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1406
#, fuzzy, no-wrap
msgid "hcsecd_enable=\"YES\"\n"
msgstr "hcsecd_enable=\"YES\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1409
msgid "The following is a sample of the man:hcsecd[8] daemon output:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1418
#, fuzzy, no-wrap
msgid ""
"hcsecd[16484]: Got Link_Key_Request event from 'ubt0hci', remote bdaddr "
"0:80:37:29:19:a4\n"
"hcsecd[16484]: Found matching entry, remote bdaddr 0:80:37:29:19:a4, name "
"'Pav's T39', link key doesn't exist\n"
"hcsecd[16484]: Sending Link_Key_Negative_Reply to 'ubt0hci' for remote "
"bdaddr 0:80:37:29:19:a4\n"
"hcsecd[16484]: Got PIN_Code_Request event from 'ubt0hci', remote bdaddr "
"0:80:37:29:19:a4\n"
"hcsecd[16484]: Found matching entry, remote bdaddr 0:80:37:29:19:a4, name "
"'Pav's T39', PIN code exists\n"
"hcsecd[16484]: Sending PIN_Code_Reply to 'ubt0hci' for remote bdaddr "
"0:80:37:29:19:a4\n"
msgstr ""
"hcsecd[16484]: Got Link_Key_Request event from 'ubt0hci', remote bdaddr "
"0:80:37:29:19:a4\n"
"hcsecd[16484]: Found matching entry, remote bdaddr 0:80:37:29:19:a4, name "
"'Pav's T39', link key doesn't exist\n"
"hcsecd[16484]: Sending Link_Key_Negative_Reply to 'ubt0hci' for remote "
"bdaddr 0:80:37:29:19:a4\n"
"hcsecd[16484]: Got PIN_Code_Request event from 'ubt0hci', remote bdaddr "
"0:80:37:29:19:a4\n"
"hcsecd[16484]: Found matching entry, remote bdaddr 0:80:37:29:19:a4, name "
"'Pav's T39', PIN code exists\n"
"hcsecd[16484]: Sending PIN_Code_Reply to 'ubt0hci' for remote bdaddr "
"0:80:37:29:19:a4\n"

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1420
#, no-wrap
msgid "Network Access with PPP Profiles"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1423
#, fuzzy
msgid ""
"A Dial-Up Networking (DUN) profile can be used to configure a cellular phone "
"as a wireless modem for connecting to a dial-up Internet access server. It "
"can also be used to configure a computer to receive data calls from a "
"cellular phone."
msgstr ""
"拨号网络（<acronym>DUN</acronym>）配置文件可用于将蜂窝电话配置为无线调制解调器，以连接到Internet访问服务器。它还可以用于配置"
"计算机以接收来自蜂窝电话的数据呼叫。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1425
msgid ""
"Network access with a PPP profile can be used to provide LAN access for a "
"single Bluetooth device or multiple Bluetooth devices. It can also provide "
"PC to PC connection using PPP networking over serial cable emulation."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1427
msgid ""
"In FreeBSD, these profiles are implemented with man:ppp[8] and the "
"man:rfcomm_pppd[8] wrapper which converts a Bluetooth connection into "
"something PPP can use. Before a profile can be used, a new PPP label must be "
"created in [.filename]#/etc/ppp/ppp.conf#. Consult man:rfcomm_pppd[8] for "
"examples."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1429
msgid ""
"In this example, man:rfcomm_pppd[8] is used to open a connection to a remote "
"device with a `BD_ADDR` of `00:80:37:29:19:a4` on a DUNRFCOMM channel:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1433
#, no-wrap
msgid "# rfcomm_pppd -a 00:80:37:29:19:a4 -c -C dun -l rfcomm-dialup\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1436
msgid ""
"The actual channel number will be obtained from the remote device using the "
"SDP protocol. It is possible to specify the RFCOMM channel by hand, and in "
"this case man:rfcomm_pppd[8] will not perform the SDP query. Use "
"man:sdpcontrol[8] to find out the RFCOMM channel on the remote device."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1438
msgid ""
"In order to provide network access with the PPPLAN service, man:sdpd[8] must "
"be running and a new entry for LAN clients must be created in "
"[.filename]#/etc/ppp/ppp.conf#. Consult man:rfcomm_pppd[8] for "
"examples. Finally, start the RFCOMMPPP server on a valid RFCOMM channel "
"number. The RFCOMMPPP server will automatically register the Bluetooth LAN "
"service with the local SDP daemon. The example below shows how to start the "
"RFCOMMPPP server."
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1442
#, no-wrap
msgid "# rfcomm_pppd -s -C 7 -l rfcomm-server\n"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1444
#, no-wrap
msgid "Bluetooth Protocols"
msgstr "蓝牙通信协议"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1447
msgid ""
"This section provides an overview of the various Bluetooth protocols, their "
"function, and associated utilities."
msgstr "本节概述了各种蓝牙协议、功能和相关程序。"

#. type: Title ====
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1448
#, no-wrap
msgid "Logical Link Control and Adaptation Protocol (L2CAP)"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1451
#, fuzzy
msgid ""
"The Logical Link Control and Adaptation Protocol (L2CAP) provides "
"connection-oriented and connectionless data services to upper layer "
"protocols. L2CAP permits higher level protocols and applications to transmit "
"and receive L2CAP data packets up to 64 kilobytes in length."
msgstr ""
"逻辑链路控制和适应协议（<acronym>L2CAP</acronym>）为上层协议提供面向连接和无连接的数据服务。<acronym>L2CAP</acr"
"onym>允许上层协议和应用程序发送和接收<acronym>L2CAP</acronym>数据包，长度不超过64k字节。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1453
msgid ""
"L2CAP is based around the concept of _channels_. A channel is a logical "
"connection on top of a baseband connection, where each channel is bound to a "
"single protocol in a many-to-one fashion. Multiple channels can be bound to "
"the same protocol, but a channel cannot be bound to multiple protocols. Each "
"L2CAP packet received on a channel is directed to the appropriate higher "
"level protocol. Multiple channels can share the same baseband connection."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1455
msgid ""
"In FreeBSD, a netgraph L2CAP node is created for each Bluetooth device. This "
"node is normally connected to the downstream Bluetooth HCI node and upstream "
"Bluetooth socket nodes. The default name for the L2CAP node is "
"\"devicel2cap\". For more details refer to man:ng_l2cap[4]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1457
msgid ""
"A useful command is man:l2ping[8], which can be used to ping other "
"devices. Some Bluetooth implementations might not return all of the data "
"sent to them, so `0 bytes` in the following example is normal."
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1465
#, no-wrap
msgid ""
"# l2ping -a 00:80:37:29:19:a4\n"
"0 bytes from 0:80:37:29:19:a4 seq_no=0 time=48.633 ms result=0\n"
"0 bytes from 0:80:37:29:19:a4 seq_no=1 time=37.551 ms result=0\n"
"0 bytes from 0:80:37:29:19:a4 seq_no=2 time=28.324 ms result=0\n"
"0 bytes from 0:80:37:29:19:a4 seq_no=3 time=46.150 ms result=0\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1468
msgid ""
"The man:l2control[8] utility is used to perform various operations on L2CAP "
"nodes. This example shows how to obtain the list of logical connections "
"(channels) and the list of baseband connections for the local device:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1479
#, no-wrap
msgid ""
"% l2control -a 00:02:72:00:d4:1a read_channel_list\n"
"L2CAP channels:\n"
"Remote BD_ADDR     SCID/ DCID   PSM  IMTU/ OMTU State\n"
"00:07:e0:00:0b:ca    66/   64     3   132/  672 OPEN\n"
"% l2control -a 00:02:72:00:d4:1a read_connection_list\n"
"L2CAP connections:\n"
"Remote BD_ADDR    Handle Flags Pending State\n"
"00:07:e0:00:0b:ca     41 O           0 OPEN\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1482
msgid ""
"Another diagnostic tool is man:btsockstat[1]. It is similar to "
"man:netstat[1], but for Bluetooth network-related data structures. The "
"example below shows the same logical connection as man:l2control[8] above."
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1495
#, no-wrap
msgid ""
"% btsockstat\n"
"Active L2CAP sockets\n"
"PCB      Recv-Q Send-Q Local address/PSM       Foreign address   CID   "
"State\n"
"c2afe900      0      0 00:02:72:00:d4:1a/3     00:07:e0:00:0b:ca 66    "
"OPEN\n"
"Active RFCOMM sessions\n"
"L2PCB    PCB      Flag MTU   Out-Q DLCs State\n"
"c2afe900 c2b53380 1    127   0     Yes  OPEN\n"
"Active RFCOMM sockets\n"
"PCB      Recv-Q Send-Q Local address     Foreign address   Chan DLCI State\n"
"c2e8bc80      0    250 00:02:72:00:d4:1a 00:07:e0:00:0b:ca 3    6    OPEN\n"
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1497
#, no-wrap
msgid "Radio Frequency Communication (RFCOMM)"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1500
#, fuzzy
msgid ""
"The RFCOMM protocol provides emulation of serial ports over the L2CAP "
"protocol. RFCOMM is a simple transport protocol, with additional provisions "
"for emulating the 9 circuits of RS-232 (EIATIA-232-E) serial ports. It "
"supports up to 60 simultaneous connections (RFCOMM channels) between two "
"Bluetooth devices."
msgstr ""
"<acronym>RFCOMM</acronym>协议通过<acronym>L2CAP</acronym>协议提供串行端口的仿真。<acronym>RFC"
"OMM</acronym>是一种简单的传输协议，为模拟 RS-232 （EIATIA-232-E） 串行端口的 9 个电路提供了额外规定。"
"它支持两个蓝牙设备之间多达 60 个同时连接（<acronym>RFCOMM</acronym>通道）。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1502
#, fuzzy
msgid ""
"For the purposes of RFCOMM, a complete communication path involves two "
"applications running on the communication endpoints with a communication "
"segment between them. RFCOMM is intended to cover applications that make use "
"of the serial ports of the devices in which they reside. The communication "
"segment is a direct connect Bluetooth link from one device to another."
msgstr ""
"为了实现 <acronym>RFCOMM</acronym>， 运行于不同设备上的应用程序建立起一条关于它们之间通信段的通信路径。 "
"<acronym>RFCOMM</acronym> 实际上适用于使用串行端口的应用软件。 通信段是一个设备到另一个设备的蓝牙连接 (直接连接)。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1504
#, fuzzy
msgid ""
"RFCOMM is only concerned with the connection between the devices in the "
"direct connect case, or between the device and a modem in the network "
"case. RFCOMM can support other configurations, such as modules that "
"communicate via Bluetooth wireless technology on one side and provide a "
"wired interface on the other side."
msgstr ""
"<acronym>RFCOMM</acronym>只关注直连箱中的设备之间的连接，或者设备与网络箱中的调制解调器之间的连接。<acronym>RFCOMM"
"</acronym>可以支持其他配置，例如通过蓝牙无线技术进行通信的模块，在一侧通过蓝牙无线技术进行通信，在另一侧提供有线接口。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1506
msgid "In FreeBSD, RFCOMM is implemented at the Bluetooth sockets layer."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1507
#, no-wrap
msgid "Service Discovery Protocol (SDP)"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1510
#, fuzzy
msgid ""
"The Service Discovery Protocol (SDP) provides the means for client "
"applications to discover the existence of services provided by server "
"applications as well as the attributes of those services. The attributes of "
"a service include the type or class of service offered and the mechanism or "
"protocol information needed to utilize the service."
msgstr ""
"服务发现协议（Service Discovery Protocol，<acronym>SDP</acronym>）为客户端应用程序提供了发现服务器应用程序"
"提供的服务的存在以及这些服务的属性的方法。服务的属性包括所提供的服务的类型或类别，以及利用该服务所需的机制或协议信息。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1512
#, fuzzy
msgid ""
"SDP involves communication between a SDP server and a SDP client. The server "
"maintains a list of service records that describe the characteristics of "
"services associated with the server. Each service record contains "
"information about a single service. A client may retrieve information from a "
"service record maintained by the SDP server by issuing a SDP request. If the "
"client, or an application associated with the client, decides to use a "
"service, it must open a separate connection to the service provider in order "
"to utilize the service. SDP provides a mechanism for discovering services "
"and their attributes, but it does not provide a mechanism for utilizing "
"those services."
msgstr ""
"<acronym>SDP</acronym>涉及<acronym>SDP</acronym>服务器和<acronym>SDP</acronym>客户端之间"
"的通信。服务器维护着一个服务记录列表，这些记录描述了与服务器相关联的服务特征。每个服务记录包含有关单个服务信息。客户端可以通过发出 "
"<acronym>SDP</acronym>请求，从 <acronym>SDP</acronym>服务器维护的服务记录中检索信息。如果客户机或与客户机相关"
"联的应用程序决定使用服务，它必须打开与服务提供商的单独连接才能使用该服务。<acronym>SDP</acronym>提供了一种发现服务及其属性的机制，但"
"它并没有提供利用这些服务的机制。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1514
msgid ""
"Normally, a SDP client searches for services based on some desired "
"characteristics of the services. However, there are times when it is "
"desirable to discover which types of services are described by an SDP "
"server's service records without any prior information about the "
"services. This process of looking for any offered services is called "
"_browsing_."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1516
msgid ""
"The Bluetooth SDP server, man:sdpd[8], and command line client, "
"man:sdpcontrol[8], are included in the standard FreeBSD installation. The "
"following example shows how to perform a SDP browse query."
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1527
#, no-wrap
msgid ""
"% sdpcontrol -a 00:01:03:fc:6e:ec browse\n"
"Record Handle: 00000000\n"
"Service Class ID List:\n"
"        Service Discovery Server (0x1000)\n"
"Protocol Descriptor List:\n"
"        L2CAP (0x0100)\n"
"                Protocol specific parameter #1: u/int/uuid16 1\n"
"                Protocol specific parameter #2: u/int/uuid16 1\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1531
#, no-wrap
msgid ""
"Record Handle: 0x00000001\n"
"Service Class ID List:\n"
"        Browse Group Descriptor (0x1001)\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1541
#, no-wrap
msgid ""
"Record Handle: 0x00000002\n"
"Service Class ID List:\n"
"        LAN Access Using PPP (0x1102)\n"
"Protocol Descriptor List:\n"
"        L2CAP (0x0100)\n"
"        RFCOMM (0x0003)\n"
"                Protocol specific parameter #1: u/int8/bool 1\n"
"Bluetooth Profile Descriptor List:\n"
"        LAN Access Using PPP (0x1102) ver. 1.0\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1544
#, fuzzy
msgid ""
"Note that each service has a list of attributes, such as the RFCOMM "
"channel. Depending on the service, the user might need to make note of some "
"of the attributes. Some Bluetooth implementations do not support service "
"browsing and may return an empty list. In this case, it is possible to "
"search for the specific service. The example below shows how to search for "
"the OBEX Object Push (OPUSH) service:"
msgstr ""
"注意，每个服务都有一个属性列表，例如<acronym>RFCOMM</acronym>通道。根据服务的不同，用户可能需要注意到其中的一些属性。一些蓝牙实现"
"不支持服务浏览，可能会返回一个空列表。在这种情况下，可以搜索特定的服务。下面的示例显示了如何搜索<acronym>OBEX</acronym>对象推送（<"
"acronym>OPUSH</acronym>）服务："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1548
#, no-wrap
msgid "% sdpcontrol -a 00:01:03:fc:6e:ec search OPUSH\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1551
msgid ""
"Offering services on FreeBSD to Bluetooth clients is done with the "
"man:sdpd[8] server. The following line can be added to "
"[.filename]#/etc/rc.conf#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1555
#, fuzzy, no-wrap
msgid "sdpd_enable=\"YES\"\n"
msgstr "sdpd_enable=\"YES\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1558
msgid "Then the man:sdpd[8] daemon can be started with:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1562
#, no-wrap
msgid "# service sdpd start\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1565
msgid ""
"The local server application that wants to provide a Bluetooth service to "
"remote clients will register the service with the local SDP daemon. An "
"example of such an application is man:rfcomm_pppd[8]. Once started, it will "
"register the Bluetooth LAN service with the local SDP daemon."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1567
msgid ""
"The list of services registered with the local SDP server can be obtained by "
"issuing a SDP browse query via the local control channel:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1571
#, no-wrap
msgid "# sdpcontrol -l browse\n"
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1573
#, no-wrap
msgid "OBEX Object Push (OPUSH)"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1576
#, fuzzy
msgid ""
"Object Exchange (OBEX) is a widely used protocol for simple file transfers "
"between mobile devices. Its main use is in infrared communication, where it "
"is used for generic file transfers between notebooks or PDAs, and for "
"sending business cards or calendar entries between cellular phones and other "
"devices with Personal Information Manager (PIM) applications."
msgstr ""
"对象交换（<acronym>OBEX</acronym>）是一种广泛使用的协议，用于移动设备之间的简单文件传输。它主要用于红外通信，用于在笔记本和<acr"
"onym>PDA</acronym>之间传输文件，以及在手机和其他带有个人信息管理器（<acronym>PIM</acronym>）应用程序的设备之间发送"
"名片或日历条目。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1578
msgid ""
"The OBEX server and client are implemented by obexapp, which can be "
"installed using the package:comms/obexapp[] package or port."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1580
msgid ""
"The OBEX client is used to push and/or pull objects from the OBEX server. An "
"example object is a business card or an appointment. The OBEX client can "
"obtain the RFCOMM channel number from the remote device via SDP. This can be "
"done by specifying the service name instead of the RFCOMM channel "
"number. Supported service names are: `IrMC`, `FTRN`, and `OPUSH`. It is also "
"possible to specify the RFCOMM channel as a number. Below is an example of "
"an OBEX session where the device information object is pulled from the "
"cellular phone, and a new object, the business card, is pushed into the "
"phone's directory."
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1590
#, no-wrap
msgid ""
"% obexapp -a 00:80:37:29:19:a4 -C IrMC\n"
"obex> get telecom/devinfo.txt devinfo-t39.txt\n"
"Success, response: OK, Success (0x20)\n"
"obex> put new.vcf\n"
"Success, response: OK, Success (0x20)\n"
"obex> di\n"
"Success, response: OK, Success (0x20)\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1593
msgid ""
"In order to provide the OPUSH service, man:sdpd[8] must be running and a "
"root folder, where all incoming objects will be stored, must be created. The "
"default path to the root folder is [.filename]#/var/spool/obex#. Finally, "
"start the OBEX server on a valid RFCOMM channel number. The OBEX server will "
"automatically register the OPUSH service with the local SDP daemon. The "
"example below shows how to start the OBEX server."
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1597
#, no-wrap
msgid "# obexapp -s -C 10\n"
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1599
#, no-wrap
msgid "Serial Port Profile (SPP)"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1602
#, fuzzy
msgid ""
"The Serial Port Profile (SPP) allows Bluetooth devices to perform serial "
"cable emulation. This profile allows legacy applications to use Bluetooth as "
"a cable replacement, through a virtual serial port abstraction."
msgstr ""
"串行端口配置文件（<acronym>SPP</acronym>）允许蓝牙设备进行串行电缆仿真。该配置文件允许传统的应用程序通过虚拟的串行端口抽象，将蓝牙作"
"为线缆的替代品。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1604
msgid ""
"In FreeBSD, man:rfcomm_sppd[1] implements SPP and a pseudo tty is used as a "
"virtual serial port abstraction. The example below shows how to connect to a "
"remote device's serial port service. A RFCOMM channel does not have to be "
"specified as man:rfcomm_sppd[1] can obtain it from the remote device via "
"SDP. To override this, specify a RFCOMM channel on the command line."
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1610
#, no-wrap
msgid ""
"# rfcomm_sppd -a 00:07:E0:00:0B:CA -t\n"
"rfcomm_sppd[94692]: Starting on /dev/pts/6...\n"
"/dev/pts/6\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1613
msgid "Once connected, the pseudo tty can be used as serial port:"
msgstr "连接后，可以像使用串口一样使用虚拟终端（pseudo tty）："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1617
#, no-wrap
msgid "# cu -l /dev/pts/6\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1620
msgid "The pseudo tty is printed on stdout and can be read by wrapper scripts:"
msgstr "伪 tty 打印在 stdout 上，可以通过包装脚本读取："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1625
#, fuzzy, no-wrap
msgid ""
"PTS=`rfcomm_sppd -a 00:07:E0:00:0B:CA -t`\n"
"cu -l $PTS\n"
msgstr ""
"PTS=`rfcomm_sppd -a 00:07:E0:00:0B:CA -t`\n"
"cu -l $PTS\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1630
#, fuzzy
msgid ""
"By default, when FreeBSD is accepting a new connection, it tries to perform "
"a role switch and become master. Some older Bluetooth devices which do not "
"support role switching will not be able to connect. Since role switching is "
"performed when a new connection is being established, it is not possible to "
"ask the remote device if it supports role switching. However, there is a HCI "
"option to disable role switching on the local side:"
msgstr ""
"默认情况下，当FreeBSD在接受一个新的连接时，会尝试执行角色切换并成为 "
"master。一些不支持角色切换的老式蓝牙设备将无法连接。因为角色切换是在建立新连接时执行的， "
"所以无法询问远程设备是否支持角色切换。但是，有一个<acronym>HCI</acronym>选项可以在本地侧禁用角色切换："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1634
#, no-wrap
msgid "# hccontrol -n ubt0hci write_node_role_switch 0\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1637
msgid ""
"To display Bluetooth packets, use the third-party package hcidump, which can "
"be installed using the package:comms/hcidump[] package or port. This utility "
"is similar to man:tcpdump[1] and can be used to display the contents of "
"Bluetooth packets on the terminal and to dump the Bluetooth packets to a "
"file."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1639
#, no-wrap
msgid "Bridging"
msgstr "桥接"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1642
msgid ""
"It is sometimes useful to divide a network, such as an Ethernet segment, "
"into network segments without having to create IP subnets and use a router "
"to connect the segments together. A device that connects two networks "
"together in this fashion is called a \"bridge\"."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1644
#, fuzzy
msgid ""
"A bridge works by learning the MAC addresses of the devices on each of its "
"network interfaces. It forwards traffic between networks only when the "
"source and destination MAC addresses are on different networks. In many "
"respects, a bridge is like an Ethernet switch with very few ports. A FreeBSD "
"system with multiple network interfaces can be configured to act as a "
"bridge."
msgstr ""
"网桥通过学习每个网络接口上的 <acronym>MAC</acronym> 地址 (以太网地址) 工作。 只当数据包的源地址和目标 "
"<acronym>MAC</acronym> 地址处于不同的网络时， 网桥才进行转发。在很多方面，网桥就像一个带有很少端口的以太网交换机。"
"具有多个网络接口的 FreeBSD 系统可以配置为充当网桥。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1646
msgid "Bridging can be useful in the following situations:"
msgstr "在以下情况下，桥接非常有用："

#. type: Labeled list
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1647
#, no-wrap
msgid "Connecting Networks"
msgstr "连接网络"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1649
msgid ""
"The basic operation of a bridge is to join two or more network "
"segments. There are many reasons to use a host-based bridge instead of "
"networking equipment, such as cabling constraints or firewalling. A bridge "
"can also connect a wireless interface running in hostap mode to a wired "
"network and act as an access point."
msgstr ""
"网桥的基本操作是将两个或多个网段连接在一起。 由于各式各样的原因， 人们会希望使用一台真正的计算机， 而不是网络设备来充任网桥的角色， "
"常见的原因包括线缆的限制、 需要进行防火墙， 或为虚拟机网络接口连接虚拟网络。 网桥也可以将无线网卡以 hostap 模式接入有线网络。"

#. type: Labeled list
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1650
#, no-wrap
msgid "Filtering/Traffic Shaping Firewall"
msgstr "过滤/数据整形防火墙"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1652
msgid ""
"A bridge can be used when firewall functionality is needed without routing "
"or Network Address Translation (NAT)."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1654
msgid ""
"An example is a small company that is connected via DSL or ISDN to an "
"ISP. There are thirteen public IP addresses from the ISP and ten computers "
"on the network. In this situation, using a router-based firewall is "
"difficult because of subnetting issues. A bridge-based firewall can be "
"configured without any IP addressing issues."
msgstr ""

#. type: Labeled list
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1655
#, no-wrap
msgid "Network Tap"
msgstr "Network Tap (网络分流器)"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1657
msgid ""
"A bridge can join two network segments in order to inspect all Ethernet "
"frames that pass between them using man:bpf[4] and man:tcpdump[1] on the "
"bridge interface or by sending a copy of all frames out an additional "
"interface known as a span port."
msgstr ""

#. type: Labeled list
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1658
#, no-wrap
msgid "Layer 2 VPN"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1660
msgid ""
"Two Ethernet networks can be joined across an IP link by bridging the "
"networks to an EtherIP tunnel or a man:tap[4] based solution such as "
"OpenVPN."
msgstr ""

#. type: Labeled list
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1661
#, no-wrap
msgid "Layer 2 Redundancy"
msgstr "二层冗余（Layer 2 Redundancy）"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1663
msgid ""
"A network can be connected together with multiple links and use the Spanning "
"Tree Protocol (STP) to block redundant paths."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1665
msgid ""
"This section describes how to configure a FreeBSD system as a bridge using "
"man:if_bridge[4]. A netgraph bridging driver is also available, and is "
"described in man:ng_bridge[4]."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1669
msgid ""
"Packet filtering can be used with any firewall package that hooks into the "
"man:pfil[9] framework. The bridge can be used as a traffic shaper with "
"man:altq[4] or man:dummynet[4]."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1671
#, no-wrap
msgid "Enabling the Bridge"
msgstr "开启桥接"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1674
msgid ""
"In FreeBSD, man:if_bridge[4] is a kernel module which is automatically "
"loaded by man:ifconfig[8] when creating a bridge interface. It is also "
"possible to compile bridge support into a custom kernel by adding `device "
"if_bridge` to the custom kernel configuration file."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1676
msgid ""
"The bridge is created using interface cloning. To create the bridge "
"interface:"
msgstr "网桥使用端口克隆创建。使用以下命令创建网桥："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1687
#, no-wrap
msgid ""
"# ifconfig bridge create\n"
"bridge0\n"
"# ifconfig bridge0\n"
"bridge0: flags=8802<BROADCAST,SIMPLEX,MULTICAST> metric 0 mtu 1500\n"
"        ether 96:3d:4b:f1:79:7a\n"
"        id 00:00:00:00:00:00 priority 32768 hellotime 2 fwddelay 15\n"
"        maxage 20 holdcnt 6 proto rstp maxaddr 100 timeout 1200\n"
"        root id 00:00:00:00:00:00 priority 0 ifcost 0 port 0\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1690
msgid ""
"When a bridge interface is created, it is automatically assigned a randomly "
"generated Ethernet address. The `maxaddr` and `timeout` parameters control "
"how many MAC addresses the bridge will keep in its forwarding table and how "
"many seconds before each entry is removed after it is last seen. The other "
"parameters control how STP operates."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1692
msgid ""
"Next, specify which network interfaces to add as members of the bridge. For "
"the bridge to forward packets, all member interfaces and the bridge need to "
"be up:"
msgstr "接下来，指定要添加为网桥成员的网络接口。为了使网桥转发数据包，所有成员接口和网桥都必须处于启用状态："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1698
#, no-wrap
msgid ""
"# ifconfig bridge0 addm fxp0 addm fxp1 up\n"
"# ifconfig fxp0 up\n"
"# ifconfig fxp1 up\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1701
msgid ""
"The bridge can now forward Ethernet frames between [.filename]#fxp0# and "
"[.filename]#fxp1#. Add the following lines to [.filename]#/etc/rc.conf# so "
"the bridge is created at startup:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1708
#, fuzzy, no-wrap
msgid ""
"cloned_interfaces=\"bridge0\"\n"
"ifconfig_bridge0=\"addm fxp0 addm fxp1 up\"\n"
"ifconfig_fxp0=\"up\"\n"
"ifconfig_fxp1=\"up\"\n"
msgstr ""
"cloned_interfaces=\"bridge0\"\n"
"ifconfig_bridge0=\"addm fxp0 addm fxp1 up\"\n"
"ifconfig_fxp0=\"up\"\n"
"ifconfig_fxp1=\"up\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1711
msgid ""
"If the bridge host needs an IP address, set it on the bridge interface, not "
"on the member interfaces. The address can be set statically or via "
"DHCP. This example sets a static IP address:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1715
#, no-wrap
msgid "# ifconfig bridge0 inet 192.168.0.1/24\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1718
msgid ""
"It is also possible to assign an IPv6 address to a bridge interface. To make "
"the changes permanent, add the addressing information to "
"[.filename]#/etc/rc.conf#."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1722
msgid ""
"When packet filtering is enabled, bridged packets will pass through the "
"filter inbound on the originating interface on the bridge interface, and "
"outbound on the appropriate interfaces. Either stage can be disabled. When "
"direction of the packet flow is important, it is best to firewall on the "
"member interfaces rather than the bridge itself."
msgstr ""
"当启用数据包过滤功能时，桥接数据包将在桥接接口上的发端接口上的入站数据包通过过滤器，在适当的接口上的出站数据包通过过滤器。这两个阶段都可以禁用。当数据包流"
"的方向很重要时，最好在成员接口上启用防火墙，而不是网桥本身。"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1724
msgid ""
"The bridge has several configurable settings for passing non-IP and IP "
"packets, and layer2 firewalling with man:ipfw[8]. See man:if_bridge[4] for "
"more information."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1726
#, no-wrap
msgid "Enabling Spanning Tree"
msgstr "开启Spanning Tree"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1729
#, fuzzy
msgid ""
"For an Ethernet network to function properly, only one active path can exist "
"between two devices. The STP protocol detects loops and puts redundant links "
"into a blocked state. Should one of the active links fail, STP calculates a "
"different tree and enables one of the blocked paths to restore connectivity "
"to all points in the network."
msgstr ""
"为了使以太网网络正常运行，两个设备之间只能存在一条活动路径。<acronym>STP</acronym>协议会检测到环路，并将冗余链路置入阻塞状态。如果其"
"中一条活动链路失效，<acronym>STP</acronym>会计算出不同的树，并使被阻塞的路径之一恢复到网络中所有点的连接。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1731
msgid ""
"The Rapid Spanning Tree Protocol (RSTP or 802.1w) provides backwards "
"compatibility with legacy STP. RSTP provides faster convergence and "
"exchanges information with neighboring switches to quickly transition to "
"forwarding mode without creating loops. FreeBSD supports RSTP and STP as "
"operating modes, with RSTP being the default mode."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1733
msgid ""
"STP can be enabled on member interfaces using man:ifconfig[8]. For a bridge "
"with [.filename]#fxp0# and [.filename]#fxp1# as the current interfaces, "
"enable STP with:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1748
#, fuzzy, no-wrap
msgid ""
"# ifconfig bridge0 stp fxp0 stp fxp1\n"
"bridge0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> metric 0 mtu "
"1500\n"
"        ether d6:cf:d5:a0:94:6d\n"
"        id 00:01:02:4b:d4:50 priority 32768 hellotime 2 fwddelay 15\n"
"        maxage 20 holdcnt 6 proto rstp maxaddr 100 timeout 1200\n"
"        root id 00:01:02:4b:d4:50 priority 32768 ifcost 0 port 0\n"
"        member: fxp0 flags=1c7<LEARNING,DISCOVER,STP,AUTOEDGE,PTP,AUTOPTP>\n"
"                port 3 priority 128 path cost 200000 proto rstp\n"
"                role designated state forwarding\n"
"        member: fxp1 flags=1c7<LEARNING,DISCOVER,STP,AUTOEDGE,PTP,AUTOPTP>\n"
"                port 4 priority 128 path cost 200000 proto rstp\n"
"                role designated state forwarding\n"
msgstr ""
"bridge0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 "
"mtu 1500\n"
"        ether 96:3d:4b:f1:79:7a\n"
"        id 00:13:d4:9a:06:7a priority 32768 hellotime 2 fwddelay 15\n"
"        maxage 20 holdcnt 6 proto rstp maxaddr 100 timeout 1200\n"
"        root id 00:01:02:4b:d4:50 priority 32768 ifcost 400000 port 4\n"
"        member: fxp0 "
"flags=1c7&lt;LEARNING,DISCOVER,STP,AUTOEDGE,PTP,AUTOPTP&gt;\n"
"                port 4 priority 128 path cost 200000 proto rstp\n"
"                role root state forwarding\n"
"        member: fxp1 "
"flags=1c7&lt;LEARNING,DISCOVER,STP,AUTOEDGE,PTP,AUTOPTP&gt;\n"
"                port 5 priority 128 path cost 200000 proto rstp\n"
"                role designated state forwarding\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1751
msgid ""
"This bridge has a spanning tree ID of `00:01:02:4b:d4:50` and a priority of "
"`32768`. As the `root id` is the same, it indicates that this is the root "
"bridge for the tree."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1753
msgid "Another bridge on the network also has STP enabled:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1767
#, fuzzy, no-wrap
msgid ""
"bridge0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> metric 0 mtu "
"1500\n"
"        ether 96:3d:4b:f1:79:7a\n"
"        id 00:13:d4:9a:06:7a priority 32768 hellotime 2 fwddelay 15\n"
"        maxage 20 holdcnt 6 proto rstp maxaddr 100 timeout 1200\n"
"        root id 00:01:02:4b:d4:50 priority 32768 ifcost 400000 port 4\n"
"        member: fxp0 flags=1c7<LEARNING,DISCOVER,STP,AUTOEDGE,PTP,AUTOPTP>\n"
"                port 4 priority 128 path cost 200000 proto rstp\n"
"                role root state forwarding\n"
"        member: fxp1 flags=1c7<LEARNING,DISCOVER,STP,AUTOEDGE,PTP,AUTOPTP>\n"
"                port 5 priority 128 path cost 200000 proto rstp\n"
"                role designated state forwarding\n"
msgstr ""
"bridge0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 "
"mtu 1500\n"
"        ether 96:3d:4b:f1:79:7a\n"
"        id 00:13:d4:9a:06:7a priority 32768 hellotime 2 fwddelay 15\n"
"        maxage 20 holdcnt 6 proto rstp maxaddr 100 timeout 1200\n"
"        root id 00:01:02:4b:d4:50 priority 32768 ifcost 400000 port 4\n"
"        member: fxp0 "
"flags=1c7&lt;LEARNING,DISCOVER,STP,AUTOEDGE,PTP,AUTOPTP&gt;\n"
"                port 4 priority 128 path cost 200000 proto rstp\n"
"                role root state forwarding\n"
"        member: fxp1 "
"flags=1c7&lt;LEARNING,DISCOVER,STP,AUTOEDGE,PTP,AUTOPTP&gt;\n"
"                port 5 priority 128 path cost 200000 proto rstp\n"
"                role designated state forwarding\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1770
msgid ""
"The line `root id 00:01:02:4b:d4:50 priority 32768 ifcost 400000 port 4` "
"shows that the root bridge is `00:01:02:4b:d4:50` and has a path cost of "
"`400000` from this bridge. The path to the root bridge is via `port 4` which "
"is [.filename]#fxp0#."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1771
#, no-wrap
msgid "Bridge Interface Parameters"
msgstr "桥接界面参数"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1774
msgid ""
"Several `ifconfig` parameters are unique to bridge interfaces. This section "
"summarizes some common uses for these parameters. The complete list of "
"available parameters is described in man:ifconfig[8]."
msgstr ""

#. type: Labeled list
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1775
#, no-wrap
msgid "private"
msgstr "private"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1777
#, fuzzy
msgid ""
"A private interface does not forward any traffic to any other port that is "
"also designated as a private interface. The traffic is blocked "
"unconditionally so no Ethernet frames will be forwarded, including ARP "
"packets. If traffic needs to be selectively blocked, a firewall should be "
"used instead."
msgstr ""
"私有接口不会转发流量到其他私有接口。流量被无条件阻止，因此不会转发任何以太网帧，包括<acronym>ARP</acronym>数据包。如果需要选择性地阻"
"止流量，应使用防火墙。"

#. type: Labeled list
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1778
#, no-wrap
msgid "span"
msgstr "span"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1780
#, fuzzy
msgid ""
"A span port transmits a copy of every Ethernet frame received by the "
"bridge. The number of span ports configured on a bridge is unlimited, but if "
"an interface is designated as a span port, it cannot also be used as a "
"regular bridge port. This is most useful for snooping a bridged network "
"passively on another host connected to one of the span ports of the "
"bridge. For example, to send a copy of all frames out the interface named "
"[.filename]#fxp4#:"
msgstr ""
"跨接端口传输网桥接收到的每一个以太网帧的副本。网桥上配置的跨接端口的数量是无限的，但如果一个接口被指定为跨接端口，则不能同时作为普通网桥端口使用。这对于被"
"动地窥探桥接网络中连接到桥接端口之一的另一台主机上的桥接主机是最有用的。例如，将所有帧的副本发送到名为<filename>fxp4</filename>的"
"接口："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1784
#, no-wrap
msgid "# ifconfig bridge0 span fxp4\n"
msgstr ""

#. type: Labeled list
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1786
#, no-wrap
msgid "sticky"
msgstr "sticky"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1788
msgid ""
"If a bridge member interface is marked as sticky, dynamically learned "
"address entries are treated as static entries in the forwarding "
"cache. Sticky entries are never aged out of the cache or replaced, even if "
"the address is seen on a different interface. This gives the benefit of "
"static address entries without the need to pre-populate the forwarding "
"table. Clients learned on a particular segment of the bridge cannot roam to "
"another segment."
msgstr ""
"如果网桥成员接口被标记为 \"粘性（sticky）\"，则动态学习的地址条目将被视为转发缓存中的静态条目。即使在不同的接口上看到该地址，粘性条目也不会从缓"
"存中老化或被替换。这就带来了静态地址项的好处，而不需要预先填充转发表。在网桥的某个网段上学习的客户端不能漫游到另一个网段。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1790
msgid ""
"An example of using sticky addresses is to combine the bridge with VLANs in "
"order to isolate customer networks without wasting IP address "
"space. Consider that `CustomerA` is on `vlan100`, `CustomerB` is on "
"`vlan101`, and the bridge has the address `192.168.0.1`:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1795
#, no-wrap
msgid ""
"# ifconfig bridge0 addm vlan100 sticky vlan100 addm vlan101 sticky vlan101\n"
"# ifconfig bridge0 inet 192.168.0.1/24\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1798
msgid ""
"In this example, both clients see `192.168.0.1` as their default "
"gateway. Since the bridge cache is sticky, one host cannot spoof the MAC "
"address of the other customer in order to intercept their traffic."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1800
msgid ""
"Any communication between the VLANs can be blocked using a firewall or, as "
"seen in this example, private interfaces:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1804
#, no-wrap
msgid "# ifconfig bridge0 private vlan100 private vlan101\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1807
msgid ""
"The customers are completely isolated from each other and the full `/24` "
"address range can be allocated without subnetting."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1809
#, fuzzy
msgid ""
"The number of unique source MAC addresses behind an interface can be "
"limited. Once the limit is reached, packets with unknown source addresses "
"are dropped until an existing host cache entry expires or is removed."
msgstr ""
"可以限制接口后面的唯一源<acronym>MAC</acronym>地址的数量。一旦达到限制，具有未知源地址的数据包将被丢弃，直到现有的主机缓存条目过期或"
"被删除。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1811
msgid ""
"The following example sets the maximum number of Ethernet devices for "
"`CustomerA` on `vlan100` to 10:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1815
#, no-wrap
msgid "# ifconfig bridge0 ifmaxaddr vlan100 10\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1818
msgid ""
"Bridge interfaces also support monitor mode, where the packets are discarded "
"after man:bpf[4] processing and are not processed or forwarded further. This "
"can be used to multiplex the input of two or more interfaces into a single "
"man:bpf[4] stream. This is useful for reconstructing the traffic for network "
"taps that transmit the RX/TX signals out through two separate "
"interfaces. For example, to read the input from four network interfaces as "
"one stream:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1823
#, no-wrap
msgid ""
"# ifconfig bridge0 addm fxp0 addm fxp1 addm fxp2 addm fxp3 monitor up\n"
"# tcpdump -i bridge0\n"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1825
#, no-wrap
msgid "SNMP Monitoring"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1828
msgid ""
"The bridge interface and STP parameters can be monitored via man:bsnmpd[1] "
"which is included in the FreeBSD base system. The exported bridge MIBs "
"conform to IETF standards so any SNMP client or monitoring package can be "
"used to retrieve the data."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1830
msgid ""
"To enable monitoring on the bridge, uncomment this line in "
"[.filename]#/etc/snmpd.config# by removing the beginning `#` symbol:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1834
#, fuzzy, no-wrap
msgid "begemotSnmpdModulePath.\"bridge\" = \"/usr/lib/snmp_bridge.so\"\n"
msgstr "begemotSnmpdModulePath.\"bridge\" = \"/usr/lib/snmp_bridge.so\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1837
msgid ""
"Other configuration settings, such as community names and access lists, may "
"need to be modified in this file. See man:bsnmpd[1] and man:snmp_bridge[3] "
"for more information. Once these edits are saved, add this line to "
"[.filename]#/etc/rc.conf#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1841
#, fuzzy, no-wrap
msgid "bsnmpd_enable=\"YES\"\n"
msgstr "bsnmpd_enable=\"YES\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1844
msgid "Then, start man:bsnmpd[1]:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1848
#, no-wrap
msgid "# service bsnmpd start\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1851
msgid ""
"The following examples use the Net-SNMP software "
"(package:net-mgmt/net-snmp[]) to query a bridge from a client system. The "
"package:net-mgmt/bsnmptools[] port can also be used. From the SNMP client "
"which is running Net-SNMP, add the following lines to "
"[.filename]#$HOME/.snmp/snmp.conf# in order to import the bridge MIB "
"definitions:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1856
#, fuzzy, no-wrap
msgid ""
"mibdirs +/usr/share/snmp/mibs\n"
"mibs +BRIDGE-MIB:RSTP-MIB:BEGEMOT-MIB:BEGEMOT-BRIDGE-MIB\n"
msgstr ""
"mibdirs +/usr/share/snmp/mibs\n"
"mibs +BRIDGE-MIB:RSTP-MIB:BEGEMOT-MIB:BEGEMOT-BRIDGE-MIB\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1859
msgid "To monitor a single bridge using the IETF BRIDGE-MIB (RFC4188):"
msgstr "使用 IETF BRIDGE-MIB (RFC4188) 监视网桥："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1878
#, fuzzy, no-wrap
msgid ""
"% snmpwalk -v 2c -c public bridge1.example.com mib-2.dot1dBridge\n"
"BRIDGE-MIB::dot1dBaseBridgeAddress.0 = STRING: 66:fb:9b:6e:5c:44\n"
"BRIDGE-MIB::dot1dBaseNumPorts.0 = INTEGER: 1 ports\n"
"BRIDGE-MIB::dot1dStpTimeSinceTopologyChange.0 = Timeticks: (189959) "
"0:31:39.59 centi-seconds\n"
"BRIDGE-MIB::dot1dStpTopChanges.0 = Counter32: 2\n"
"BRIDGE-MIB::dot1dStpDesignatedRoot.0 = Hex-STRING: 80 00 00 01 02 4B D4 50\n"
"...\n"
"BRIDGE-MIB::dot1dStpPortState.3 = INTEGER: forwarding(5)\n"
"BRIDGE-MIB::dot1dStpPortEnable.3 = INTEGER: enabled(1)\n"
"BRIDGE-MIB::dot1dStpPortPathCost.3 = INTEGER: 200000\n"
"BRIDGE-MIB::dot1dStpPortDesignatedRoot.3 = Hex-STRING: 80 00 00 01 02 4B D4 "
"50\n"
"BRIDGE-MIB::dot1dStpPortDesignatedCost.3 = INTEGER: 0\n"
"BRIDGE-MIB::dot1dStpPortDesignatedBridge.3 = Hex-STRING: 80 00 00 01 02 4B "
"D4 50\n"
"BRIDGE-MIB::dot1dStpPortDesignatedPort.3 = Hex-STRING: 03 80\n"
"BRIDGE-MIB::dot1dStpPortForwardTransitions.3 = Counter32: 1\n"
"RSTP-MIB::dot1dStpVersion.0 = INTEGER: rstp(2)\n"
msgstr ""
"<prompt>%</prompt> <userinput>snmpwalk -v 2c -c public bridge1.example.com "
"mib-2.dot1dBridge</userinput>\n"
"BRIDGE-MIB::dot1dBaseBridgeAddress.0 = STRING: 66:fb:9b:6e:5c:44\n"
"BRIDGE-MIB::dot1dBaseNumPorts.0 = INTEGER: 1 ports\n"
"BRIDGE-MIB::dot1dStpTimeSinceTopologyChange.0 = Timeticks: (189959) 0:31:"
"39.59 centi-seconds\n"
"BRIDGE-MIB::dot1dStpTopChanges.0 = Counter32: 2\n"
"BRIDGE-MIB::dot1dStpDesignatedRoot.0 = Hex-STRING: 80 00 00 01 02 4B D4 50\n"
"...\n"
"BRIDGE-MIB::dot1dStpPortState.3 = INTEGER: forwarding(5)\n"
"BRIDGE-MIB::dot1dStpPortEnable.3 = INTEGER: enabled(1)\n"
"BRIDGE-MIB::dot1dStpPortPathCost.3 = INTEGER: 200000\n"
"BRIDGE-MIB::dot1dStpPortDesignatedRoot.3 = Hex-STRING: 80 00 00 01 02 4B D4 "
"50\n"
"BRIDGE-MIB::dot1dStpPortDesignatedCost.3 = INTEGER: 0\n"
"BRIDGE-MIB::dot1dStpPortDesignatedBridge.3 = Hex-STRING: 80 00 00 01 02 4B "
"D4 50\n"
"BRIDGE-MIB::dot1dStpPortDesignatedPort.3 = Hex-STRING: 03 80\n"
"BRIDGE-MIB::dot1dStpPortForwardTransitions.3 = Counter32: 1\n"
"RSTP-MIB::dot1dStpVersion.0 = INTEGER: rstp(2)\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1881
msgid ""
"The `dot1dStpTopChanges.0` value is two, indicating that the STP bridge "
"topology has changed twice. A topology change means that one or more links "
"in the network have changed or failed and a new tree has been "
"calculated. The `dot1dStpTimeSinceTopologyChange.0` value will show when "
"this happened."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1883
msgid ""
"To monitor multiple bridge interfaces, the private BEGEMOT-BRIDGE-MIB can be "
"used:"
msgstr "要监视多个网桥接口，可以使用专用 BEGEMOT-BRIDGE-MIB："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1901
#, no-wrap
msgid ""
"% snmpwalk -v 2c -c public bridge1.example.com\n"
"enterprises.fokus.begemot.begemotBridge\n"
"BEGEMOT-BRIDGE-MIB::begemotBridgeBaseName.\"bridge0\" = STRING: bridge0\n"
"BEGEMOT-BRIDGE-MIB::begemotBridgeBaseName.\"bridge2\" = STRING: bridge2\n"
"BEGEMOT-BRIDGE-MIB::begemotBridgeBaseAddress.\"bridge0\" = STRING: "
"e:ce:3b:5a:9e:13\n"
"BEGEMOT-BRIDGE-MIB::begemotBridgeBaseAddress.\"bridge2\" = STRING: "
"12:5e:4d:74:d:fc\n"
"BEGEMOT-BRIDGE-MIB::begemotBridgeBaseNumPorts.\"bridge0\" = INTEGER: 1\n"
"BEGEMOT-BRIDGE-MIB::begemotBridgeBaseNumPorts.\"bridge2\" = INTEGER: 1\n"
"...\n"
"BEGEMOT-BRIDGE-MIB::begemotBridgeStpTimeSinceTopologyChange.\"bridge0\" = "
"Timeticks: (116927) 0:19:29.27 centi-seconds\n"
"BEGEMOT-BRIDGE-MIB::begemotBridgeStpTimeSinceTopologyChange.\"bridge2\" = "
"Timeticks: (82773) 0:13:47.73 centi-seconds\n"
"BEGEMOT-BRIDGE-MIB::begemotBridgeStpTopChanges.\"bridge0\" = Counter32: 1\n"
"BEGEMOT-BRIDGE-MIB::begemotBridgeStpTopChanges.\"bridge2\" = Counter32: 1\n"
"BEGEMOT-BRIDGE-MIB::begemotBridgeStpDesignatedRoot.\"bridge0\" = Hex-STRING: "
"80 00 00 40 95 30 5E 31\n"
"BEGEMOT-BRIDGE-MIB::begemotBridgeStpDesignatedRoot.\"bridge2\" = Hex-STRING: "
"80 00 00 50 8B B8 C6 A9\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1904
msgid ""
"To change the bridge interface being monitored via the `mib-2.dot1dBridge` "
"subtree:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1909
#, no-wrap
msgid ""
"% snmpset -v 2c -c private bridge1.example.com\n"
"BEGEMOT-BRIDGE-MIB::begemotBridgeDefaultBridgeIf.0 s bridge2\n"
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1912
#, no-wrap
msgid "Link Aggregation and Failover"
msgstr "链路聚合与故障转移"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1915
msgid ""
"FreeBSD provides the man:lagg[4] interface which can be used to aggregate "
"multiple network interfaces into one virtual interface in order to provide "
"failover and link aggregation. Failover allows traffic to continue to flow "
"as long as at least one aggregated network interface has an established "
"link. Link aggregation works best on switches which support LACP, as this "
"protocol distributes traffic bi-directionally while responding to the "
"failure of individual links."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1917
msgid ""
"The aggregation protocols supported by the lagg interface determine which "
"ports are used for outgoing traffic and whether or not a specific port "
"accepts incoming traffic. The following protocols are supported by "
"man:lagg[4]:"
msgstr ""

#. type: Labeled list
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1918
#, no-wrap
msgid "failover"
msgstr "failover (故障转移)"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1920
msgid ""
"This mode sends and receives traffic only through the master port. If the "
"master port becomes unavailable, the next active port is used. The first "
"interface added to the virtual interface is the master port and all "
"subsequently added interfaces are used as failover devices. If failover to a "
"non-master port occurs, the original port becomes master once it becomes "
"available again."
msgstr ""
"只通过主网口收发数据。 如果主网口不可用， 则使用下一个激活的网口。 您在这里加入的第一个网口便会被视为主网口； 此后加入的其他网口， "
"则会被视为故障转移的备用网口。 如果发生故障转移之后， 原先的网口又恢复了可用状态， 则它仍会作为主网口使用。"

#. type: Labeled list
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1921
#, no-wrap
msgid "fec / loadbalance"
msgstr "fec / loadbalance（负载均衡）"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1923
msgid ""
"Cisco(R) Fast EtherChannel(R) (FEC) is found on older Cisco(R) switches. It "
"provides a static setup and does not negotiate aggregation with the peer or "
"exchange frames to monitor the link. If the switch supports LACP, that "
"should be used instead."
msgstr ""

#. type: Labeled list
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1924
#, no-wrap
msgid "lacp"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1926
msgid ""
"The IEEE(R) 802.3ad Link Aggregation Control Protocol (LACP) negotiates a "
"set of aggregable links with the peer into one or more Link Aggregated "
"Groups (LAGs). Each LAG is composed of ports of the same speed, set to "
"full-duplex operation, and traffic is balanced across the ports in the LAG "
"with the greatest total speed. Typically, there is only one LAG which "
"contains all the ports. In the event of changes in physical connectivity, "
"LACP will quickly converge to a new configuration."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1928
msgid ""
"LACP balances outgoing traffic across the active ports based on hashed "
"protocol header information and accepts incoming traffic from any active "
"port. The hash includes the Ethernet source and destination address and, if "
"available, the VLAN tag, and the IPv4 or IPv6 source and destination "
"address."
msgstr ""

#. type: Labeled list
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1929
#, no-wrap
msgid "roundrobin"
msgstr "roundrobin (轮转)"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1931
msgid ""
"This mode distributes outgoing traffic using a round-robin scheduler through "
"all active ports and accepts incoming traffic from any active port. Since "
"this mode violates Ethernet frame ordering, it should be used with caution."
msgstr "将输出流量以轮转方式在所有激活端口之间调度， 并从任意激活端口接收进入流量。 这种模式违反了以太网帧排序规则， 因此应小心使用。"

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1932
#, no-wrap
msgid "Configuration Examples"
msgstr "设定示例"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1935
msgid ""
"This section demonstrates how to configure a Cisco(R) switch and a FreeBSD "
"system for LACP load balancing. It then shows how to configure two Ethernet "
"interfaces in failover mode as well as how to configure failover mode "
"between an Ethernet and a wireless interface."
msgstr ""

#. type: Block title
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1937
#, no-wrap
msgid "LACP Aggregation with a Cisco(R) Switch"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1941
msgid ""
"This example connects two man:fxp[4] Ethernet interfaces on a FreeBSD "
"machine to the first two Ethernet ports on a Cisco(R) switch as a single "
"load balanced and fault tolerant link. More interfaces can be added to "
"increase throughput and fault tolerance. Replace the names of the Cisco(R) "
"ports, Ethernet devices, channel group number, and IP address shown in the "
"example to match the local configuration."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1943
msgid ""
"Frame ordering is mandatory on Ethernet links and any traffic between two "
"stations always flows over the same physical link, limiting the maximum "
"speed to that of one interface. The transmit algorithm attempts to use as "
"much information as it can to distinguish different traffic flows and "
"balance the flows across the available interfaces."
msgstr ""
"帧排序在以太网链路上是强制性的，两个站点之间的任何流量始终通过同一物理链路流动，将最大速度限制为一个接口。传输算法尝试使用尽可能多的信息来区分不同的流量并"
"平衡跨可用接口的流。"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1945
msgid ""
"On the Cisco(R) switch, add the _FastEthernet0/1_ and _FastEthernet0/2_ "
"interfaces to channel group _1_:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1955
#, no-wrap
msgid ""
"interface FastEthernet0/1\n"
" channel-group 1 mode active\n"
" channel-protocol lacp\n"
"!\n"
"interface FastEthernet0/2\n"
" channel-group 1 mode active\n"
" channel-protocol lacp\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1958
msgid ""
"On the FreeBSD system, create the man:lagg[4] interface using the physical "
"interfaces _fxp0_ and _fxp1_ and bring the interfaces up with an IP address "
"of _10.0.0.3/24_:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1965
#, no-wrap
msgid ""
"# ifconfig fxp0 up\n"
"# ifconfig fxp1 up\n"
"# ifconfig lagg0 create\n"
"# ifconfig lagg0 up laggproto lacp laggport fxp0 laggport fxp1 10.0.0.3/24\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1968
msgid "Next, verify the status of the virtual interface:"
msgstr "接下来，检查虚拟接口的运行状态："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1981
#, no-wrap
msgid ""
"# ifconfig lagg0\n"
"lagg0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> metric 0 mtu "
"1500\n"
"        options=8<VLAN_MTU>\n"
"        ether 00:05:5d:71:8d:b8\n"
"        inet 10.0.0.3 netmask 0xffffff00 broadcast 10.0.0.255\n"
"        media: Ethernet autoselect\n"
"        status: active\n"
"        laggproto lacp\n"
"        laggport: fxp1 flags=1c<ACTIVE,COLLECTING,DISTRIBUTING>\n"
"        laggport: fxp0 flags=1c<ACTIVE,COLLECTING,DISTRIBUTING>\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1984
msgid ""
"Ports marked as `ACTIVE` are part of the LAG that has been negotiated with "
"the remote switch. Traffic will be transmitted and received through these "
"active ports. Add `-v` to the above command to view the LAG identifiers."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1986
msgid "To see the port status on the Cisco(R) switch:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1993
#, no-wrap
msgid ""
"switch# show lacp neighbor\n"
"Flags:  S - Device is requesting Slow LACPDUs\n"
"        F - Device is requesting Fast LACPDUs\n"
"        A - Device is in Active mode       P - Device is in Passive mode\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1995
#, no-wrap
msgid "Channel group 1 neighbors\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:1997
#, no-wrap
msgid "Partner's information:\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2002
#, no-wrap
msgid ""
"                  LACP port                        Oper    Port     Port\n"
"Port      Flags   Priority  Dev ID         Age     Key     Number   State\n"
"Fa0/1     SA      32768     0005.5d71.8db8  29s    0x146   0x3      0x3D\n"
"Fa0/2     SA      32768     0005.5d71.8db8  29s    0x146   0x4      0x3D\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2005
msgid "For more detail, type `show lacp neighbor detail`."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2007
#, fuzzy
msgid ""
"To retain this configuration across reboots, add the following entries to "
"[.filename]#/etc/rc.conf# on the FreeBSD system:"
msgstr "要在重新启动期间保留此配置，请向 FreeBSD 系统上的<filename>/etc/rc.conf</filename>添加以下条目："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2014
#, no-wrap
msgid ""
"ifconfig_fxp0=\"up\"\n"
"ifconfig_fxp1=\"up\"\n"
"cloned_interfaces=\"lagg0\"\n"
"ifconfig_lagg0=\"laggproto lacp laggport fxp0 laggport fxp1 10.0.0.3/24\"\n"
msgstr ""

#. type: Block title
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2019
#, no-wrap
msgid "Failover Mode"
msgstr "故障转移模式"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2024
msgid ""
"Failover mode can be used to switch over to a secondary interface if the "
"link is lost on the master interface. To configure failover, make sure that "
"the underlying physical interfaces are up, then create the man:lagg[4] "
"interface. In this example, _fxp0_ is the master interface, _fxp1_ is the "
"secondary interface, and the virtual interface is assigned an IP address of "
"_10.0.0.15/24_:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2031
#, no-wrap
msgid ""
"# ifconfig fxp0 up\n"
"# ifconfig fxp1 up\n"
"# ifconfig lagg0 create\n"
"# ifconfig lagg0 up laggproto failover laggport fxp0 laggport fxp1 "
"10.0.0.15/24\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2034
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2124
msgid "The virtual interface should look something like this:"
msgstr "虚拟端口信息如下所示："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2047
#, no-wrap
msgid ""
"# ifconfig lagg0\n"
"lagg0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> metric 0 mtu "
"1500\n"
"        options=8<VLAN_MTU>\n"
"        ether 00:05:5d:71:8d:b8\n"
"        inet 10.0.0.15 netmask 0xffffff00 broadcast 10.0.0.255\n"
"        media: Ethernet autoselect\n"
"        status: active\n"
"        laggproto failover\n"
"        laggport: fxp1 flags=0<>\n"
"        laggport: fxp0 flags=5<MASTER,ACTIVE>\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2050
msgid ""
"Traffic will be transmitted and received on _fxp0_. If the link is lost on "
"_fxp0_, _fxp1_ will become the active link. If the link is restored on the "
"master interface, it will once again become the active link."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2052
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2147
#, fuzzy
msgid ""
"To retain this configuration across reboots, add the following entries to "
"[.filename]#/etc/rc.conf#:"
msgstr "若需将配置持久化，请将以下行写入 <filename>/etc/rc.conf</filename>："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2059
#, no-wrap
msgid ""
"ifconfig_fxp0=\"up\"\n"
"ifconfig_fxp1=\"up\"\n"
"cloned_interfaces=\"lagg0\"\n"
"ifconfig_lagg0=\"laggproto failover laggport fxp0 laggport fxp1 "
"10.0.0.15/24\"\n"
msgstr ""

#. type: Block title
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2064
#, no-wrap
msgid "Failover Mode Between Ethernet and Wireless Interfaces"
msgstr "以太网络与无线界面间的容错移转模式"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2069
msgid ""
"For laptop users, it is usually desirable to configure the wireless device "
"as a secondary which is only used when the Ethernet connection is not "
"available. With man:lagg[4], it is possible to configure a failover which "
"prefers the Ethernet connection for both performance and security reasons, "
"while maintaining the ability to transfer data over the wireless connection."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2071
msgid ""
"This is achieved by overriding the Ethernet interface's MAC address with "
"that of the wireless interface."
msgstr ""

#. type: delimited block * 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2075
msgid ""
"In theory, either the Ethernet or wireless MAC address can be changed to "
"match the other. However, some popular wireless interfaces lack support for "
"overriding the MAC address. We therefore recommend overriding the Ethernet "
"MAC address for this purpose."
msgstr ""
"理论上来说，无论是以太网还是无线MAC地址，都可以通过改变MAC地址来匹配对方。但是，一些流行的无线接口缺乏对覆盖MAC地址的支持。因此，我们建议为此目的"
"重写以太网MAC地址。"

#. type: delimited block * 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2080
msgid ""
"If the driver for the wireless interface is not loaded in the `GENERIC` or "
"custom kernel, and the computer is running FreeBSD {rel121-current}, load "
"the corresponding [.filename]#.ko# in [.filename]#/boot/loader.conf# by "
"adding `*driver_load=\"YES\"*` to that file and rebooting. Another, better "
"way is to load the driver in [.filename]#/etc/rc.conf# by adding it to "
"`kld_list` (see man:rc.conf[5] for details) in that file and rebooting. This "
"is needed because otherwise the driver is not loaded yet at the time the "
"man:lagg[4] interface is set up."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2083
msgid ""
"In this example, the Ethernet interface, _re0_, is the master and the "
"wireless interface, _wlan0_, is the failover. The _wlan0_ interface was "
"created from the _ath0_ physical wireless interface, and the Ethernet "
"interface will be configured with the MAC address of the wireless "
"interface. First, determine the MAC address of the wireless interface:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2098
#, no-wrap
msgid ""
"# ifconfig wlan0\n"
"wlan0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> metric 0 mtu "
"1500\n"
"\tether b8:ee:65:5b:32:59\n"
"\tgroups: wlan\n"
"\tssid Bbox-A3BD2403 channel 6 (2437 MHz 11g ht/20) bssid "
"00:37:b7:56:4b:60\n"
"\tregdomain ETSI country FR indoor ecm authmode WPA2/802.11i privacy ON\n"
"\tdeftxkey UNDEF AES-CCM 2:128-bit txpower 30 bmiss 7 scanvalid 60\n"
"\tprotmode CTS ampdulimit 64k ampdudensity 8 shortgi -stbctx stbcrx\n"
"\t-ldpc wme burst roaming MANUAL\n"
"\tmedia: IEEE 802.11 Wireless Ethernet MCS mode 11ng\n"
"\tstatus: associated\n"
"\tnd6 options=29<PERFORMNUD,IFDISABLED,AUTO_LINKLOCAL>\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2101
msgid ""
"Replace _wlan0_ to match the system's wireless interface name. The `ether` "
"line will contain the MAC address of the specified interface. Now, change "
"the MAC address of the Ethernet interface:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2105
#, no-wrap
msgid "# ifconfig re0 ether b8:ee:65:5b:32:59\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2108
msgid ""
"Bring the wireless interface up (replacing _FR_ with your own 2-letter "
"country code), but do not set an IP address:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2112
#, no-wrap
msgid "# ifconfig wlan0 create wlandev ath0 country FR ssid my_router up\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2115
msgid ""
"Make sure the _re0_ interface is up, then create the man:lagg[4] interface "
"with _re0_ as master with failover to _wlan0_:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2121
#, no-wrap
msgid ""
"# ifconfig re0 up\n"
"# ifconfig lagg0 create\n"
"# ifconfig lagg0 up laggproto failover laggport re0 laggport wlan0\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2137
#, no-wrap
msgid ""
"# ifconfig lagg0\n"
"lagg0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> metric 0 mtu "
"1500\n"
"        options=8<VLAN_MTU>\n"
"        ether b8:ee:65:5b:32:59\n"
"        laggproto failover lagghash l2,l3,l4\n"
"        laggport: re0 flags=5<MASTER,ACTIVE>\n"
"        laggport: wlan0 flags=0<>\n"
"        groups: lagg\n"
"        media: Ethernet autoselect\n"
"        status: active\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2140
msgid "Then, start the DHCP client to obtain an IP address:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2144
#, no-wrap
msgid "# dhclient lagg0\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2156
#, no-wrap
msgid ""
"ifconfig_re0=\"ether b8:ee:65:5b:32:59\"\n"
"wlans_ath0=\"wlan0\"\n"
"ifconfig_wlan0=\"WPA\"\n"
"create_args_wlan0=\"country FR\"\n"
"cloned_interfaces=\"lagg0\"\n"
"ifconfig_lagg0=\"up laggproto failover laggport re0 laggport wlan0 DHCP\"\n"
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2161
#, no-wrap
msgid "Diskless Operation with PXE"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2164
msgid ""
"The Intel(R) Preboot eXecution Environment (PXE) allows an operating system "
"to boot over the network. For example, a FreeBSD system can boot over the "
"network and operate without a local disk, using file systems mounted from an "
"NFS server. PXE support is usually available in the BIOS. To use PXE when "
"the machine starts, select the `Boot from network` option in the BIOS setup "
"or type a function key during system initialization."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2166
msgid ""
"In order to provide the files needed for an operating system to boot over "
"the network, a PXE setup also requires properly configured DHCP, TFTP, and "
"NFS servers, where:"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2168
msgid ""
"Initial parameters, such as an IP address, executable boot filename and "
"location, server name, and root path are obtained from the DHCP server."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2169
msgid "The operating system loader file is booted using TFTP."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2170
msgid "The file systems are loaded using NFS."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2172
msgid ""
"When a computer PXE boots, it receives information over DHCP about where to "
"obtain the initial boot loader file. After the host computer receives this "
"information, it downloads the boot loader via TFTP and then executes the "
"boot loader. In FreeBSD, the boot loader file is "
"[.filename]#/boot/pxeboot#. After [.filename]#/boot/pxeboot# executes, the "
"FreeBSD kernel is loaded and the rest of the FreeBSD bootup sequence "
"proceeds, as described in crossref:boot[boot,The FreeBSD Booting Process]."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2174
msgid ""
"This section describes how to configure these services on a FreeBSD system "
"so that other systems can PXE boot into FreeBSD. Refer to man:diskless[8] "
"for more information."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2179
msgid ""
"As described, the system providing these services is insecure. It should "
"live in a protected area of a network and be untrusted by other hosts."
msgstr "如上所述，提供这些服务的系统不安全。它应位于网络的受保护区域中，并且不受其他主机的不信任。"

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2182
#, no-wrap
msgid "Setting Up the PXE Environment"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2185
msgid ""
"The steps shown in this section configure the built-in NFS and TFTP "
"servers. The next section demonstrates how to install and configure the DHCP "
"server. In this example, the directory which will contain the files used by "
"PXE users is [.filename]#/b/tftpboot/FreeBSD/install#. It is important that "
"this directory exists and that the same directory name is set in both "
"[.filename]#/etc/inetd.conf# and [.filename]#/usr/local/etc/dhcpd.conf#."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2189
msgid ""
"The command examples below assume use of the man:sh[1] shell. man:csh[1] and "
"man:tcsh[1] users will need to start a man:sh[1] shell or adapt the commands "
"to man:csh[1] syntax."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2193
msgid ""
"Create the root directory which will contain a FreeBSD installation to be "
"NFS mounted:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2198
#, no-wrap
msgid ""
"# export NFSROOTDIR=/b/tftpboot/FreeBSD/install\n"
"# mkdir -p ${NFSROOTDIR}\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2201
msgid "Enable the NFS server by adding this line to [.filename]#/etc/rc.conf#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2205
#, fuzzy, no-wrap
msgid "nfs_server_enable=\"YES\"\n"
msgstr "nfs_server_enable=\"YES\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2208
msgid ""
"Export the diskless root directory via NFS by adding the following to "
"[.filename]#/etc/exports#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2212
#, fuzzy, no-wrap
msgid "/b -ro -alldirs -maproot=root\n"
msgstr "/b -ro -alldirs -maproot=root\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2215
msgid "Start the NFS server:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2219
#, no-wrap
msgid "# service nfsd start\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2222
msgid ""
"Enable man:inetd[8] by adding the following line to "
"[.filename]#/etc/rc.conf#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2226
#, fuzzy, no-wrap
msgid "inetd_enable=\"YES\"\n"
msgstr "inetd_enable=\"YES\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2229
msgid ""
"Uncomment the following line in [.filename]#/etc/inetd.conf# by making sure "
"it does not start with a `#` symbol:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2233
#, fuzzy, no-wrap
msgid "tftp dgram udp wait root /usr/libexec/tftpd tftpd -l -s /b/tftpboot\n"
msgstr "tftp dgram udp wait root /usr/libexec/tftpd tftpd -l -s /b/tftpboot\n"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2238
msgid ""
"Some PXE versions require the TCP version of TFTP. In this case, uncomment "
"the second `tftp` line which contains `stream tcp`."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2241
msgid "Start man:inetd[8]:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2245
#, no-wrap
msgid "# service inetd start\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2248
msgid ""
"Install the base system into [.filename]#${NFSROOTDIR}#, either by "
"decompressing the official archives or by rebuilding the FreeBSD kernel and "
"userland (refer to crossref:cutting-edge[makeworld,“Updating FreeBSD from "
"Source”] for more detailed instructions, but do not forget to add "
"`DESTDIR=_${NFSROOTDIR}_` when running the `make installkernel` and `make "
"installworld` commands."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2249
msgid ""
"Test that the TFTP server works and can download the boot loader which will "
"be obtained via PXE:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2255
#, no-wrap
msgid ""
"# tftp localhost\n"
"tftp> get FreeBSD/install/boot/pxeboot\n"
"Received 264951 bytes in 0.1 seconds\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2258
msgid ""
"Edit [.filename]#${NFSROOTDIR}/etc/fstab# and create an entry to mount the "
"root file system over NFS:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2263
#, no-wrap
msgid ""
"# Device                                         Mountpoint    FSType   "
"Options  Dump Pass\n"
"myhost.example.com:/b/tftpboot/FreeBSD/install       /         nfs      ro        "
"0    0\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2266
msgid ""
"  Replace _myhost.example.com_ with the hostname or IP address of the NFS "
"server. In this example, the root file system is mounted read-only in order "
"to prevent NFS clients from potentially deleting the contents of the root "
"file system."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2267
msgid ""
"Set the root password in the PXE environment for client machines which are "
"PXE booting :"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2272
#, no-wrap
msgid ""
"# chroot ${NFSROOTDIR}\n"
"# passwd\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2275
msgid ""
"If needed, enable man:ssh[1] root logins for client machines which are PXE "
"booting by editing [.filename]#${NFSROOTDIR}/etc/ssh/sshd_config# and "
"enabling `PermitRootLogin`. This option is documented in man:sshd_config[5]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2276
msgid ""
"Perform any other needed customizations of the PXE environment in "
"[.filename]#${NFSROOTDIR}#. These customizations could include things like "
"installing packages or editing the password file with man:vipw[8]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2278
msgid ""
"When booting from an NFS root volume, [.filename]#/etc/rc# detects the NFS "
"boot and runs [.filename]#/etc/rc.initdiskless#. In this case, "
"[.filename]#/etc# and [.filename]#/var# need to be memory backed file "
"systems so that these directories are writable but the NFS root directory is "
"read-only:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2285
#, no-wrap
msgid ""
"# chroot ${NFSROOTDIR}\n"
"# mkdir -p conf/base\n"
"# tar -c -v -f conf/base/etc.cpio.gz --format cpio --gzip etc\n"
"# tar -c -v -f conf/base/var.cpio.gz --format cpio --gzip var\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2288
msgid ""
"When the system boots, memory file systems for [.filename]#/etc# and "
"[.filename]#/var# will be created and mounted and the contents of the "
"[.filename]#cpio.gz# files will be copied into them. By default, these file "
"systems have a maximum capacity of 5 megabytes. If your archives do not fit, "
"which is usually the case for [.filename]#/var# when binary packages have "
"been installed, request a larger size by putting the number of 512 byte "
"sectors needed (e.g., 5 megabytes is 10240 sectors) in "
"[.filename]#${NFSROOTDIR}/conf/base/etc/md_size# and "
"[.filename]#${NFSROOTDIR}/conf/base/var/md_size# files for [.filename]#/etc# "
"and [.filename]#/var# file systems respectively."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2290
#, no-wrap
msgid "Configuring the DHCP Server"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2293
msgid ""
"The DHCP server does not need to be the same machine as the TFTP and NFS "
"server, but it needs to be accessible in the network."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2295
msgid ""
"DHCP is not part of the FreeBSD base system but can be installed using the "
"package:net/isc-dhcp43-server[] port or package."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2297
msgid ""
"Once installed, edit the configuration file, "
"[.filename]#/usr/local/etc/dhcpd.conf#. Configure the `next-server`, "
"`filename`, and `root-path` settings as seen in this example:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2307
#, no-wrap
msgid ""
"subnet 192.168.0.0 netmask 255.255.255.0 {\n"
"   range 192.168.0.2 192.168.0.3 ;\n"
"   option subnet-mask 255.255.255.0 ;\n"
"   option routers 192.168.0.1 ;\n"
"   option broadcast-address 192.168.0.255 ;\n"
"   option domain-name-servers 192.168.35.35, 192.168.35.36 ;\n"
"   option domain-name \"example.com\";\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2310
#, no-wrap
msgid ""
"   # IP address of TFTP server\n"
"   next-server 192.168.0.1 ;\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2313
#, no-wrap
msgid ""
"   # path of boot loader obtained via tftp\n"
"   filename \"FreeBSD/install/boot/pxeboot\" ;\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2316
#, no-wrap
msgid ""
"   # pxeboot boot loader will try to NFS mount this directory for root FS\n"
"   option root-path \"192.168.0.1:/b/tftpboot/FreeBSD/install/\" ;\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2318
#, no-wrap
msgid "}\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2321
msgid ""
"The `next-server` directive is used to specify the IP address of the TFTP "
"server."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2323
msgid ""
"The `filename` directive defines the path to [.filename]#/boot/pxeboot#. A "
"relative filename is used, meaning that [.filename]#/b/tftpboot# is not "
"included in the path."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2325
msgid "The `root-path` option defines the path to the NFS root file system."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2327
msgid ""
"Once the edits are saved, enable DHCP at boot time by adding the following "
"line to [.filename]#/etc/rc.conf#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2331
#, fuzzy, no-wrap
msgid "dhcpd_enable=\"YES\"\n"
msgstr "dhcpd_enable=\"YES\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2334
msgid "Then start the DHCP service:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2338
#, no-wrap
msgid "# service isc-dhcpd start\n"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2340
#, no-wrap
msgid "Debugging PXE Problems"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2343
#, fuzzy
msgid ""
"Once all of the services are configured and started, PXE clients should be "
"able to automatically load FreeBSD over the network. If a particular client "
"is unable to connect, when that client machine boots up, enter the BIOS "
"configuration menu and confirm that it is set to boot from the network."
msgstr ""
"所有服务都配置好并启动后， <acronym>PXE</acronym> 客户端能够通过网络自动加载 FreeBSD。如果某个特定的客户端无法连接， "
"当该客户端机器启动时， 请进入 <acronym>BIOS</acronym> 配置菜单， 并确认已设置为从网络启动。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2345
msgid ""
"This section describes some troubleshooting tips for isolating the source of "
"the configuration problem should no clients be able to PXE boot."
msgstr ""

#. type: delimited block * 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2349
msgid ""
"Use the package:net/wireshark[] package or port to debug the network traffic "
"involved during the PXE booting process, which is illustrated in the diagram "
"below."
msgstr ""

#. type: Block title
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2350
#, no-wrap
msgid "PXE Booting Process with NFS Root Mount"
msgstr ""

#. type: Target for macro image
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2351
#, no-wrap
msgid "pxe-nfs.png"
msgstr ""

#. type: delimited block * 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2354
msgid "Client broadcasts a DHCPDISCOVER message."
msgstr ""

#. type: delimited block * 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2356
msgid ""
"The DHCP server responds with the IP address, next-server, filename, and "
"root-path values."
msgstr ""

#. type: delimited block * 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2358
msgid "The client sends a TFTP request to next-server, asking to retrieve filename."
msgstr ""

#. type: delimited block * 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2360
msgid "The TFTP server responds and sends filename to client."
msgstr ""

#. type: delimited block * 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2362
msgid ""
"The client executes filename, which is pxeboot(8), which then loads the "
"kernel. When the kernel executes, the root file system specified by "
"root-path is mounted over NFS."
msgstr ""

#. type: delimited block * 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2364
msgid ""
"On the TFTP server, read [.filename]#/var/log/xferlog# to ensure that "
"[.filename]#pxeboot# is being retrieved from the correct location. To test "
"this example configuration:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2370
#, no-wrap
msgid ""
"# tftp 192.168.0.1\n"
"tftp> get FreeBSD/install/boot/pxeboot\n"
"Received 264951 bytes in 0.1 seconds\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2373
msgid ""
"  The `BUGS` sections in man:tftpd[8] and man:tftp[1] document some "
"limitations with TFTP."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2374
msgid ""
"Make sure that the root file system can be mounted via NFS. To test this "
"example configuration:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2378
#, no-wrap
msgid "# mount -t nfs 192.168.0.1:/b/tftpboot/FreeBSD/install /mnt\n"
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2382
#, no-wrap
msgid "IPv6"
msgstr "IPv6"

#. type: delimited block * 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2385
msgid ""
"IPv6 is the new version of the well known IP protocol, also known as "
"IPv4. IPv6 provides several advantages over IPv4 as well as many new "
"features:"
msgstr ""

#. type: delimited block * 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2387
msgid ""
"Its 128-bit address space allows for "
"340,282,366,920,938,463,463,374,607,431,768,211,456 addresses. This "
"addresses the IPv4 address shortage and eventual IPv4 address exhaustion."
msgstr ""

#. type: delimited block * 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2388
#, fuzzy
msgid ""
"Routers only store network aggregation addresses in their routing tables, "
"thus reducing the average space of a routing table to 8192 entries. This "
"addresses the scalability issues associated with IPv4, which required every "
"allocated block of IPv4 addresses to be exchanged between Internet routers, "
"causing their routing tables to become too large to allow efficient routing."
msgstr ""
"路由器仅将保存网络聚合地址（network aggregation addresses）保存在它的路由表中，这将路由表的平均条目数缩短到了 "
"8192。这解决了<acronym>IPv4</acronym>的可伸缩性问题，IPv4 要求 Internet "
"路由器之间交换每个已分配的<acronym>IPv4</acronym>地址块，从而导致其路由表变得太大，降低了路由效率。"

#. type: delimited block * 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2390
msgid "Address autoconfiguration (http://www.ietf.org/rfc/rfc2462.txt[RFC2462])."
msgstr ""

#. type: delimited block * 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2391
msgid "Mandatory multicast addresses."
msgstr "强制的多播地址。"

#. type: delimited block * 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2392
msgid "Built-in IPsec (IP security)."
msgstr ""

#. type: delimited block * 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2393
msgid "Simplified header structure."
msgstr "简单的头结构。"

#. type: delimited block * 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2394
msgid "Support for mobile IP."
msgstr ""

#. type: delimited block * 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2395
msgid "IPv6-to-IPv4 transition mechanisms."
msgstr ""

#. type: delimited block * 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2397
msgid ""
"FreeBSD includes the http://www.kame.net/[http://www.kame.net/] IPv6 "
"reference implementation and comes with everything needed to use IPv6. This "
"section focuses on getting IPv6 configured and running."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2398
#, no-wrap
msgid "Background on IPv6 Addresses"
msgstr ""

#. type: delimited block * 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2401
msgid "There are three different types of IPv6 addresses:"
msgstr ""

#. type: Labeled list
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2402
#, no-wrap
msgid "Unicast"
msgstr "单播（Unicast）地址"

#. type: delimited block * 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2404
msgid ""
"A packet sent to a unicast address arrives at the interface belonging to the "
"address."
msgstr "Unicast 地址是为人们所熟知的地址。一个被发送到 unicast 地址的包实际上会到达属于这个地址的接口。"

#. type: Labeled list
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2405
#, no-wrap
msgid "Anycast"
msgstr "任播（Anycast）地址"

#. type: delimited block * 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2407
msgid ""
"These addresses are syntactically indistinguishable from unicast addresses "
"but they address a group of interfaces. The packet destined for an anycast "
"address will arrive at the nearest router interface. Anycast addresses are "
"only used by routers."
msgstr ""
"Anycast 地址语义上与 unicast 地址没有差别， 只是它们强调一组接口。指定为 anycast 地址的包会到达最近的 (以路由为单位) 接口。"
"Anycast 地址可能只被路由器使用。"

#. type: Labeled list
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2408
#, no-wrap
msgid "Multicast"
msgstr "多播（Multicast）地址"

#. type: delimited block * 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2410
msgid ""
"These addresses identify a group of interfaces. A packet destined for a "
"multicast address will arrive at all interfaces belonging to the multicast "
"group. The IPv4 broadcast address, usually `xxx.xxx.xxx.255`, is expressed "
"by multicast addresses in IPv6."
msgstr ""

#. type: delimited block * 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2412
msgid ""
"When reading an IPv6 address, the canonical form is represented as "
"`x:x:x:x:x:x:x:x`, where each `x` represents a 16 bit hex value. An example "
"is `FEBC:A574:382B:23C1:AA49:4592:4EFE:9982`."
msgstr ""

#. type: delimited block * 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2414
msgid ""
"Often, an address will have long substrings of all zeros. A `::` (double "
"colon) can be used to replace one substring per address. Also, up to three "
"leading ``0``s per hex value can be omitted. For example, `fe80::1` "
"corresponds to the canonical form `fe80:0000:0000:0000:0000:0000:0000:0001`."
msgstr ""

#. type: delimited block * 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2416
msgid ""
"A third form is to write the last 32 bits using the well known IPv4 "
"notation. For example, `2002::10.0.0.1` corresponds to the hexadecimal "
"canonical representation `2002:0000:0000:0000:0000:0000:0a00:0001`, which in "
"turn is equivalent to `2002::a00:1`."
msgstr ""

#. type: delimited block * 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2418
msgid "To view a FreeBSD system's IPv6 address, use man:ifconfig[8]:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2422
#, no-wrap
msgid "# ifconfig\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2432
#, fuzzy, no-wrap
msgid ""
"rl0: flags=8943<UP,BROADCAST,RUNNING,PROMISC,SIMPLEX,MULTICAST> mtu 1500\n"
"         inet 10.0.0.10 netmask 0xffffff00 broadcast 10.0.0.255\n"
"         inet6 fe80::200:21ff:fe03:8e1%rl0 prefixlen 64 scopeid 0x1\n"
"         ether 00:00:21:03:08:e1\n"
"         media: Ethernet autoselect (100baseTX )\n"
"         status: active\n"
msgstr ""
"rl0: flags=8943&lt;UP,BROADCAST,RUNNING,PROMISC,SIMPLEX,MULTICAST&gt; mtu "
"1500\n"
"         inet 10.0.0.10 netmask 0xffffff00 broadcast 10.0.0.255\n"
"         inet6 fe80::200:21ff:fe03:8e1%rl0 prefixlen 64 scopeid 0x1\n"
"         ether 00:00:21:03:08:e1\n"
"         media: Ethernet autoselect (100baseTX )\n"
"         status: active\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2435
msgid ""
"In this example, the [.filename]#rl0# interface is using "
"`fe80::200:21ff:fe03:8e1%rl0`, an auto-configured link-local address which "
"was automatically generated from the MAC address."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2437
msgid ""
"Some IPv6 addresses are reserved. A summary of these reserved addresses is "
"seen in <<reservedip6>>:"
msgstr ""

#. type: Block title
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2438
#, no-wrap
msgid "Reserved IPv6 Addresses"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2485
#, no-wrap
msgid ""
"| IPv6 address\n"
"| Prefixlength (Bits)\n"
"| Description\n"
"| Notes\n"
"\n"
"|`::`\n"
"|128 bits\n"
"|unspecified\n"
"|Equivalent to `0.0.0.0` in IPv4.\n"
"\n"
"|`::1`\n"
"|128 bits\n"
"|loopback address\n"
"|Equivalent to `127.0.0.1` in IPv4.\n"
"\n"
"|`::00:xx:xx:xx:xx`\n"
"|96 bits\n"
"|embedded IPv4\n"
"|The lower 32 bits are the compatible IPv4 address.\n"
"\n"
"|`::ff:xx:xx:xx:xx`\n"
"|96 bits\n"
"|IPv4 mapped IPv6 address\n"
"|The lower 32 bits are the IPv4 address for hosts which do not support "
"IPv6.\n"
"\n"
"|`fe80::/10`\n"
"|10 bits\n"
"|link-local\n"
"|Equivalent to 169.254.0.0/16 in IPv4.\n"
"\n"
"|`fc00::/7`\n"
"|7 bits\n"
"|unique-local\n"
"|Unique local addresses are intended for local communication and are only "
"routable within a set of cooperating sites.\n"
"\n"
"|`ff00::`\n"
"|8 bits\n"
"|multicast\n"
"|\n"
"\n"
"|``2000::-3fff::``\n"
"|3 bits\n"
"|global unicast\n"
"|All global unicast addresses are assigned from this pool. The first 3 bits "
"are `001`.\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2488
msgid ""
"For further information on the structure of IPv6 addresses, refer to "
"http://www.ietf.org/rfc/rfc3513.txt[RFC3513]."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2489
#, no-wrap
msgid "Configuring IPv6"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2492
msgid ""
"To configure a FreeBSD system as an IPv6 client, add these two lines to "
"[.filename]#rc.conf#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2497
#, no-wrap
msgid ""
"ifconfig_rl0_ipv6=\"inet6 accept_rtadv\"\n"
"rtsold_enable=\"YES\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2500
msgid ""
"The first line enables the specified interface to receive router "
"advertisement messages. The second line enables the router solicitation "
"daemon, man:rtsol[8]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2502
msgid ""
"If the interface needs a statically assigned IPv6 address, add an entry to "
"specify the static address and associated prefix length:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2506
#, no-wrap
msgid ""
"ifconfig_rl0_ipv6=\"inet6 2001:db8:4672:6565:2026:5043:2d42:5344 prefixlen "
"64\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2509
msgid "To assign a default router, specify its address:"
msgstr "要分配默认路由，请指定其地址："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2513
#, no-wrap
msgid "ipv6_defaultrouter=\"2001:db8:4672:6565::1\"\n"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2515
#, no-wrap
msgid "Connecting to a Provider"
msgstr "连接到 Provider"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2518
msgid ""
"In order to connect to other IPv6 networks, one must have a provider or a "
"tunnel that supports IPv6:"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2520
msgid "Contact an Internet Service Provider to see if they offer IPv6."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2521
msgid ""
"http://www.tunnelbroker.net[Hurricane Electric] offers tunnels with "
"end-points all around the globe."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2525
#, fuzzy
msgid "Install the package:net/freenet6[] package or port for a dial-up connection."
msgstr "从 package 或 port 安装 <package>net/freenet6</package>，用于拨号连接。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2528
#, fuzzy
msgid ""
"This section demonstrates how to take the directions from a tunnel provider "
"and convert them into [.filename]#/etc/rc.conf# settings that will persist "
"through reboots."
msgstr ""
"本节演示如何从隧道提供程序获取方向并将其转换为<filename>/etc/rc.conf</filename>设置，这些设置将一直持续到下一次重新启动。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2530
msgid ""
"The first [.filename]#/etc/rc.conf# entry creates the generic tunneling "
"interface [.filename]#gif0#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2534
#, no-wrap
msgid "cloned_interfaces=\"gif0\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2537
msgid ""
"Next, configure that interface with the IPv4 addresses of the local and "
"remote endpoints. Replace `_MY_IPv4_ADDR_` and `_REMOTE_IPv4_ADDR_` with the "
"actual IPv4 addresses:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2541
#, no-wrap
msgid "create_args_gif0=\"tunnel MY_IPv4_ADDR REMOTE_IPv4_ADDR\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2544
msgid ""
"To apply the IPv6 address that has been assigned for use as the IPv6 tunnel "
"endpoint, add this line, replacing `_MY_ASSIGNED_IPv6_TUNNEL_ENDPOINT_ADDR_` "
"with the assigned address:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2548
#, no-wrap
msgid "ifconfig_gif0_ipv6=\"inet6 MY_ASSIGNED_IPv6_TUNNEL_ENDPOINT_ADDR\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2551
msgid ""
"Then, set the default route for the other side of the IPv6 tunnel. Replace "
"`_MY_IPv6_REMOTE_TUNNEL_ENDPOINT_ADDR_` with the default gateway address "
"assigned by the provider:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2555
#, no-wrap
msgid "ipv6_defaultrouter=\"MY_IPv6_REMOTE_TUNNEL_ENDPOINT_ADDR\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2558
msgid ""
"If the FreeBSD system will route IPv6 packets between the rest of the "
"network and the world, enable the gateway using this line:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2562
#, fuzzy, no-wrap
msgid "ipv6_gateway_enable=\"YES\"\n"
msgstr "ipv6_gateway_enable=\"YES\"\n"

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2564
#, no-wrap
msgid "Router Advertisement and Host Auto Configuration"
msgstr "Router Advertisement与Host Auto Configuration"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2567
msgid ""
"This section demonstrates how to setup man:rtadvd[8] to advertise the IPv6 "
"default route."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2569
msgid "To enable man:rtadvd[8], add the following to [.filename]#/etc/rc.conf#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2573
#, fuzzy, no-wrap
msgid "rtadvd_enable=\"YES\"\n"
msgstr "rtadvd_enable=\"YES\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2576
msgid ""
"It is important to specify the interface on which to do IPv6 router "
"advertisement. For example, to tell man:rtadvd[8] to use [.filename]#rl0#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2580
#, fuzzy, no-wrap
msgid "rtadvd_interfaces=\"rl0\"\n"
msgstr "rtadvd_interfaces=\"rl0\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2583
#, fuzzy
msgid ""
"Next, create the configuration file, [.filename]#/etc/rtadvd.conf# as seen "
"in this example:"
msgstr "接下来，创建配置文件，<filename>/etc/rtadvd.conf</filename>，如本示例所示："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2588
#, fuzzy, no-wrap
msgid ""
"rl0:\\\n"
"\t:addrs#1:addr=\"2001:db8:1f11:246::\":prefixlen#64:tc=ether:\n"
msgstr ""
"rl0:\\\n"
"\t:addrs#1:addr=\"2001:db8:1f11:246::\":prefixlen#64:tc=ether:\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2591
msgid ""
"Replace [.filename]#rl0# with the interface to be used and "
"`2001:db8:1f11:246::` with the prefix of the allocation."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2593
msgid ""
"For a dedicated `/64` subnet, nothing else needs to be changed. Otherwise, "
"change the `prefixlen#` to the correct value."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2594
#, no-wrap
msgid "IPv6 and IPv6 Address Mapping"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2597
msgid ""
"When IPv6 is enabled on a server, there may be a need to enable IPv4 mapped "
"IPv6 address communication. This compatibility option allows for IPv4 "
"addresses to be represented as IPv6 addresses. Permitting IPv6 applications "
"to communicate with IPv4 and vice versa may be a security issue."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2599
#, fuzzy
msgid ""
"This option may not be required in most cases and is available only for "
"compatibility. This option will allow IPv6-only applications to work with "
"IPv4 in a dual stack environment. This is most useful for third party "
"applications which may not support an IPv6-only environment. To enable this "
"feature, add the following to [.filename]#/etc/rc.conf#:"
msgstr ""
"在大多数情况下，可能不需要此选项，仅用于兼容性。此选项将允许<acronym>IPv6</acronym>-only "
"应用程序在双栈环境中与<acronym>IPv4</acronym>一起工作。这对于可能不支持<acronym>IPv6</acronym>-only "
"环境的第三方应用程序来说是最有用的。要启用此功能，请在 <filename>/etc/rc.conf</filename>中添加以下内容："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2603
#, fuzzy, no-wrap
msgid "ipv6_ipv4mapping=\"YES\"\n"
msgstr "ipv6_ipv4mapping=\"YES\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2606
msgid ""
"Reviewing the information in RFC 3493, section 3.6 and 3.7 as well as RFC "
"4038 section 4.2 may be useful to some administrators."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2608
#, no-wrap
msgid "Common Address Redundancy Protocol (CARP)"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2611
msgid ""
"The Common Address Redundancy Protocol (CARP) allows multiple hosts to share "
"the same IP address and Virtual Host ID (VHID) in order to provide _high "
"availability_ for one or more services. This means that one or more hosts "
"can fail, and the other hosts will transparently take over so that users do "
"not see a service failure."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2613
msgid ""
"In addition to the shared IP address, each host has its own IP address for "
"management and configuration. All of the machines that share an IP address "
"have the same VHID. The VHID for each virtual IP address must be unique "
"across the broadcast domain of the network interface."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2615
#, fuzzy
msgid ""
"High availability using CARP is built into FreeBSD, though the steps to "
"configure it vary slightly depending upon the FreeBSD version. This section "
"provides the same example configuration for versions before and equal to or "
"after FreeBSD 10."
msgstr ""
"FreeBSD 内建 <acronym>CARP</acronym>，不过随着 FreeBSD 版本不通，配置可能会有些许不通。本节适用于 "
"FreeBSD 10 之后的版本。"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2617
msgid ""
"This example configures failover support with three hosts, all with unique "
"IP addresses, but providing the same web content. It has two different "
"masters named `hosta.example.org` and `hostb.example.org`, with a shared "
"backup named `hostc.example.org`."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2619
#, fuzzy
msgid ""
"These machines are load balanced with a Round Robin DNS configuration. The "
"master and backup machines are configured identically except for their "
"hostnames and management IP addresses. These servers must have the same "
"configuration and run the same services. When the failover occurs, requests "
"to the service on the shared IP address can only be answered correctly if "
"the backup server has access to the same content. The backup machine has two "
"additional CARP interfaces, one for each of the master content server's IP "
"addresses. When a failure occurs, the backup server will pick up the failed "
"master machine's IP address."
msgstr ""
"这些机器采用<acronym>DNS</acronym>轮询配置进行负载均衡。除了主机名和管理<acronym>IP</acronym>地址外，主机和备份"
"机的配置完全相同。这些服务器必须具有相同的配置并运行相同的服务。发生故障切换时，只有当备份服务器能够访问相同的内容时，对共享的 <acronym>IP</"
"acronym>地址上的服务请求才能得到正确的响应。备份机有两个额外的<acronym>CARP</acronym>接口，每个主内容服务器的都有一个<ac"
"ronym>IP</acronym>地址。当发生故障时，备份服务器将接收故障的主机的<acronym>IP</acronym>地址。"

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2621
#, no-wrap
msgid "Using CARP on FreeBSD 10 and Later"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2624
msgid ""
"Enable boot-time support for CARP by adding an entry for the "
"[.filename]#carp.ko# kernel module in [.filename]#/boot/loader.conf#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2628
#, fuzzy, no-wrap
msgid "carp_load=\"YES\"\n"
msgstr "carp_load=\"YES\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2631
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2702
msgid "To load the module now without rebooting:"
msgstr "要立即加载模块而不重新启动："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2635
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2706
#, no-wrap
msgid "# kldload carp\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2638
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2709
msgid ""
"For users who prefer to use a custom kernel, include the following line in "
"the custom kernel configuration file and compile the kernel as described in "
"crossref:kernelconfig[kernelconfig,Configuring the FreeBSD Kernel]:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2642
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2713
#, fuzzy, no-wrap
msgid "device\tcarp\n"
msgstr "device\tcarp\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2645
msgid ""
"The hostname, management IP address and subnet mask, shared IP address, and "
"VHID are all set by adding entries to [.filename]#/etc/rc.conf#. This "
"example is for `hosta.example.org`:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2651
#, no-wrap
msgid ""
"hostname=\"hosta.example.org\"\n"
"ifconfig_em0=\"inet 192.168.1.3 netmask 255.255.255.0\"\n"
"ifconfig_em0_alias0=\"inet vhid 1 pass testpass alias 192.168.1.50/32\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2654
msgid ""
"The next set of entries are for `hostb.example.org`. Since it represents a "
"second master, it uses a different shared IP address and VHID. However, the "
"passwords specified with `pass` must be identical as CARP will only listen "
"to and accept advertisements from machines with the correct password."
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2660
#, no-wrap
msgid ""
"hostname=\"hostb.example.org\"\n"
"ifconfig_em0=\"inet 192.168.1.4 netmask 255.255.255.0\"\n"
"ifconfig_em0_alias0=\"inet vhid 2 pass testpass alias 192.168.1.51/32\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2663
msgid ""
"The third machine, `hostc.example.org`, is configured to handle failover "
"from either master. This machine is configured with two CARPVHIDs, one to "
"handle the virtual IP address for each of the master hosts. The CARP "
"advertising skew, `advskew`, is set to ensure that the backup host "
"advertises later than the master, since `advskew` controls the order of "
"precedence when there are multiple backup servers."
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2670
#, no-wrap
msgid ""
"hostname=\"hostc.example.org\"\n"
"ifconfig_em0=\"inet 192.168.1.5 netmask 255.255.255.0\"\n"
"ifconfig_em0_alias0=\"inet vhid 1 advskew 100 pass testpass alias "
"192.168.1.50/32\"\n"
"ifconfig_em0_alias1=\"inet vhid 2 advskew 100 pass testpass alias "
"192.168.1.51/32\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2673
msgid ""
"Having two CARPVHIDs configured means that `hostc.example.org` will notice "
"if either of the master servers becomes unavailable. If a master fails to "
"advertise before the backup server, the backup server will pick up the "
"shared IP address until the master becomes available again."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2677
msgid ""
"If the original master server becomes available again, `hostc.example.org` "
"will not release the virtual IP address back to it automatically. For this "
"to happen, preemption has to be enabled. The feature is disabled by default, "
"it is controlled via the man:sysctl[8] variable `net.inet.carp.preempt`. The "
"administrator can force the backup server to return the IP address to the "
"master:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2681
#, no-wrap
msgid "# ifconfig em0 vhid 1 state backup\n"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2686
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2766
msgid ""
"Once the configuration is complete, either restart networking or reboot each "
"system. High availability is now enabled."
msgstr "配置完成后，重启网络或操作系统。这样就启动了高可用功能。"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2688
msgid ""
"CARP functionality can be controlled via several man:sysctl[8] variables "
"documented in the man:carp[4] manual pages. Other actions can be triggered "
"from CARP events by using man:devd[8]."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2690
#, no-wrap
msgid "Using CARP on FreeBSD 9 and Earlier"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2693
msgid ""
"The configuration for these versions of FreeBSD is similar to the one "
"described in the previous section, except that a CARP device must first be "
"created and referred to in the configuration."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2695
msgid ""
"Enable boot-time support for CARP by loading the [.filename]#if_carp.ko# "
"kernel module in [.filename]#/boot/loader.conf#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2699
#, fuzzy, no-wrap
msgid "if_carp_load=\"YES\"\n"
msgstr "if_carp_load=\"YES\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2716
msgid "Next, on each host, create a CARP device:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2720
#, no-wrap
msgid "# ifconfig carp0 create\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2723
msgid ""
"Set the hostname, management IP address, the shared IP address, and VHID by "
"adding the required lines to [.filename]#/etc/rc.conf#. Since a virtual CARP "
"device is used instead of an alias, the actual subnet mask of `/24` is used "
"instead of `/32`. Here are the entries for `hosta.example.org`:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2730
#, no-wrap
msgid ""
"hostname=\"hosta.example.org\"\n"
"ifconfig_fxp0=\"inet 192.168.1.3 netmask 255.255.255.0\"\n"
"cloned_interfaces=\"carp0\"\n"
"ifconfig_carp0=\"vhid 1 pass testpass 192.168.1.50/24\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2733
msgid "On `hostb.example.org`:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2740
#, no-wrap
msgid ""
"hostname=\"hostb.example.org\"\n"
"ifconfig_fxp0=\"inet 192.168.1.4 netmask 255.255.255.0\"\n"
"cloned_interfaces=\"carp0\"\n"
"ifconfig_carp0=\"vhid 2 pass testpass 192.168.1.51/24\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2743
msgid ""
"The third machine, `hostc.example.org`, is configured to handle failover "
"from either of the master hosts:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2751
#, no-wrap
msgid ""
"hostname=\"hostc.example.org\"\n"
"ifconfig_fxp0=\"inet 192.168.1.5 netmask 255.255.255.0\"\n"
"cloned_interfaces=\"carp0 carp1\"\n"
"ifconfig_carp0=\"vhid 1 advskew 100 pass testpass 192.168.1.50/24\"\n"
"ifconfig_carp1=\"vhid 2 advskew 100 pass testpass 192.168.1.51/24\"\n"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2756
msgid ""
"Preemption is disabled in the [.filename]#GENERIC# FreeBSD kernel. If "
"preemption has been enabled with a custom kernel, `hostc.example.org` may "
"not release the IP address back to the original content server. The "
"administrator can force the backup server to return the IP address to the "
"master with the command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2760
#, no-wrap
msgid "# ifconfig carp0 down && ifconfig carp0 up\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2763
#, fuzzy
msgid ""
"This should be done on the [.filename]#carp# interface which corresponds to "
"the correct host."
msgstr "这应该在与正确的主机对应的<filename>carp</filename> 接口上进行。"

#. type: Title ==
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2768
#, no-wrap
msgid "VLANs"
msgstr "VLAN"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2771
#, fuzzy
msgid ""
"VLANs are a way of virtually dividing up a network into many different "
"subnetworks, also referred to as segmenting. Each segment will have its own "
"broadcast domain and be isolated from other VLANs."
msgstr ""
"<acronym>VLAN</acronym>是一种虚拟网络划分方法，将一个网络划分成多个虚拟子网。每个子网由自己的广播域，并与其他 VLAN 独立。"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2773
msgid ""
"On FreeBSD, VLANs must be supported by the network card driver. To see which "
"drivers support vlans, refer to the man:vlan[4] manual page."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2775
msgid ""
"When configuring a VLAN, a couple pieces of information must be "
"known. First, which network interface? Second, what is the VLAN tag?"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2777
msgid ""
"To configure VLANs at run time, with a NIC of `em0` and a VLAN tag of `5` "
"the command would look like this:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2781
#, no-wrap
msgid "# ifconfig em0.5 create vlan 5 vlandev em0 inet 192.168.20.20/24\n"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2786
msgid ""
"See how the interface name includes the NIC driver name and the VLAN tag, "
"separated by a period? This is a best practice to make maintaining the VLAN "
"configuration easy when many VLANs are present on a machine."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2789
msgid ""
"To configure VLANs at boot time, [.filename]#/etc/rc.conf# must be "
"updated. To duplicate the configuration above, the following will need to be "
"added:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2794
#, no-wrap
msgid ""
"vlans_em0=\"5\"\n"
"ifconfig_em0_5=\"inet 192.168.20.20/24\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2797
msgid ""
"Additional VLANs may be added, by simply adding the tag to the `vlans_em0` "
"field and adding an additional line configuring the network on that VLAN "
"tag's interface."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2799
msgid ""
"It is useful to assign a symbolic name to an interface so that when the "
"associated hardware is changed, only a few configuration variables need to "
"be updated. For example, security cameras need to be run over VLAN 1 on "
"`em0`. Later, if the `em0` card is replaced with a card that uses the "
"man:ixgb[4] driver, all references to `em0.1` will not have to change to "
"`ixgb0.1`."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2801
msgid ""
"To configure VLAN `5`, on the NIC `em0`, assign the interface name "
"`cameras`, and assign the interface an IP address of `_192.168.20.20_` with "
"a `24`-bit prefix, use this command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2805
#, no-wrap
msgid ""
"# ifconfig em0.5 create vlan 5 vlandev em0 name cameras inet "
"192.168.20.20/24\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2808
msgid "For an interface named `video`, use the following:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2812
#, no-wrap
msgid ""
"# ifconfig video.5 create vlan 5 vlandev video name cameras inet "
"192.168.20.20/24\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2815
#, fuzzy
msgid ""
"To apply the changes at boot time, add the following lines to "
"[.filename]#/etc/rc.conf#:"
msgstr "若要在重启后保留设置, 请将以下行添加到<filename>/etc/rc.conf</filename>中:"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/advanced-networking/_index.adoc:2821
#, no-wrap
msgid ""
"vlans_video=\"cameras\"\n"
"create_args_cameras=\"vlan 5\"\n"
"ifconfig_cameras=\"inet 192.168.20.20/24\"\n"
msgstr ""
